<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Buildings.Fluid.HeatExchangers.RadiantSlabs</title>
<meta name="HTML-Generator" content="Dymola">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="&quot;Package with radiant slab models&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial, sans-serif; }
.modelica, .modelica * { font-size: 9pt; font-family: Courier, monospace; white-space: pre; }
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address { font-weight: normal; }
td      { border: 1px solid #808080; vertical-align: top; }
th      { border: 1px solid #808080; vertical-align: top; font-weight: bold; }
table   { border: 1px solid #808080; border-collapse: collapse; }
</style>
<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../Resources/www/modelicaDoc.css">
</HEAD>
<body>
<!-- --- header ------ -->
<div class="headerStyle">
<img src="../Resources/www/lbl-logo.png" alt="LBL logo"/>
</div>
<div class="headerLinks">
<ul><li><a href="http://simulationresearch.lbl.gov/modelica">Home</a> &gt; <a href="Buildings.html">Modelica</a></li></ul>
</div>
<!-- --- end header -- -->

<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE RadiantSlabs<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><a name="Buildings.Fluid.HeatExchangers.RadiantSlabs"></a><a href="Buildings_Fluid_HeatExchangers.html#Buildings.Fluid.HeatExchangers"
>Buildings.Fluid.HeatExchangers</a>.RadiantSlabs</h2>
<p>
<b>Package with radiant slab models</b><br>
</p>
<h3>Information</h3>

<p>
This package contains models for radiant slabs 
with pipes or a capillary heat exchanger 
embedded in the construction.
</p>

<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Icons_VariantsPackage.html#Modelica.Icons.VariantsPackage"
>Modelica.Icons.VariantsPackage</a> (Icon for package containing variants).</p>
<h3>Package Content</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Package Content">
<tr>
<th>Name</th>
<th>Description</th>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExchaf53eae32261856d9tSlabS.png" alt="Buildings.Fluid.HeatExchangers.RadiantSlabs.SingleCircuitSlab" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_RadiantSlabs.html#Buildings.Fluid.HeatExchangers.RadiantSlabs.SingleCircuitSlab"
>SingleCircuitSlab</a>
</td>
<td>Model of a single circuit of a radiant slab</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExchad0a237c4717b4738sSlabS.png" alt="Buildings.Fluid.HeatExchangers.RadiantSlabs.ParallelCircuitsSlab" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_RadiantSlabs.html#Buildings.Fluid.HeatExchangers.RadiantSlabs.ParallelCircuitsSlab"
>ParallelCircuitsSlab</a>
</td>
<td>Model of multiple parallel circuits of a radiant slab</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExcha3431f4f2825bbb7emplesS.png" alt="Buildings.Fluid.HeatExchangers.RadiantSlabs.Examples" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_RadiantSlabs_Examples.html#Buildings.Fluid.HeatExchangers.RadiantSlabs.Examples"
>Examples</a>
</td>
<td>Collection of models that illustrate model use and test models</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExchaead4cf641df9b3b2assesS.png" alt="Buildings.Fluid.HeatExchangers.RadiantSlabs.BaseClasses" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_RadiantSlabs_BaseClasses.html#Buildings.Fluid.HeatExchangers.RadiantSlabs.BaseClasses"
>BaseClasses</a>
</td>
<td>Package with base classes for Buildings.Fluid.HeatExchangers.RadiantSlabs</td>
</tr>
</table>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE SingleCircuitSlab<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExchaf53eae32261856d9tSlabI.png" alt="Buildings.Fluid.HeatExchangers.RadiantSlabs.SingleCircuitSlab" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.RadiantSlabs.SingleCircuitSlab"></a><a href="Buildings_Fluid_HeatExchangers_RadiantSlabs.html#Buildings.Fluid.HeatExchangers.RadiantSlabs"
>Buildings.Fluid.HeatExchangers.RadiantSlabs</a>.SingleCircuitSlab</h2>
<p>
<b>Model of a single circuit of a radiant slab</b>
<br>
<br><img src="Buildings.Fluid.HeatExchaf53eae32261856d9tSlabD.png" alt="Buildings.Fluid.HeatExchangers.RadiantSlabs.SingleCircuitSlab">
</p>
<h3>Information</h3>

<p>
This is a model of a single flow circuit of a radiant slab with pipes or a capillary heat exchanger
embedded in the construction.
For a model with multiple parallel flow circuits, see
<a href="Buildings_Fluid_HeatExchangers_RadiantSlabs.html#Buildings.Fluid.HeatExchangers.RadiantSlabs.ParallelCircuitsSlab"
>
Buildings.Fluid.HeatExchangers.RadiantSlabs.ParallelCircuitsSlab</a>.
</p>
<p>
The figure below shows the thermal resistance network of the model for an 
example in which the pipes are embedded in the concrete slab, and
the layers below the pipes are insulation and reinforced concrete.
</p>
<p align="center">
<img alt="image" src="../Resources/Images/Fluid/HeatExchangers/RadiantSlabs/resistances.png"/>
</p>
<p>
The construction <code>con_a</code> computes transient heat conduction
between the surface heat port <code>surf_a</code> and the
plane that contains the pipes, with the heat port <code>con_a.port_a</code> connecting to <code>surf_a</code>.
Similarly, the construction <code>con_b</code> is between the plane
that contains the pipes and the surface heat port
<code>sur_b</code>, with the heat port <code>con_b.port_b</code> connecting to <code>surf_b</code>.
The temperature of the plane that contains the pipes is computes using a fictitious
resistance <code>RFic</code>, which is computed by 
<a href="Buildings_Fluid_HeatExchangers_RadiantSlabs_BaseClasses_Functions.html#Buildings.Fluid.HeatExchangers.RadiantSlabs.BaseClasses.Functions.AverageResistance"
>
Buildings.Fluid.HeatExchangers.RadiantSlabs.BaseClasses.Functions.AverageResistance</a>.
There is also a resistance for the pipe wall <code>RPip</code>
and a convective heat transfer coefficient between the fluid and the pipe inside wall.
The convective heat transfer coefficient is a function of the mass flow rate and is computed
by
<a href="Buildings_Fluid_HeatExchangers_RadiantSlabs_BaseClasses.html#Buildings.Fluid.HeatExchangers.RadiantSlabs.BaseClasses.InternalFlowConvection"
>
Buildings.Fluid.HeatExchangers.RadiantSlabs.BaseClasses.InternalFlowConvection</a>.
</p>
<p>
This resistance network is instantiated several times along the flow path. The parameter
<code>nSeg</code> determines how many instances are used. However, all instances 
connect to the same surface temperature heat ports <code>surf_a</code> and <code>surf_b</code>.
</p>
<p>
The material layers are declared by the parameter <code>layers</code>, which is an instance of
<a href="Buildings_HeatTransfer_Data_OpaqueConstructions.html#Buildings.HeatTransfer.Data.OpaqueConstructions"
>
Buildings.HeatTransfer.Data.OpaqueConstructions</a>.
The first layer of this material is the one at the heat port <code>surf_a</code>, and the last layer
is at the heat port <code>surf_b</code>.
The parameter <code>iLayPip</code> must be set to the number of the interface in which the pipes
are located. For example, consider the following floor slab.
</p>
<p align="center">
<img alt="image" src="../Resources/Images/Fluid/HeatExchangers/RadiantSlabs/construction.png"/>
</p>
Then, the construction definition is
<br/>
<pre>
  Buildings.HeatTransfer.Data.OpaqueConstructions.Generic layers(
        nLay=3, 
        material={
          Buildings.HeatTransfer.Data.Solids.Generic(
            x=0.08,
            k=1.13,
            c=1000,
            d=1400,
            nSta=5),
          Buildings.HeatTransfer.Data.Solids.Generic(
            x=0.05,
            k=0.04,
            c=1400,
            d=10),
          Buildings.HeatTransfer.Data.Solids.Generic(
            x=0.2,
            k=1.8,
            c=1100,
            d=2400)}) "Material definition for floor construction"; 
</pre>
<p>
Note that we set <code>nSta=5</code> in the first material layer. In this example,
this material layer is the concrete layer in which the pipes are embedded. By setting
<code>nSta=5</code> the simulation is forced to be done with five state variables in this layer.
The default setting would have led to only one state variable in this layer.
</p>
<p>
Since the pipes are at the interface of the concrete and the insulation, 
we set <code>iLayPip=1</code>.
</p>
<h5>Initialization</h5>
<p>
The initialization of the fluid in the pipes and of the slab temperature are 
independent of each other.
</p>
<p>
To initialize the medium, the same mechanism is used as for any other fluid 
volume, such as 
<a href="Buildings_Fluid_MixingVolumes.html#Buildings.Fluid.MixingVolumes.MixingVolume"
>
Buildings.Fluid.MixingVolumes.MixingVolume</a>. Specifically,
the parameters
<code>energyDynamics</code> and <code>massDynamics</code> on the 
<code>Dynamics</code> tab are used.
Depending on the values of these parameters, the medium is initialized using the values
<code>p_start</code>,
<code>T_start</code>,
<code>X_start</code> and
<code>C_start</code>, provided that the medium model contains 
species concentrations <code>X</code> and trace substances <code>C</code>.
</p>
<p>
To initialize the construction temperatures, the parameters 
<code>steadyStateInitial</code>,
<code>T_a_start</code>,
<code>T_b_start</code> and
<code>T_c_start</code> are used.
By default, <code>T_c_start</code> is set to the temperature that leads to steady-state
heat transfer between the surfaces <code>surf_a</code> and <code>surf_b</code>, whose
temperatures are both set to 
<code>T_a_start</code> and
<code>T_b_start</code>.
</p>
<p>
The parameter <code>pipe</code>, which is an instance of the record 
<a href="Buildings_Fluid_Data_Pipes.html#Buildings.Fluid.Data.Pipes"
>
Buildings.Fluid.Data.Pipes</a>,
defines the pipe material and geometry.
The parameter <code>disPip</code> declares the spacing between the pipes and
the parameter <code>length</code>, with default <code>length=A/disPip</code>
where <code>A</code> is the slab surface area,
declares the whole length of the pipe circuit.
</p>
<p>
The parameter <code>sysTyp</code> is used to select the equation that is used to compute
the average temperature in the plane of the pipes.
It needs to be set to the following values:
</p>
  <table summary="summary" border="1" cellspacing=0 cellpadding=2 style="border-collapse:collapse;">
  <tr>
      <th>sysTyp</th>
      <th>System type</th>
    </tr>
    <tr>
      <td>BaseClasses.Types.SystemType.Floor</td>
      <td>Radiant heating or cooling systems with pipes embedded in the concrete slab above the thermal insulation.</td>
    </tr>
    <tr>
      <td>BaseClasses.Types.SystemType.Ceiling_Wall_or_Capillary</td>
      <td>Radiant heating or cooling systems with pipes embedded in the concrete slab in the ceiling, or 
          radiant wall systems. Radiant heating and cooling systems with capillary heat exchanger at the 
          construction surface.</td>
    </tr>
  </table>
<h4>Limitations</h4>
<p>
The analogy with a three-resistance network and the corresponding equation for
<code>Rx</code> is based on a steady-state heat transfer analysis. Therefore, it is
only valid during steady-state.
For a fully dynamic model, a three-dimensional finite element method for the radiant slab would need to be implemented.
</p>
<h4>Implementation</h4>
<p>
To separate the material declaration <code>layers</code> into layers between the pipes
and heat port <code>surf_a</code>, and between the pipes and <code>surf_b</code>, the
vector <code>layers.material[nLay]</code> is partitioned into 
<code>layers.material[1:iLayPip]</code> and <code>layers.material[iLayPip+1:nLay]</code>.
The respective partitions are then assigned to the models for heat conduction between the
plane with the pipes and the construction surfaces, <code>con_a</code> and <code>con_b</code>.
</p>
<pre>
</pre>
<p>Extends from <a href="Buildings_Fluid_HeatExchangers_RadiantSlabs_BaseClasses.html#Buildings.Fluid.HeatExchangers.RadiantSlabs.BaseClasses.Slab"
>Buildings.Fluid.HeatExchangers.RadiantSlabs.BaseClasses.Slab</a> (Base class for radiant slab), <a href="Buildings_Fluid_FixedResistances_BaseClasses.html#Buildings.Fluid.FixedResistances.BaseClasses.Pipe"
>Buildings.Fluid.FixedResistances.BaseClasses.Pipe</a> (Model of a pipe with finite volume discretization along the flow path).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="Buildings_Fluid_HeatExchangers_RadiantSlabs_BaseClasses_Types.html#Buildings.Fluid.HeatExchangers.RadiantSlabs.BaseClasses.Types.SystemType"
>SystemType</a></td><td>sysTyp</td><td>&nbsp;</td><td>Radiant system type</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Distance"
>Distance</a></td><td>disPip</td><td>&nbsp;</td><td>Pipe distance [m]</td></tr>
<tr><td><a href="Buildings_Fluid_Data_Pipes.html#Buildings.Fluid.Data.Pipes.Generic"
>Generic</a></td><td>pipe</td><td>&nbsp;</td><td>Record for pipe geometry and material</td></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the component</td></tr>
<tr><td>Integer</td><td>nSeg</td><td>10</td><td>Number of volume segments</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>thicknessIns</td><td>0</td><td>Thickness of insulation [m]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductivity"
>ThermalConductivity</a></td><td>lambdaIns</td><td>0.04</td><td>Heat conductivity of insulation [W/(m.K)]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>diameter</td><td>pipe.dIn</td><td>Pipe diameter (without insulation) [m]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>length</td><td>A/disPip</td><td>Length of the pipe [m]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Construction</td></tr>
<tr><td><a href="Buildings_HeatTransfer_Data_OpaqueConstructions.html#Buildings.HeatTransfer.Data.OpaqueConstructions.Generic"
>Generic</a></td><td>layers</td><td>&nbsp;</td><td>Definition of the construction, which must have at least two material layers</td></tr>
<tr><td>Integer</td><td>iLayPip</td><td>&nbsp;</td><td>Number of the interface layer in which the pipes are located</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</a></td><td>A</td><td>&nbsp;</td><td>Surface area of radiant slab [m2]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_nominal</td><td>&nbsp;</td><td>Nominal mass flow rate [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp_nominal</td><td>Modelica.Fluid.Pipes.BaseCla...</td><td>Pressure [Pa]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow.start</td><td>0</td><td>Mass flow rate from port_a to port_b (m_flow &gt; 0 is design flow direction) [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp.start</td><td>0</td><td>Pressure difference between port_a and port_b [Pa]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Initialization</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Construction</td></tr>
<tr><td>Boolean</td><td>steadyStateInitial</td><td>false</td><td>=true initializes dT(0)/dt=0, false initializes T(0) at fixed temperature using T_a_start, T_c_start and T_b_start</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</a></td><td>T_a_start</td><td>293.15</td><td>Initial temperature at surf_a, used if steadyStateInitial = false [K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</a></td><td>T_b_start</td><td>293.15</td><td>Initial temperature at surf_b, used if steadyStateInitial = false [K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</a></td><td>T_c_start</td><td>(T_a_start*con_b[1].layers.R...</td><td>Initial construction temperature in the layer that contains the pipes, used if steadyStateInitial = false [K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.AbsolutePressure"
>AbsolutePressure</a></td><td>p_start</td><td>Medium.p_default</td><td>Start value of pressure [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.Temperature"
>Temperature</a></td><td>T_start</td><td>Medium.T_default</td><td>Start value of temperature [K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.MassFraction"
>MassFraction</a></td><td>X_start[Medium.nX]</td><td>Medium.X_default</td><td>Start value of mass fractions m_i/m [kg/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.ExtraProperty"
>ExtraProperty</a></td><td>C_start[Medium.nC]</td><td>fill(0, Medium.nC)</td><td>Start value of trace substances</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.ExtraProperty"
>ExtraProperty</a></td><td>C_nominal[Medium.nC]</td><td>fill(1E-2, Medium.nC)</td><td>Nominal value of trace substances. (Set to typical order of magnitude.)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Dynamics</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Equations</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</a></td><td>energyDynamics</td><td>Modelica.Fluid.Types.Dynamic...</td><td>Formulation of energy balance</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</a></td><td>massDynamics</td><td>energyDynamics</td><td>Formulation of mass balance</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal</td><td>system.allowFlowReversal</td><td>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_small</td><td>1E-4*abs(m_flow_nominal)</td><td>Small mass flow rate for regularization of zero flow [kg/s]</td></tr>
<tr><td>Boolean</td><td>homotopyInitialization</td><td>true</td><td>= true, use homotopy method</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Flow resistance</b></td></tr>
<tr><td>Boolean</td><td>from_dp</td><td>false</td><td>= true, use m_flow = f(dp) else dp = f(m_flow)</td></tr>
<tr><td>Boolean</td><td>linearizeFlowResistance</td><td>false</td><td>= true, use linear relation between m_flow and dp for any flow rate</td></tr>
<tr><td>Real</td><td>deltaM</td><td>0.1</td><td>Fraction of nominal flow rate where flow transitions to laminar</td></tr>
<tr><td>Real</td><td>ReC</td><td>4000</td><td>Reynolds number where transition to turbulent starts</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>surf_a</td><td>Heat port at construction surface</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>surf_b</td><td>Heat port at construction surface</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a</td><td>Fluid connector a (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b</td><td>Fluid connector b (positive design flow direction is from port_a to port_b)</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">model</span> SingleCircuitSlab <span style="color: #006400">&quot;Model of a single circuit of a radiant slab&quot;</span>
  <span style="color: blue">extends </span><a href="Buildings_Fluid_HeatExchangers_RadiantSlabs_BaseClasses.html#Buildings.Fluid.HeatExchangers.RadiantSlabs.BaseClasses.Slab"
>Buildings.Fluid.HeatExchangers.RadiantSlabs.BaseClasses.Slab</a>;
  <span style="color: blue">extends </span><a href="Buildings_Fluid_FixedResistances_BaseClasses.html#Buildings.Fluid.FixedResistances.BaseClasses.Pipe"
>Buildings.Fluid.FixedResistances.BaseClasses.Pipe</a>(
     <span style="color: blue">final </span>diameter=pipe.dIn,
     length=A/disPip,
     <span style="color: blue">final </span>thicknessIns=0,
     <span style="color: blue">final </span>lambdaIns = 0.04,
     dp_nominal =<span style="color: red"> Modelica.Fluid.Pipes.BaseClasses.WallFriction.Detailed.pressureLoss_m_flow</span>(
      m_flow=m_flow_nominal,
      rho_a=rho_default,
      rho_b=rho_default,
      mu_a=mu_default,
      mu_b=mu_default,
      length=length,
      diameter=pipe.dIn,
      roughness=pipe.roughness,
      m_flow_small=m_flow_small),
      res(dp(nominal=200*length)));
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> A <span style="color: #006400">&quot;Surface area of radiant slab&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> T_c_start=
    (T_a_start*con_b[1].layers.R+T_b_start*con_a[1].layers.R)/layers.R <span style="color: #006400">
    &quot;Initial construction temperature in the layer that contains the pipes, used if steadyStateInitial = false&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Velocity"
>Modelica.SIunits.Velocity</a> v_nominal=
    4*m_flow_nominal/pipe.dIn^2/Modelica.Constants.pi/rho_default <span style="color: #006400">
    &quot;Velocity at m_flow_nominal&quot;</span>;

  <a href="Buildings_HeatTransfer_Conduction.html#Buildings.HeatTransfer.Conduction.MultiLayer"
>Buildings.HeatTransfer.Conduction.MultiLayer</a> con_a[nSeg](
    <span style="color: blue">each </span><span style="color: blue">final </span>A=A/nSeg,
    <span style="color: blue">each </span>steadyStateInitial=steadyStateInitial,
    <span style="color: blue">each </span>layers(
      <span style="color: blue">final </span>nLay = iLayPip,
      <span style="color: blue">final </span>material={layers.material[i] <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:iLayPip},
      absIR_a=layers.absIR_a,
      absIR_b=layers.absIR_b,
      absSol_a=layers.absSol_a,
      absSol_b=layers.absSol_b,
      roughness_a=layers.roughness_a),
      <span style="color: blue">each </span>T_a_start=T_a_start,
      <span style="color: blue">each </span>T_b_start=T_c_start) <span style="color: #006400">&quot;Construction near the surface port surf_a&quot;</span>;
  <a href="Buildings_HeatTransfer_Conduction.html#Buildings.HeatTransfer.Conduction.MultiLayer"
>Buildings.HeatTransfer.Conduction.MultiLayer</a> con_b[nSeg](
      <span style="color: blue">each </span><span style="color: blue">final </span>A=A/nSeg,
      <span style="color: blue">each </span>steadyStateInitial=steadyStateInitial,
      <span style="color: blue">each </span>layers(
      <span style="color: blue">final </span>nLay = layers.nLay-iLayPip,
      <span style="color: blue">final </span>material={layers.material[i] <span style="color: blue">for </span>i<span style="color: blue"> in </span>iLayPip + 1:layers.nLay},
      absIR_a=layers.absIR_a,
      absIR_b=layers.absIR_b,
      absSol_a=layers.absSol_a,
      absSol_b=layers.absSol_b,
      roughness_a=layers.roughness_a),
      <span style="color: blue">each </span>T_a_start=T_c_start,
      <span style="color: blue">each </span>T_b_start=T_b_start) <span style="color: #006400">&quot;Construction near the surface port surf_b&quot;</span>;

<span style="color: blue">protected </span>
  <a href="Buildings_Fluid_HeatExchangers_RadiantSlabs_BaseClasses.html#Buildings.Fluid.HeatExchangers.RadiantSlabs.BaseClasses.InternalFlowConvection"
>Buildings.Fluid.HeatExchangers.RadiantSlabs.BaseClasses.InternalFlowConvection</a>
    hPip[nSeg](
    <span style="color: blue">each </span>kc_IN_con=
        <span style="color: red">Modelica.Fluid.Dissipation.HeatTransfer.StraightPipe.kc_overall_IN_con</span>(
        d_hyd=pipe.dIn,
        L=length/nSeg,
        K=pipe.roughness),
    <span style="color: blue">redeclare </span><span style="color: blue">each </span><span style="color: blue">final </span><span style="color: blue">package</span> Medium = Medium,
    <span style="color: blue">each </span><span style="color: blue">final </span>A=Modelica.Constants.pi*pipe.dIn*length/nSeg) <span style="color: #006400">
    &quot;Liquid side convective heat transfer&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.RealExpression"
>Modelica.Blocks.Sources.RealExpression</a> mFlu_flow[nSeg](<span style="color: blue">each </span>y=m_flow) <span style="color: #006400">
    &quot;Input signal for mass flow rate&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Components.html#Modelica.Thermal.HeatTransfer.Components.ThermalConductor"
>Modelica.Thermal.HeatTransfer.Components.ThermalConductor</a> RWal[nSeg](<span style="color: blue">each </span>G=2*
        Modelica.Constants.pi*pipe.k*(length/nSeg)/<span style="color: red">Modelica.Math.log</span>(pipe.dOut/pipe.dIn)) <span style="color: #006400">
    &quot;Thermal conduction through the pipe wall&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Components.html#Modelica.Thermal.HeatTransfer.Components.ThermalCollector"
>Modelica.Thermal.HeatTransfer.Components.ThermalCollector</a> colAllToOne(
     <span style="color: blue">final </span>m=nSeg) <span style="color: #006400">&quot;Connector to assign multiple heat ports to one heat port&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Components.html#Modelica.Thermal.HeatTransfer.Components.ThermalCollector"
>Modelica.Thermal.HeatTransfer.Components.ThermalCollector</a> colAllToOne1(
     <span style="color: blue">final </span>m=nSeg) <span style="color: #006400">&quot;Connector to assign multiple heat ports to one heat port&quot;</span>;
 <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Components.html#Modelica.Thermal.HeatTransfer.Components.ThermalConductor"
>Modelica.Thermal.HeatTransfer.Components.ThermalConductor</a> RFic[nSeg](<span style="color: blue">each </span>G=A/nSeg/Rx) <span style="color: #006400">
    &quot;Average fictitious thermal resistance between pipe surface and plane that contains pipe&quot;</span>;

  <span style="color: blue">final </span><span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalInsulance"
>Modelica.SIunits.ThermalInsulance</a> Rx=
      <span style="color: red">Buildings.Fluid.HeatExchangers.RadiantSlabs.BaseClasses.Functions.AverageResistance</span>(
        disPip=disPip,
        dPipOut=pipe.dOut,
        k=layers.material[iLayPip].k,
        sysTyp=sysTyp,
        kIns=layers.material[iLayPip+1].k,
        dIns=layers.material[iLayPip+1].x) <span style="color: #006400">
    &quot;Thermal insulance for average temperature in plane with pipes&quot;</span>;
<span style="color: blue">equation </span>
  <span style="color: red">connect</span>(hPip.fluid, vol.heatPort);
  <span style="color: red">connect</span>(RWal.port_b, hPip.solid);
  <span style="color: red">connect</span>(RFic.port_b, RWal.port_a);
  <span style="color: red">connect</span>(colAllToOne1.port_b,surf_a);
  <span style="color: red">connect</span>(colAllToOne.port_b,surf_b);
  <span style="color: red">connect</span>(colAllToOne1.port_a, con_a.port_a);
  <span style="color: red">connect</span>(con_a.port_b, RFic.port_a);
  <span style="color: red">connect</span>(colAllToOne.port_a, con_b.port_b);
  <span style="color: red">connect</span>(con_b.port_a, RFic.port_a);

  <span style="color: red">connect</span>(mFlu_flow.y, hPip.m_flow);
<span style="color: blue">end </span>SingleCircuitSlab;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE ParallelCircuitsSlab<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExchad0a237c4717b4738sSlabI.png" alt="Buildings.Fluid.HeatExchangers.RadiantSlabs.ParallelCircuitsSlab" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.RadiantSlabs.ParallelCircuitsSlab"></a><a href="Buildings_Fluid_HeatExchangers_RadiantSlabs.html#Buildings.Fluid.HeatExchangers.RadiantSlabs"
>Buildings.Fluid.HeatExchangers.RadiantSlabs</a>.ParallelCircuitsSlab</h2>
<p>
<b>Model of multiple parallel circuits of a radiant slab</b>
<br>
<br><img src="Buildings.Fluid.HeatExchad0a237c4717b4738sSlabD.png" alt="Buildings.Fluid.HeatExchangers.RadiantSlabs.ParallelCircuitsSlab">
</p>
<h3>Information</h3>

<p>
This is a model of a radiant slab with pipes or a capillary heat exchanger
embedded in the construction.
The model is a composition of multiple models of
<a href="Buildings_Fluid_HeatExchangers_RadiantSlabs.html#Buildings.Fluid.HeatExchangers.RadiantSlabs.SingleCircuitSlab"
>
Buildings.Fluid.HeatExchangers.RadiantSlabs.SingleCircuitSlab</a>
that are arranged in a parallel.
</p>
<p>
The parameter <code>nCir</code> declares the number of parallel flow circuits.
Each circuit will have the same mass flow rate, and it is exposed to the same 
port variables for the heat port at the two surfaces, and for the flow inlet and outlet.
</p>
<p>
A typical model application is as follows: Suppose a large room has a radiant slab with two parallel circuits
with the same pipe spacing and pipe length. Then, rather than using two instances of
<a href="Buildings_Fluid_HeatExchangers_RadiantSlabs.html#Buildings.Fluid.HeatExchangers.RadiantSlabs.SingleCircuitSlab"
>
Buildings.Fluid.HeatExchangers.RadiantSlabs.SingleCircuitSlab</a>,
this system can be modeled using one instance of this model in order to reduce computing effort.
See 
<a href="Buildings_Fluid_HeatExchangers_RadiantSlabs_Examples.html#Buildings.Fluid.HeatExchangers.RadiantSlabs.Examples.SingleCircuitMultipleCircuit"
>
Buildings.Fluid.HeatExchangers.RadiantSlabs.Examples.SingleCircuitMultipleCircuit</a> for an example
that shows that the models give identical results.
</p>
<p>
Since this model is a parallel arrangment of <code>nCir</code> models of 
<a href="Buildings_Fluid_HeatExchangers_RadiantSlabs.html#Buildings.Fluid.HeatExchangers.RadiantSlabs.SingleCircuitSlab"
>
Buildings.Fluid.HeatExchangers.RadiantSlabs.SingleCircuitSlab</a>,
we refer to
<a href="Buildings_Fluid_HeatExchangers_RadiantSlabs.html#Buildings.Fluid.HeatExchangers.RadiantSlabs.SingleCircuitSlab"
>
Buildings.Fluid.HeatExchangers.RadiantSlabs.SingleCircuitSlab</a>
for the model documentation.
</p>
<h4>Implementation</h4>
<p>
To allow a better comment for the nominal mass flow rate, i.e., to specify that
its value is for all circuits combined, this
model does not inherit 
<a href="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.PartialTwoPortInterface"
>
Buildings.Fluid.Interfaces.PartialTwoPortInterface</a>.
</p>

<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.PartialTwoPort"
>Modelica.Fluid.Interfaces.PartialTwoPort</a> (Partial component with two ports), <a href="Buildings_Fluid_HeatExchangers_RadiantSlabs_BaseClasses.html#Buildings.Fluid.HeatExchangers.RadiantSlabs.BaseClasses.Slab"
>Buildings.Fluid.HeatExchangers.RadiantSlabs.BaseClasses.Slab</a> (Base class for radiant slab), <a href="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.LumpedVolumeDeclarations"
>Buildings.Fluid.Interfaces.LumpedVolumeDeclarations</a> (Declarations for lumped volumes), <a href="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.TwoPortFlowResistanceParameters"
>Buildings.Fluid.Interfaces.TwoPortFlowResistanceParameters</a> (Parameters for flow resistance for models with two ports).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the component</td></tr>
<tr><td><a href="Buildings_Fluid_HeatExchangers_RadiantSlabs_BaseClasses_Types.html#Buildings.Fluid.HeatExchangers.RadiantSlabs.BaseClasses.Types.SystemType"
>SystemType</a></td><td>sysTyp</td><td>&nbsp;</td><td>Radiant system type</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Distance"
>Distance</a></td><td>disPip</td><td>&nbsp;</td><td>Pipe distance [m]</td></tr>
<tr><td><a href="Buildings_Fluid_Data_Pipes.html#Buildings.Fluid.Data.Pipes.Generic"
>Generic</a></td><td>pipe</td><td>&nbsp;</td><td>Record for pipe geometry and material</td></tr>
<tr><td>Integer</td><td>nCir</td><td>1</td><td>Number of parallel circuits</td></tr>
<tr><td>Integer</td><td>nSeg</td><td>10</td><td>Number of volume segments in each circuit (along flow path)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>length</td><td>A/disPip/nCir</td><td>Length of the pipe of a single circuit [m]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Construction</td></tr>
<tr><td><a href="Buildings_HeatTransfer_Data_OpaqueConstructions.html#Buildings.HeatTransfer.Data.OpaqueConstructions.Generic"
>Generic</a></td><td>layers</td><td>&nbsp;</td><td>Definition of the construction, which must have at least two material layers</td></tr>
<tr><td>Integer</td><td>iLayPip</td><td>&nbsp;</td><td>Number of the interface layer in which the pipes are located</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</a></td><td>A</td><td>&nbsp;</td><td>Surface area of radiant slab (all circuits combined) [m2]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp_nominal</td><td>Modelica.Fluid.Pipes.BaseCla...</td><td>Pressure [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_nominal</td><td>&nbsp;</td><td>Nominal mass flow rate of all circuits combined [kg/s]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal</td><td>system.allowFlowReversal</td><td>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Initialization</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Construction</td></tr>
<tr><td>Boolean</td><td>steadyStateInitial</td><td>false</td><td>=true initializes dT(0)/dt=0, false initializes T(0) at fixed temperature using T_a_start, T_c_start and T_b_start</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</a></td><td>T_a_start</td><td>293.15</td><td>Initial temperature at surf_a, used if steadyStateInitial = false [K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</a></td><td>T_b_start</td><td>293.15</td><td>Initial temperature at surf_b, used if steadyStateInitial = false [K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.AbsolutePressure"
>AbsolutePressure</a></td><td>p_start</td><td>Medium.p_default</td><td>Start value of pressure [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.Temperature"
>Temperature</a></td><td>T_start</td><td>Medium.T_default</td><td>Start value of temperature [K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.MassFraction"
>MassFraction</a></td><td>X_start[Medium.nX]</td><td>Medium.X_default</td><td>Start value of mass fractions m_i/m [kg/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.ExtraProperty"
>ExtraProperty</a></td><td>C_start[Medium.nC]</td><td>fill(0, Medium.nC)</td><td>Start value of trace substances</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.ExtraProperty"
>ExtraProperty</a></td><td>C_nominal[Medium.nC]</td><td>fill(1E-2, Medium.nC)</td><td>Nominal value of trace substances. (Set to typical order of magnitude.)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Dynamics</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Equations</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</a></td><td>energyDynamics</td><td>Modelica.Fluid.Types.Dynamic...</td><td>Formulation of energy balance</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</a></td><td>massDynamics</td><td>energyDynamics</td><td>Formulation of mass balance</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Flow resistance</b></td></tr>
<tr><td>Boolean</td><td>computeFlowResistance</td><td>true</td><td>=true, compute flow resistance. Set to false to assume no friction</td></tr>
<tr><td>Boolean</td><td>from_dp</td><td>false</td><td>= true, use m_flow = f(dp) else dp = f(m_flow)</td></tr>
<tr><td>Boolean</td><td>linearizeFlowResistance</td><td>false</td><td>= true, use linear relation between m_flow and dp for any flow rate</td></tr>
<tr><td>Real</td><td>deltaM</td><td>0.1</td><td>Fraction of nominal flow rate where flow transitions to laminar</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_small</td><td>1E-4*abs(m_flow_nominal)</td><td>Small mass flow rate of all circuits combined for regularization of zero flow [kg/s]</td></tr>
<tr><td>Boolean</td><td>homotopyInitialization</td><td>true</td><td>= true, use homotopy method</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Diagnostics</td></tr>
<tr><td>Boolean</td><td>show_T</td><td>false</td><td>= true, if actual temperature at port is computed</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>surf_a</td><td>Heat port at construction surface</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>surf_b</td><td>Heat port at construction surface</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">model</span> ParallelCircuitsSlab <span style="color: #006400">
  &quot;Model of multiple parallel circuits of a radiant slab&quot;</span>
  <span style="color: blue">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.PartialTwoPort"
>Modelica.Fluid.Interfaces.PartialTwoPort</a>(
    port_a(p(start=p_start,
             nominal=Medium.p_default)),
    port_b(p(start=p_start,
           nominal=Medium.p_default)));
  <span style="color: blue">extends </span><a href="Buildings_Fluid_HeatExchangers_RadiantSlabs_BaseClasses.html#Buildings.Fluid.HeatExchangers.RadiantSlabs.BaseClasses.Slab"
>Buildings.Fluid.HeatExchangers.RadiantSlabs.BaseClasses.Slab</a>;
  <span style="color: blue">extends </span><a href="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.LumpedVolumeDeclarations"
>Buildings.Fluid.Interfaces.LumpedVolumeDeclarations</a>;
  <span style="color: blue">extends </span><a href="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.TwoPortFlowResistanceParameters"
>Buildings.Fluid.Interfaces.TwoPortFlowResistanceParameters</a>(
   dp_nominal =<span style="color: red"> Modelica.Fluid.Pipes.BaseClasses.WallFriction.Detailed.pressureLoss_m_flow</span>(
      m_flow=m_flow_nominal/nCir,
      rho_a=rho_default,
      rho_b=rho_default,
      mu_a=mu_default,
      mu_b=mu_default,
      length=length,
      diameter=pipe.dIn,
      roughness=pipe.roughness,
      m_flow_small=m_flow_small/nCir));

  <span style="color: blue">parameter </span>Integer nCir(min=1) = 1 <span style="color: #006400">&quot;Number of parallel circuits&quot;</span>;
  <span style="color: blue">parameter </span>Integer nSeg(min=2) = 10 <span style="color: #006400">
    &quot;Number of volume segments in each circuit (along flow path)&quot;</span>;

  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> A <span style="color: #006400">
    &quot;Surface area of radiant slab (all circuits combined)&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</a> length = A/disPip/nCir <span style="color: #006400">
    &quot;Length of the pipe of a single circuit&quot;</span>;

  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</a> m_flow_nominal <span style="color: #006400">
    &quot;Nominal mass flow rate of all circuits combined&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</a> m_flow_small(min=0) = 1E-4*<span style="color: red">abs</span>(m_flow_nominal) <span style="color: #006400">
    &quot;Small mass flow rate of all circuits combined for regularization of zero flow&quot;</span>;

  <span style="color: blue">final </span><span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Velocity"
>Modelica.SIunits.Velocity</a> v_nominal=
    4*m_flow_nominal/pipe.dIn^2/Modelica.Constants.pi/rho_default/nCir <span style="color: #006400">
    &quot;Velocity at m_flow_nominal&quot;</span>;

  <span style="color: #006400">// Parameters used for the fluid model implementation</span>
  <span style="color: blue">parameter </span>Boolean homotopyInitialization = true <span style="color: #006400">&quot;= true, use homotopy method&quot;</span>;

  <span style="color: #006400">// Diagnostics</span>
   <span style="color: blue">parameter </span>Boolean show_T = false <span style="color: #006400">
    &quot;= true, if actual temperature at port is computed&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</a> m_flow(start=0) = port_a.m_flow <span style="color: #006400">
    &quot;Mass flow rate from port_a to port_b (m_flow &gt; 0 is design flow direction) for all circuits combined&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</a> dp(start=0, displayUnit=&quot;Pa&quot;) = port_a.p - port_b.p <span style="color: #006400">
    &quot;Pressure difference between port_a and port_b&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ThermodynamicState"
>Medium.ThermodynamicState</a> sta_a=<span style="color: blue">if </span>homotopyInitialization<span style="color: blue"> then </span>
      <span style="color: red">Medium.setState_phX</span>(port_a.p,
                          <span style="color: red">homotopy</span>(actual=<span style="color: red">noEvent</span>(<span style="color: red">actualStream</span>(port_a.h_outflow)),
                                   simplified=<span style="color: red">inStream</span>(port_a.h_outflow)),
                          <span style="color: red">homotopy</span>(actual=<span style="color: red">noEvent</span>(<span style="color: red">actualStream</span>(port_a.Xi_outflow)),
                                   simplified=<span style="color: red">inStream</span>(port_a.Xi_outflow)))<span style="color: blue">
    else </span>
      <span style="color: red">Medium.setState_phX</span>(port_a.p,
                          <span style="color: red">noEvent</span>(<span style="color: red">actualStream</span>(port_a.h_outflow)),
                          <span style="color: red">noEvent</span>(<span style="color: red">actualStream</span>(port_a.Xi_outflow))) <span style="color: blue">if </span>
         show_T <span style="color: #006400">&quot;Medium properties in port_a&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ThermodynamicState"
>Medium.ThermodynamicState</a> sta_b=<span style="color: blue">if </span>homotopyInitialization<span style="color: blue"> then </span>
      <span style="color: red">Medium.setState_phX</span>(port_b.p,
                          <span style="color: red">homotopy</span>(actual=<span style="color: red">noEvent</span>(<span style="color: red">actualStream</span>(port_b.h_outflow)),
                                   simplified=port_b.h_outflow),
                          <span style="color: red">homotopy</span>(actual=<span style="color: red">noEvent</span>(<span style="color: red">actualStream</span>(port_b.Xi_outflow)),
                            simplified=port_b.Xi_outflow))<span style="color: blue">
    else </span>
      <span style="color: red">Medium.setState_phX</span>(port_b.p,
                          <span style="color: red">noEvent</span>(<span style="color: red">actualStream</span>(port_b.h_outflow)),
                          <span style="color: red">noEvent</span>(<span style="color: red">actualStream</span>(port_b.Xi_outflow))) <span style="color: blue">if </span>
          show_T <span style="color: #006400">&quot;Medium properties in port_b&quot;</span>;

  <a href="Buildings_Fluid_HeatExchangers_RadiantSlabs.html#Buildings.Fluid.HeatExchangers.RadiantSlabs.SingleCircuitSlab"
>Buildings.Fluid.HeatExchangers.RadiantSlabs.SingleCircuitSlab</a> sla(
    <span style="color: blue">redeclare </span><span style="color: blue">final </span><span style="color: blue">package</span> Medium = Medium,
    <span style="color: blue">final </span>sysTyp=sysTyp,
    <span style="color: blue">final </span>A=A/nCir,
    <span style="color: blue">final </span>disPip=disPip,
    <span style="color: blue">final </span>pipe=pipe,
    <span style="color: blue">final </span>layers=layers,
    <span style="color: blue">final </span>steadyStateInitial=steadyStateInitial,
    <span style="color: blue">final </span>iLayPip=iLayPip,
    <span style="color: blue">final </span>T_a_start=T_a_start,
    <span style="color: blue">final </span>T_b_start=T_b_start,
    <span style="color: blue">final </span>energyDynamics=energyDynamics,
    <span style="color: blue">final </span>massDynamics=massDynamics,
    <span style="color: blue">final </span>p_start=p_start,
    <span style="color: blue">final </span>T_start=T_start,
    <span style="color: blue">final </span>X_start=X_start,
    <span style="color: blue">final </span>C_start=C_start,
    <span style="color: blue">final </span>C_nominal=C_nominal,
    <span style="color: blue">final </span>allowFlowReversal=allowFlowReversal,
    <span style="color: blue">final </span>m_flow_nominal=m_flow_nominal/nCir,
    <span style="color: blue">final </span>m_flow_small=m_flow_small/nCir,
    <span style="color: blue">final </span>homotopyInitialization=homotopyInitialization,
    <span style="color: blue">final </span>from_dp=from_dp,
    <span style="color: blue">final </span>dp_nominal=dp_nominal,
    <span style="color: blue">final </span>linearizeFlowResistance=linearizeFlowResistance,
    <span style="color: blue">final </span>deltaM=deltaM,
    <span style="color: blue">final </span>nSeg=nSeg,
    <span style="color: blue">final </span>length=length,
    <span style="color: blue">final </span>ReC=4000) <span style="color: #006400">&quot;Single parallel circuit of the radiant slab&quot;</span>;
<span style="color: blue">protected </span>
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ThermodynamicState"
>Medium.ThermodynamicState</a> state_default =<span style="color: red"> Medium.setState_pTX</span>(
      T=Medium.T_default,
      p=Medium.p_default,
      X=Medium.X_default[1:Medium.nXi]) <span style="color: #006400">&quot;Start state&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Density"
>Modelica.SIunits.Density</a> rho_default =<span style="color: red"> Medium.density</span>(state_default);
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.DynamicViscosity"
>Modelica.SIunits.DynamicViscosity</a> mu_default =<span style="color: red"> Medium.dynamicViscosity</span>(state_default) <span style="color: #006400">
    &quot;Dynamic viscosity at nominal condition&quot;</span>;

  <a href="Buildings_Fluid_HeatExchangers_RadiantSlabs_BaseClasses.html#Buildings.Fluid.HeatExchangers.RadiantSlabs.BaseClasses.MassFlowRateMultiplier"
>Buildings.Fluid.HeatExchangers.RadiantSlabs.BaseClasses.MassFlowRateMultiplier</a>
                                                                                 masFloMul_a(
      <span style="color: blue">redeclare </span><span style="color: blue">final </span><span style="color: blue">package</span> Medium = Medium,
      <span style="color: blue">final </span>k=nCir) <span style="color: #006400">
    &quot;Mass flow multiplier, used to avoid having to instanciate multiple slab models&quot;</span>;
  <a href="Buildings_Fluid_HeatExchangers_RadiantSlabs_BaseClasses.html#Buildings.Fluid.HeatExchangers.RadiantSlabs.BaseClasses.MassFlowRateMultiplier"
>Buildings.Fluid.HeatExchangers.RadiantSlabs.BaseClasses.MassFlowRateMultiplier</a>
                                                                                 masFloMul_b(
      <span style="color: blue">redeclare </span><span style="color: blue">final </span><span style="color: blue">package</span> Medium = Medium,
      <span style="color: blue">final </span>k=nCir) <span style="color: #006400">
    &quot;Mass flow multiplier, used to avoid having to instanciate multiple slab models&quot;</span>;
  <a href="Buildings_Fluid_HeatExchangers_RadiantSlabs_BaseClasses.html#Buildings.Fluid.HeatExchangers.RadiantSlabs.BaseClasses.HeatFlowRateMultiplier"
>Buildings.Fluid.HeatExchangers.RadiantSlabs.BaseClasses.HeatFlowRateMultiplier</a>
                                                                                 heaFloMul_a(
      <span style="color: blue">final </span>k=nCir) <span style="color: #006400">
    &quot;Heat flow rate multiplier, used to avoid having to instanciate multiple slab models&quot;</span>;
  <a href="Buildings_Fluid_HeatExchangers_RadiantSlabs_BaseClasses.html#Buildings.Fluid.HeatExchangers.RadiantSlabs.BaseClasses.HeatFlowRateMultiplier"
>Buildings.Fluid.HeatExchangers.RadiantSlabs.BaseClasses.HeatFlowRateMultiplier</a>
                                                                                 heaFloMul_b(
     <span style="color: blue">final </span>k=nCir) <span style="color: #006400">
    &quot;Heat flow rate multiplier, used to avoid having to instanciate multiple slab models&quot;</span>;
<span style="color: blue">equation </span>
  <span style="color: red">connect</span>(sla.port_b, masFloMul_b.port_a);

  <span style="color: red">connect</span>(masFloMul_b.port_b, port_b);

  <span style="color: red">connect</span>(port_a, masFloMul_a.port_b);

  <span style="color: red">connect</span>(masFloMul_a.port_a, sla.port_a);

  <span style="color: red">connect</span>(sla.surf_a,heaFloMul_a. port_a);
  <span style="color: red">connect</span>(heaFloMul_a.port_b, surf_a);
  <span style="color: red">connect</span>(sla.surf_b,heaFloMul_b. port_a);
  <span style="color: red">connect</span>(heaFloMul_b.port_b, surf_b);
<span style="color: blue">end </span>ParallelCircuitsSlab;
</div>
<hr>
<address>
<a href="http://www.3ds.com/">Automatically generated</a> Thu Jun 19 10:56:17 2014.
</address>
</body>
</html>
