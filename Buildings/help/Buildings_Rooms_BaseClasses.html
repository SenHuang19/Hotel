<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Buildings.Rooms.BaseClasses</title>
<meta name="HTML-Generator" content="Dymola">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="&quot;Package with base classes for Buildings.Rooms&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial, sans-serif; }
.modelica, .modelica * { font-size: 9pt; font-family: Courier, monospace; white-space: pre; }
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address { font-weight: normal; }
td      { border: 1px solid #808080; vertical-align: top; }
th      { border: 1px solid #808080; vertical-align: top; font-weight: bold; }
table   { border: 1px solid #808080; border-collapse: collapse; }
</style>
<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../Resources/www/modelicaDoc.css">
</HEAD>
<body>
<!-- --- header ------ -->
<div class="headerStyle">
<img src="../Resources/www/lbl-logo.png" alt="LBL logo"/>
</div>
<div class="headerLinks">
<ul><li><a href="http://simulationresearch.lbl.gov/modelica">Home</a> &gt; <a href="Buildings.html">Modelica</a></li></ul>
</div>
<!-- --- end header -- -->

<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE BaseClasses<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><a name="Buildings.Rooms.BaseClasses"></a><a href="Buildings_Rooms.html#Buildings.Rooms"
>Buildings.Rooms</a>.BaseClasses</h2>
<p>
<b>Package with base classes for Buildings.Rooms</b><br>
</p>
<h3>Information</h3>

<p>
This package contains base classes that are used to construct the models in
<a href="Buildings_Rooms.html#Buildings.Rooms"
>Buildings.Rooms</a>.
</p>

<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Icons_BasesPackage.html#Modelica.Icons.BasesPackage"
>Modelica.Icons.BasesPackage</a> (Icon for packages containing base classes).</p>
<h3>Package Content</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Package Content">
<tr>
<th>Name</th>
<th>Description</th>
</tr>
<tr>
<td><img src="Buildings.Rooms.BaseClassec3a68bf25e1afb7MixedS.png" alt="Buildings.Rooms.BaseClasses.AirHeatMassBalanceMixed" width="20" height="20" align="top">&nbsp;<a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.AirHeatMassBalanceMixed"
>AirHeatMassBalanceMixed</a>
</td>
<td>Heat and mass balance of the air, assuming completely mixed air</td>
</tr>
<tr>
<td><img src="Buildings.Rooms.BaseClass463e41028452bddftionsS.png" alt="Buildings.Rooms.BaseClasses.ExteriorBoundaryConditions" width="20" height="20" align="top">&nbsp;<a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ExteriorBoundaryConditions"
>ExteriorBoundaryConditions</a>
</td>
<td>Model for convection and radiation bounary condition of exterior constructions</td>
</tr>
<tr>
<td><img src="Buildings.Rooms.BaseClassc134fdd45fd20611indowS.png" alt="Buildings.Rooms.BaseClasses.ExteriorBoundaryConditionsWithWindow" width="20" height="20" align="top">&nbsp;<a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ExteriorBoundaryConditionsWithWindow"
>ExteriorBoundaryConditionsWithWindow</a>
</td>
<td>Model for exterior boundary conditions for constructions with a window</td>
</tr>
<tr>
<td><img src="Buildings.Rooms.BaseClasses.HeatGainS.png" alt="Buildings.Rooms.BaseClasses.HeatGain" width="20" height="20" align="top">&nbsp;<a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.HeatGain"
>HeatGain</a>
</td>
<td>Model to convert internal heat gain signals</td>
</tr>
<tr>
<td><img src="Buildings.Rooms.BaseClass39076b6d16b239c0hangeS.png" alt="Buildings.Rooms.BaseClasses.InfraredRadiationExchange" width="20" height="20" align="top">&nbsp;<a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.InfraredRadiationExchange"
>InfraredRadiationExchange</a>
</td>
<td>Infrared radiation heat exchange between the room facing surfaces</td>
</tr>
<tr>
<td><img src="Buildings.Rooms.BaseClassef6fd50d43dced46utionS.png" alt="Buildings.Rooms.BaseClasses.InfraredRadiationGainDistribution" width="20" height="20" align="top">&nbsp;<a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.InfraredRadiationGainDistribution"
>InfraredRadiationGainDistribution</a>
</td>
<td>Infrared radiative heat gain distribution between the room facing surfaces</td>
</tr>
<tr>
<td><img src="Buildings.Rooms.BaseClass396027b42b0f60aaapterS.png" alt="Buildings.Rooms.BaseClasses.RadiationAdapter" width="20" height="20" align="top">&nbsp;<a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.RadiationAdapter"
>RadiationAdapter</a>
</td>
<td>Model to connect between signals and heat port for radiative gains of the room</td>
</tr>
<tr>
<td><img src="Buildings.Rooms.BaseClass0cb9284165e146d7atureS.png" alt="Buildings.Rooms.BaseClasses.RadiationTemperature" width="20" height="20" align="top">&nbsp;<a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.RadiationTemperature"
>RadiationTemperature</a>
</td>
<td>Radiative temperature of the room</td>
</tr>
<tr>
<td><img src="Buildings.Rooms.BaseClass124701a598175785hangeS.png" alt="Buildings.Rooms.BaseClasses.SolarRadiationExchange" width="20" height="20" align="top">&nbsp;<a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.SolarRadiationExchange"
>SolarRadiationExchange</a>
</td>
<td>Solar radiation heat exchange between the room facing surfaces</td>
</tr>
<tr>
<td><img src="Buildings.Rooms.BaseClassfed177a79783e66erfaceS.png" alt="Buildings.Rooms.BaseClasses.PartialSurfaceInterface" width="20" height="20" align="top">&nbsp;<a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.PartialSurfaceInterface"
>PartialSurfaceInterface</a>
</td>
<td>Partial model that is used for infrared radiation balance</td>
</tr>
<tr>
<td><img src="Buildings.Rooms.BaseClassfed177a79783e66erfaceS.png" alt="Buildings.Rooms.BaseClasses.PartialSurfaceInterfaceRadiative" width="20" height="20" align="top">&nbsp;<a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.PartialSurfaceInterfaceRadiative"
>PartialSurfaceInterfaceRadiative</a>
</td>
<td>Partial model that is used for infrared radiation balance</td>
</tr>
<tr>
<td><img src="Buildings.Rooms.BaseClassfb194bf94115eed8hangeS.png" alt="Buildings.Rooms.BaseClasses.SkyRadiationExchange" width="20" height="20" align="top">&nbsp;<a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.SkyRadiationExchange"
>SkyRadiationExchange</a>
</td>
<td>Radiative heat exchange with the sky and the ambient</td>
</tr>
<tr>
<td><img src="Buildings.Rooms.BaseClass0dc001abb17b498embersS.png" alt="Buildings.Rooms.BaseClasses.ConstructionNumbers" width="20" height="20" align="top">&nbsp;<a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ConstructionNumbers"
>ConstructionNumbers</a>
</td>
<td>Data records for construction data</td>
</tr>
<tr>
<td><img src="Buildings.Rooms.BaseClass0dc001abb17b498embersS.png" alt="Buildings.Rooms.BaseClasses.ConstructionRecords" width="20" height="20" align="top">&nbsp;<a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ConstructionRecords"
>ConstructionRecords</a>
</td>
<td>Data records for construction data</td>
</tr>
<tr>
<td><img src="Buildings.Rooms.BaseClass0dc001abb17b498embersS.png" alt="Buildings.Rooms.BaseClasses.Overhang" width="20" height="20" align="top">&nbsp;<a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.Overhang"
>Overhang</a>
</td>
<td>Record for window overhang</td>
</tr>
<tr>
<td><img src="Buildings.Rooms.BaseClass9e633c7ec4500d5eindowS.png" alt="Buildings.Rooms.BaseClasses.ParameterConstructionWithWindow" width="20" height="20" align="top">&nbsp;<a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstructionWithWindow"
>ParameterConstructionWithWindow</a>
</td>
<td>Record for exterior constructions that have a window</td>
</tr>
<tr>
<td><img src="Buildings.Rooms.BaseClass9e633c7ec4500d5eindowS.png" alt="Buildings.Rooms.BaseClasses.ParameterConstruction" width="20" height="20" align="top">&nbsp;<a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstruction"
>ParameterConstruction</a>
</td>
<td>Record for exterior constructions that have no window</td>
</tr>
<tr>
<td><img src="Buildings.Rooms.BaseClass9e633c7ec4500d5eindowS.png" alt="Buildings.Rooms.BaseClasses.PartialParameterConstruction" width="20" height="20" align="top">&nbsp;<a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.PartialParameterConstruction"
>PartialParameterConstruction</a>
</td>
<td>Partial record for constructions</td>
</tr>
<tr>
<td><img src="Buildings.Rooms.BaseClasses.SideFinsS.png" alt="Buildings.Rooms.BaseClasses.SideFins" width="20" height="20" align="top">&nbsp;<a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.SideFins"
>SideFins</a>
</td>
<td>Record for window side fins</td>
</tr>
<tr>
<td><img src="Buildings.Rooms.BaseClasses.ExamplesS.png" alt="Buildings.Rooms.BaseClasses.Examples" width="20" height="20" align="top">&nbsp;<a href="Buildings_Rooms_BaseClasses_Examples.html#Buildings.Rooms.BaseClasses.Examples"
>Examples</a>
</td>
<td>Collection of models that illustrate model use and test models</td>
</tr>
</table>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE AirHeatMassBalanceMixed<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Rooms.BaseClassec3a68bf25e1afb7MixedI.png" alt="Buildings.Rooms.BaseClasses.AirHeatMassBalanceMixed" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Rooms.BaseClasses.AirHeatMassBalanceMixed"></a><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses"
>Buildings.Rooms.BaseClasses</a>.AirHeatMassBalanceMixed</h2>
<p>
<b>Heat and mass balance of the air, assuming completely mixed air</b>
<br>
<br><img src="Buildings.Rooms.BaseClassec3a68bf25e1afb7MixedD.png" alt="Buildings.Rooms.BaseClasses.AirHeatMassBalanceMixed">
</p>
<h3>Information</h3>

<p>
This model computes the heat and mass balance of the air.
The model assumes a completely mixed air volume.
</p>

<p>Extends from <a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ConstructionRecords"
>Buildings.Rooms.BaseClasses.ConstructionRecords</a> (Data records for construction data), <a href="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.LumpedVolumeDeclarations"
>Buildings.Fluid.Interfaces.LumpedVolumeDeclarations</a> (Declarations for lumped volumes).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstruction"
>ParameterConstruction</a></td><td>datConExt[NConExt]</td><td>&nbsp;</td><td>Data for exterior construction</td></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstructionWithWindow"
>ParameterConstructionWithWindow</a></td><td>datConExtWin[NConExtWin]</td><td>&nbsp;</td><td>Data for exterior construction with window</td></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstruction"
>ParameterConstruction</a></td><td>datConPar[NConPar]</td><td>&nbsp;</td><td>Data for partition construction</td></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstruction"
>ParameterConstruction</a></td><td>datConBou[NConBou]</td><td>&nbsp;</td><td>Data for construction boundary</td></tr>
<tr><td><a href="Buildings_HeatTransfer_Data_OpaqueSurfaces.html#Buildings.HeatTransfer.Data.OpaqueSurfaces.Generic"
>Generic</a></td><td>surBou[NSurBou]</td><td>&nbsp;</td><td>Record for data of surfaces whose heat conduction is modeled outside of this room</td></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the component</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Volume"
>Volume</a></td><td>V</td><td>&nbsp;</td><td>Volume [m3]</td></tr>
<tr><td>Boolean</td><td>haveShade</td><td>&nbsp;</td><td>Set to true if at least one window has an interior or exterior shade</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Exterior constructions</td></tr>
<tr><td>Integer</td><td>nConExt</td><td>&nbsp;</td><td>Number of exterior constructions</td></tr>
<tr><td>Integer</td><td>nConExtWin</td><td>&nbsp;</td><td>Number of window constructions</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Partition constructions</td></tr>
<tr><td>Integer</td><td>nConPar</td><td>&nbsp;</td><td>Number of partition constructions</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Boundary constructions</td></tr>
<tr><td>Integer</td><td>nConBou</td><td>&nbsp;</td><td>Number of constructions that have their outside surface exposed to the boundary of this room</td></tr>
<tr><td>Integer</td><td>nSurBou</td><td>&nbsp;</td><td>Number of surface heat transfer models that connect to constructions that are modeled outside of this room</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_nominal</td><td>&nbsp;</td><td>Nominal mass flow rate [kg/s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Convective heat transfer</td></tr>
<tr><td><a href="Buildings_HeatTransfer_Types.html#Buildings.HeatTransfer.Types.InteriorConvection"
>InteriorConvection</a></td><td>conMod</td><td>&nbsp;</td><td>Convective heat transfer model for opaque constructions</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.CoefficientOfHeatTransfer"
>CoefficientOfHeatTransfer</a></td><td>hFixed</td><td>&nbsp;</td><td>Constant convection coefficient for opaque constructions [W/(m2.K)]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Dynamics</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Equations</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</a></td><td>energyDynamics</td><td>Modelica.Fluid.Types.Dynamic...</td><td>Formulation of energy balance</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</a></td><td>massDynamics</td><td>energyDynamics</td><td>Formulation of mass balance</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Initialization</b></td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.AbsolutePressure"
>AbsolutePressure</a></td><td>p_start</td><td>Medium.p_default</td><td>Start value of pressure [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.Temperature"
>Temperature</a></td><td>T_start</td><td>Medium.T_default</td><td>Start value of temperature [K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.MassFraction"
>MassFraction</a></td><td>X_start[Medium.nX]</td><td>Medium.X_default</td><td>Start value of mass fractions m_i/m [kg/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.ExtraProperty"
>ExtraProperty</a></td><td>C_start[Medium.nC]</td><td>fill(0, Medium.nC)</td><td>Start value of trace substances</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.ExtraProperty"
>ExtraProperty</a></td><td>C_nominal[Medium.nC]</td><td>fill(1E-2, Medium.nC)</td><td>Nominal value of trace substances. (Set to typical order of magnitude.)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr><td>Boolean</td><td>homotopyInitialization</td><td>&nbsp;</td><td>= true, use homotopy method</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>uSha[NConExtWin]</td><td>Input connector, used to scale the surface area to take into account an operable shading device, 0: unshaded; 1: fully shaded</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>QRadAbs_flow[NConExtWin]</td><td>Total net radiation that is absorbed by the shade (positive if absorbed) [W]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>TSha[NConExtWin]</td><td>Shade temperature [K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Vessels_BaseClasses.html#Modelica.Fluid.Vessels.BaseClasses.VesselFluidPorts_b"
>VesselFluidPorts_b</a></td><td>ports[nPorts]</td><td>Fluid inlets and outlets</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>heaPorAir</td><td>Heat port to air volume</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conExt[NConExt]</td><td>Heat port that connects to room-side surface of exterior constructions</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conExtWin[NConExtWin]</td><td>Heat port that connects to room-side surface of exterior constructions that contain a window</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>glaUns[NConExtWin]</td><td>Heat port that connects to room-side surface of unshaded glass</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>glaSha[NConExtWin]</td><td>Heat port that connects to room-side surface of shaded glass</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conExtWinFra[NConExtWin]</td><td>Heat port that connects to room-side surface of window frame</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conPar_a[NConPar]</td><td>Heat port that connects to room-side surface a of partition constructions</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conPar_b[NConPar]</td><td>Heat port that connects to room-side surface b of partition constructions</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conBou[NConBou]</td><td>Heat port that connects to room-side surface of constructions that expose their other surface to the outside</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conSurBou[NSurBou]</td><td>Heat port to surfaces of models that compute the heat conduction outside of this room</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">model</span> AirHeatMassBalanceMixed <span style="color: #006400">
  &quot;Heat and mass balance of the air, assuming completely mixed air&quot;</span>
  <span style="color: blue">extends </span><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ConstructionRecords"
>Buildings.Rooms.BaseClasses.ConstructionRecords</a>;
  <span style="color: blue">extends </span><a href="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.LumpedVolumeDeclarations"
>Buildings.Fluid.Interfaces.LumpedVolumeDeclarations</a>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</a> m_flow_nominal(min=0) <span style="color: #006400">
    &quot;Nominal mass flow rate&quot;</span>;
  <span style="color: #006400">// Port definitions</span>
  <span style="color: blue">parameter </span>Integer nPorts=0 <span style="color: #006400">&quot;Number of ports&quot;</span>;
  <span style="color: blue">parameter </span>Boolean homotopyInitialization <span style="color: #006400">&quot;= true, use homotopy method&quot;</span>;

  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Volume"
>Modelica.SIunits.Volume</a> V <span style="color: #006400">&quot;Volume&quot;</span>;

  <span style="color: blue">parameter </span><a href="Buildings_HeatTransfer_Types.html#Buildings.HeatTransfer.Types.InteriorConvection"
>Buildings.HeatTransfer.Types.InteriorConvection</a> conMod <span style="color: #006400">
    &quot;Convective heat transfer model for opaque constructions&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.CoefficientOfHeatTransfer"
>Modelica.SIunits.CoefficientOfHeatTransfer</a> hFixed <span style="color: #006400">
    &quot;Constant convection coefficient for opaque constructions&quot;</span>;

  <span style="color: blue">parameter </span>Boolean haveShade <span style="color: #006400">
    &quot;Set to true if at least one window has an interior or exterior shade&quot;</span>;

  <span style="color: #006400">// Input/output signals</span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> uSha[NConExtWin] <span style="color: blue">if </span>haveShade <span style="color: #006400">
    &quot;Input connector, used to scale the surface area to take into account an operable shading device, 0: unshaded; 1: fully shaded&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> QRadAbs_flow[NConExtWin](
  <span style="color: blue">final </span>unit=&quot;W&quot;) <span style="color: blue">if </span>
     haveShade <span style="color: #006400">
    &quot;Total net radiation that is absorbed by the shade (positive if absorbed)&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> TSha[NConExtWin](
   <span style="color: blue">final </span>unit=&quot;K&quot;,
   <span style="color: blue">final </span>quantity=&quot;ThermodynamicTemperature&quot;) <span style="color: blue">if </span>
      haveShade <span style="color: #006400">&quot;Shade temperature&quot;</span>;

  <span style="color: #006400">// Fluid port</span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Vessels_BaseClasses.html#Modelica.Fluid.Vessels.BaseClasses.VesselFluidPorts_b"
>Modelica.Fluid.Vessels.BaseClasses.VesselFluidPorts_b</a> ports[nPorts](
      <span style="color: blue">redeclare </span><span style="color: blue">each </span><span style="color: blue">final </span><span style="color: blue">package</span> Medium = Medium) <span style="color: #006400">&quot;Fluid inlets and outlets&quot;</span>;

  <span style="color: #006400">// Heat ports</span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a</a> heaPorAir <span style="color: #006400">
    &quot;Heat port to air volume&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a</a> conExt[NConExt] <span style="color: blue">if </span>
     haveConExt <span style="color: #006400">
    &quot;Heat port that connects to room-side surface of exterior constructions&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a</a> conExtWin[NConExtWin] <span style="color: blue">if </span>
     haveConExtWin <span style="color: #006400">
    &quot;Heat port that connects to room-side surface of exterior constructions that contain a window&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a</a> glaUns[NConExtWin] <span style="color: blue">if </span>
     haveConExtWin <span style="color: #006400">
    &quot;Heat port that connects to room-side surface of unshaded glass&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a</a> glaSha[NConExtWin] <span style="color: blue">if </span>
       haveShade <span style="color: #006400">&quot;Heat port that connects to room-side surface of shaded glass&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a</a> conExtWinFra[NConExtWin] <span style="color: blue">if </span>
     haveConExtWin <span style="color: #006400">
    &quot;Heat port that connects to room-side surface of window frame&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a</a> conPar_a[NConPar] <span style="color: blue">if </span>
     haveConPar <span style="color: #006400">
    &quot;Heat port that connects to room-side surface a of partition constructions&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a</a> conPar_b[NConPar] <span style="color: blue">if </span>
     haveConPar <span style="color: #006400">
    &quot;Heat port that connects to room-side surface b of partition constructions&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a</a> conBou[NConBou] <span style="color: blue">if </span>
     haveConBou <span style="color: #006400">
    &quot;Heat port that connects to room-side surface of constructions that expose their other surface to the outside&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a</a> conSurBou[NSurBou] <span style="color: blue">if </span>
     haveSurBou <span style="color: #006400">
    &quot;Heat port to surfaces of models that compute the heat conduction outside of this room&quot;</span>;

  <span style="color: #006400">// Mixing volume</span>
  <a href="Buildings_Fluid_MixingVolumes.html#Buildings.Fluid.MixingVolumes.MixingVolume"
>Fluid.MixingVolumes.MixingVolume</a> vol(
    <span style="color: blue">redeclare </span><span style="color: blue">package</span> Medium = Medium,
    <span style="color: blue">final </span>energyDynamics=energyDynamics,
    <span style="color: blue">final </span>massDynamics=massDynamics,
    <span style="color: blue">final </span>V=V,
    <span style="color: blue">final </span>p_start=p_start,
    <span style="color: blue">final </span>T_start=T_start,
    <span style="color: blue">final </span>X_start=X_start,
    <span style="color: blue">final </span>C_start=C_start,
    <span style="color: blue">final </span>C_nominal=C_nominal,
    <span style="color: blue">final </span>m_flow_nominal = m_flow_nominal,
    <span style="color: blue">final </span>prescribedHeatFlowRate = true,
    <span style="color: blue">final </span>nPorts=nPorts,
    m_flow_small=1E-4*<span style="color: red">abs</span>(m_flow_nominal),
    allowFlowReversal=true) <span style="color: #006400">&quot;Room air volume&quot;</span>;

  <span style="color: #006400">// Convection models</span>
  <a href="Buildings_HeatTransfer_Convection.html#Buildings.HeatTransfer.Convection.Interior"
>HeatTransfer.Convection.Interior</a> convConExt[NConExt](
    <span style="color: blue">final </span>A=AConExt,
    <span style="color: blue">final </span>til = datConExt.til,
    <span style="color: blue">each </span>conMod=conMod,
    <span style="color: blue">each </span>hFixed=hFixed,
    <span style="color: blue">each </span><span style="color: blue">final </span>homotopyInitialization=homotopyInitialization) <span style="color: blue">if </span>
       haveConExt <span style="color: #006400">&quot;Convective heat transfer&quot;</span>;

  <a href="Buildings_HeatTransfer_Convection.html#Buildings.HeatTransfer.Convection.Interior"
>HeatTransfer.Convection.Interior</a> convConExtWin[NConExtWin](
    <span style="color: blue">final </span>A=AConExtWinOpa,
    <span style="color: blue">final </span>til = datConExtWin.til,
    <span style="color: blue">each </span>conMod=conMod,
    <span style="color: blue">each </span>hFixed=hFixed,
    <span style="color: blue">each </span><span style="color: blue">final </span>homotopyInitialization=homotopyInitialization) <span style="color: blue">if </span>
       haveConExtWin <span style="color: #006400">&quot;Convective heat transfer&quot;</span>;

  <a href="Buildings_HeatTransfer_Windows.html#Buildings.HeatTransfer.Windows.InteriorHeatTransferConvective"
>HeatTransfer.Windows.InteriorHeatTransferConvective</a> convConWin[NConExtWin](
    <span style="color: blue">final </span>fFra=datConExtWin.fFra,
    <span style="color: blue">final </span>haveExteriorShade={datConExtWin[i].glaSys.haveExteriorShade <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConExtWin},
    <span style="color: blue">final </span>haveInteriorShade={datConExtWin[i].glaSys.haveInteriorShade <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConExtWin},
    <span style="color: blue">final </span>A=AConExtWinGla + AConExtWinFra) <span style="color: blue">if </span>
       haveConExtWin <span style="color: #006400">&quot;Model for convective heat transfer at window&quot;</span>;

  <a href="Buildings_HeatTransfer_Convection.html#Buildings.HeatTransfer.Convection.Interior"
>HeatTransfer.Convection.Interior</a> convConPar_a[nConPar](
    <span style="color: blue">final </span>A=AConPar,
    <span style="color: blue">final </span>til=Modelica.Constants.pi .- datConPar.til,
    <span style="color: blue">each </span>conMod=conMod,
    <span style="color: blue">each </span>hFixed=hFixed,
    <span style="color: blue">each </span><span style="color: blue">final </span>homotopyInitialization=homotopyInitialization) <span style="color: blue">if </span>
       haveConPar <span style="color: #006400">&quot;Convective heat transfer&quot;</span>;

  <a href="Buildings_HeatTransfer_Convection.html#Buildings.HeatTransfer.Convection.Interior"
>HeatTransfer.Convection.Interior</a> convConPar_b[nConPar](
    <span style="color: blue">final </span>A=AConPar,
    <span style="color: blue">final </span>til = datConPar.til,
    <span style="color: blue">each </span>conMod=conMod,
    <span style="color: blue">each </span>hFixed=hFixed,
    <span style="color: blue">each </span><span style="color: blue">final </span>homotopyInitialization=homotopyInitialization) <span style="color: blue">if </span>
       haveConPar <span style="color: #006400">&quot;Convective heat transfer&quot;</span>;

  <a href="Buildings_HeatTransfer_Convection.html#Buildings.HeatTransfer.Convection.Interior"
>HeatTransfer.Convection.Interior</a> convConBou[nConBou](
    <span style="color: blue">final </span>A=AConBou,
    <span style="color: blue">final </span>til = datConBou.til,
    <span style="color: blue">each </span>conMod=conMod,
    <span style="color: blue">each </span>hFixed=hFixed,
    <span style="color: blue">each </span><span style="color: blue">final </span>homotopyInitialization=homotopyInitialization) <span style="color: blue">if </span>
       haveConBou <span style="color: #006400">&quot;Convective heat transfer&quot;</span>;

  <a href="Buildings_HeatTransfer_Convection.html#Buildings.HeatTransfer.Convection.Interior"
>HeatTransfer.Convection.Interior</a> convSurBou[nSurBou](
    <span style="color: blue">final </span>A=ASurBou,
    <span style="color: blue">final </span>til = surBou.til,
    <span style="color: blue">each </span>conMod=conMod,
    <span style="color: blue">each </span>hFixed=hFixed,
    <span style="color: blue">each </span><span style="color: blue">final </span>homotopyInitialization=homotopyInitialization) <span style="color: blue">if </span>
       haveSurBou <span style="color: #006400">&quot;Convective heat transfer&quot;</span>;

  <span style="color: #006400">// Surface areas</span>
<span style="color: blue">protected </span>
  <span style="color: blue">final </span><span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> AConExt[NConExt] = datConExt.A <span style="color: #006400">
    &quot;Areas of exterior constructions&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> AConExtWinOpa[NConExtWin] = datConExtWin.AOpa <span style="color: #006400">
    &quot;Opaque areas of exterior construction that have a window&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> AConExtWinGla[NConExtWin] = (1 .- datConExtWin.fFra) .* datConExtWin.AWin <span style="color: #006400">
    &quot;Glass areas of exterior construction that have a window&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> AConExtWinFra[NConExtWin] = datConExtWin.fFra .* datConExtWin.AWin <span style="color: #006400">
    &quot;Frame areas of exterior construction that have a window&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> AConPar[NConPar] = datConPar.A <span style="color: #006400">
    &quot;Areas of partition constructions&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> AConBou[NConBou] = datConBou.A <span style="color: #006400">
    &quot;Areas of constructions with exterior boundary conditions exposed to outside of room model&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> ASurBou[NSurBou] = surBou.A <span style="color: #006400">
    &quot;Area of surface models of constructions that are modeled outside of this room&quot;</span>;

  <span style="color: #006400">// Thermal collectors</span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Components.html#Modelica.Thermal.HeatTransfer.Components.ThermalCollector"
>Modelica.Thermal.HeatTransfer.Components.ThermalCollector</a> theConConExt(<span style="color: blue">final </span>m=nConExt) <span style="color: blue">if </span>
       haveConExt <span style="color: #006400">
    &quot;Thermal collector to convert from vector to scalar connector&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Components.html#Modelica.Thermal.HeatTransfer.Components.ThermalCollector"
>Modelica.Thermal.HeatTransfer.Components.ThermalCollector</a> theConConExtWin(<span style="color: blue">final </span>m=nConExtWin) <span style="color: blue">if </span>
       haveConExtWin <span style="color: #006400">
    &quot;Thermal collector to convert from vector to scalar connector&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Components.html#Modelica.Thermal.HeatTransfer.Components.ThermalCollector"
>Modelica.Thermal.HeatTransfer.Components.ThermalCollector</a> theConConWin(<span style="color: blue">final </span>m=nConExtWin) <span style="color: blue">if </span>
       haveConExtWin <span style="color: #006400">
    &quot;Thermal collector to convert from vector to scalar connector&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Components.html#Modelica.Thermal.HeatTransfer.Components.ThermalCollector"
>Modelica.Thermal.HeatTransfer.Components.ThermalCollector</a> theConConPar_a(<span style="color: blue">final </span>m=nConPar) <span style="color: blue">if </span>
       haveConPar <span style="color: #006400">
    &quot;Thermal collector to convert from vector to scalar connector&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Components.html#Modelica.Thermal.HeatTransfer.Components.ThermalCollector"
>Modelica.Thermal.HeatTransfer.Components.ThermalCollector</a> theConConPar_b(<span style="color: blue">final </span>m=nConPar) <span style="color: blue">if </span>
       haveConPar <span style="color: #006400">
    &quot;Thermal collector to convert from vector to scalar connector&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Components.html#Modelica.Thermal.HeatTransfer.Components.ThermalCollector"
>Modelica.Thermal.HeatTransfer.Components.ThermalCollector</a> theConConBou(<span style="color: blue">final </span>m=nConBou) <span style="color: blue">if </span>
       haveConBou <span style="color: #006400">
    &quot;Thermal collector to convert from vector to scalar connector&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Components.html#Modelica.Thermal.HeatTransfer.Components.ThermalCollector"
>Modelica.Thermal.HeatTransfer.Components.ThermalCollector</a> theConSurBou(<span style="color: blue">final </span>m=nSurBou) <span style="color: blue">if </span>
       haveSurBou <span style="color: #006400">
    &quot;Thermal collector to convert from vector to scalar connector&quot;</span>;

<span style="color: blue">equation </span>
  <span style="color: red">connect</span>(convConPar_a.fluid,theConConPar_a. port_a);
  <span style="color: red">connect</span>(convConPar_b.fluid,theConConPar_b. port_a);
  <span style="color: red">connect</span>(convConBou.fluid,theConConBou. port_a);
  <span style="color: red">connect</span>(convSurBou.fluid,theConSurBou. port_a);
  <span style="color: red">connect</span>(theConConPar_a.port_b,vol. heatPort);
  <span style="color: red">connect</span>(theConConPar_b.port_b,vol. heatPort);
  <span style="color: red">connect</span>(theConConBou.port_b,vol. heatPort);
  <span style="color: red">connect</span>(theConSurBou.port_b,vol. heatPort);
  <span style="color: red">connect</span>(conExtWinFra,convConWin. frame);
  <span style="color: red">connect</span>(convConExt.solid, conExt);
  <span style="color: red">connect</span>(convConExt.fluid,theConConExt. port_a);
  <span style="color: red">connect</span>(theConConExt.port_b,vol. heatPort);
  <span style="color: red">connect</span>(theConConExtWin.port_b,vol. heatPort);
  <span style="color: red">connect</span>(convConExtWin.fluid,theConConExtWin. port_a);
  <span style="color: red">connect</span>(convConExtWin.solid, conExtWin);
  <span style="color: red">connect</span>(theConConWin.port_b,vol. heatPort);
  <span style="color: red">connect</span>(convConWin.air,theConConWin. port_a);
  <span style="color: red">connect</span>(convConWin.glaSha, glaSha);
  <span style="color: red">connect</span>(convConWin.glaUns, glaUns);
  <span style="color: red">connect</span>(convConPar_a.solid, conPar_a);
  <span style="color: red">connect</span>(convConPar_b.solid, conPar_b);
  <span style="color: red">connect</span>(convConBou.solid, conBou);
  <span style="color: red">connect</span>(convSurBou.solid, conSurBou);
  <span style="color: red">connect</span>(vol.ports, ports);
  <span style="color: red">connect</span>(heaPorAir, vol.heatPort);
  <span style="color: red">connect</span>(uSha, convConWin.uSha);
  <span style="color: red">connect</span>(convConWin.QRadAbs_flow, QRadAbs_flow);
  <span style="color: red">connect</span>(convConWin.TSha, TSha);
<span style="color: blue">end </span>AirHeatMassBalanceMixed;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE ExteriorBoundaryConditions<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Rooms.BaseClass463e41028452bddftionsI.png" alt="Buildings.Rooms.BaseClasses.ExteriorBoundaryConditions" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Rooms.BaseClasses.ExteriorBoundaryConditions"></a><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses"
>Buildings.Rooms.BaseClasses</a>.ExteriorBoundaryConditions</h2>
<p>
<b>Model for convection and radiation bounary condition of exterior constructions</b>
<br>
<br><img src="Buildings.Rooms.BaseClass463e41028452bddftionsD.png" alt="Buildings.Rooms.BaseClasses.ExteriorBoundaryConditions">
</p>
<h3>Information</h3>

This model computes the boundary conditions for the outside-facing surface of
opaque constructions.
<p>
The model computes the infrared, solar, and convective heat exchange
between these surfaces and the exterior temperature and the sky temperature.
Input into this model are weather data that may be obtained from
<a href="Buildings_BoundaryConditions_WeatherData.html#Buildings.BoundaryConditions.WeatherData"
>
Buildings.BoundaryConditions.WeatherData</a>.
</p>
<p>
In this model, the solar radiation data are converted from horizontal irradiation to
irradiation on tilted surfaces using models from the package
<a href="Buildings_BoundaryConditions_SolarIrradiation.html#Buildings.BoundaryConditions.SolarIrradiation"
>
Buildings.BoundaryConditions.SolarIrradiation</a>.
The convective heat transfer between the exterior surface of the opaque constructions
is computed using
<a href="Buildings_HeatTransfer_Convection.html#Buildings.HeatTransfer.Convection"
>
Buildings.HeatTransfer.Convection</a>.
</p>
<p>
The heat transfer of windows are not computed in this model. They are implemented in
<a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ExteriorBoundaryConditionsWithWindow"
>
Buildings.Rooms.BaseClasses.ExteriorBoundaryConditionsWithWindow</a>.
</p>

<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Angle</a></td><td>lat</td><td>&nbsp;</td><td>Latitude [rad]</td></tr>
<tr><td>Boolean</td><td>linearizeRadiation</td><td>&nbsp;</td><td>Set to true to linearize emissive power</td></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstruction"
>ParameterConstruction</a></td><td>conPar[nCon]</td><td>redeclare parameter Paramete...</td><td>Records for construction</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Exterior constructions</td></tr>
<tr><td>Integer</td><td>nCon</td><td>&nbsp;</td><td>Number of exterior constructions</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Convective heat transfer</td></tr>
<tr><td><a href="Buildings_HeatTransfer_Types.html#Buildings.HeatTransfer.Types.ExteriorConvection"
>ExteriorConvection</a></td><td>conMod</td><td>Buildings.HeatTransfer.Types...</td><td>Convective heat transfer model for opaque part of the constructions</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.CoefficientOfHeatTransfer"
>CoefficientOfHeatTransfer</a></td><td>hFixed</td><td>10.0</td><td>Constant convection coefficient for opaque part of the constructions [W/(m2.K)]</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>opa_a[nCon]</td><td>Heat port at surface a of opaque construction</td></tr>
<tr><td><a href="Buildings_BoundaryConditions_WeatherData.html#Buildings.BoundaryConditions.WeatherData.Bus"
>Bus</a></td><td>weaBus</td><td>&nbsp;</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">model</span> ExteriorBoundaryConditions <span style="color: #006400">
  &quot;Model for convection and radiation bounary condition of exterior constructions&quot;</span>
  <span style="color: blue">parameter </span>Integer nCon(min=1) <span style="color: #006400">&quot;Number of exterior constructions&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Modelica.SIunits.Angle</a> lat <span style="color: #006400">&quot;Latitude&quot;</span>;

  <span style="color: blue">parameter </span>Boolean linearizeRadiation <span style="color: #006400">
    &quot;Set to true to linearize emissive power&quot;</span>;

  <span style="color: blue">replaceable </span><span style="color: blue">parameter </span><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstruction"
>ParameterConstruction</a> conPar[nCon] <span style="color: blue">constrainedby </span>
    ParameterConstruction <span style="color: #006400">&quot;Records for construction&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a</a> opa_a[nCon] <span style="color: #006400">
    &quot;Heat port at surface a of opaque construction&quot;</span>;
  <span style="color: blue">parameter </span><a href="Buildings_HeatTransfer_Types.html#Buildings.HeatTransfer.Types.ExteriorConvection"
>Buildings.HeatTransfer.Types.ExteriorConvection</a> conMod=
  Buildings.HeatTransfer.Types.ExteriorConvection.TemperatureWind <span style="color: #006400">
    &quot;Convective heat transfer model for opaque part of the constructions&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.CoefficientOfHeatTransfer"
>Modelica.SIunits.CoefficientOfHeatTransfer</a> hFixed=10.0 <span style="color: #006400">
    &quot;Constant convection coefficient for opaque part of the constructions&quot;</span>;

  <span style="color: #006400">// The convection coefficients are not final to allow a user to individually</span>
  <span style="color: #006400">// assign them.</span>
  <span style="color: #006400">// We reassign the tilt since a roof has been declared in the room model as the</span>
  <span style="color: #006400">// ceiling (of the room)</span>
  <a href="Buildings_HeatTransfer_Convection.html#Buildings.HeatTransfer.Convection.Exterior"
>HeatTransfer.Convection.Exterior</a> conOpa[nCon](
    A=AOpa,
    <span style="color: blue">final </span>til=Modelica.Constants.pi*<span style="color: red">ones</span>(nCon) .- conPar[:].til,
    <span style="color: blue">final </span>azi=conPar[:].azi,
    <span style="color: blue">each </span>conMod=conMod,
    <span style="color: blue">each </span>hFixed=hFixed) <span style="color: #006400">&quot;Convection model for opaque part of the wall&quot;</span>;

  <a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.SkyRadiationExchange"
>SkyRadiationExchange</a> skyRadExc(
    <span style="color: blue">final </span>n=nCon,
    <span style="color: blue">final </span>A=AOpa,
    <span style="color: blue">final </span>absIR=conPar[:].layers.absIR_a,
    vieFacSky={(Modelica.Constants.pi - conPar[i].til)./Modelica.Constants.pi <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:nCon}) <span style="color: #006400">
    &quot;Infrared radiative heat exchange with sky&quot;</span>;
  <a href="Buildings_BoundaryConditions_WeatherData.html#Buildings.BoundaryConditions.WeatherData.Bus"
>BoundaryConditions.WeatherData.Bus</a> weaBus;

  <a href="Buildings_BoundaryConditions_SolarIrradiation.html#Buildings.BoundaryConditions.SolarIrradiation.DirectTiltedSurface"
>BoundaryConditions.SolarIrradiation.DirectTiltedSurface</a> HDirTil[
            nCon](
    <span style="color: blue">each </span><span style="color: blue">final </span>lat=lat,
    <span style="color: blue">final </span>til=conPar[:].til,
    <span style="color: blue">final </span>azi=conPar[:].azi) <span style="color: #006400">&quot;Direct solar irradiation on the surface&quot;</span>;
  <a href="Buildings_BoundaryConditions_SolarIrradiation.html#Buildings.BoundaryConditions.SolarIrradiation.DiffusePerez"
>BoundaryConditions.SolarIrradiation.DiffusePerez</a> HDifTil[nCon](
    <span style="color: blue">each </span><span style="color: blue">final </span>lat=lat,
    <span style="color: blue">final </span>til=conPar[:].til,
    <span style="color: blue">final </span>azi=conPar[:].azi) <span style="color: #006400">&quot;Diffuse solar irradiation&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Add"
>Modelica.Blocks.Math.Add</a> HTotConExt[nCon](
    <span style="color: blue">final </span>k1=conPar[:].layers.absSol_a .* AOpa,
    <span style="color: blue">final </span>k2=conPar[:].layers.absSol_a .* AOpa) <span style="color: #006400">&quot;Total solar irradiation&quot;</span>;
  <a href="Buildings_HeatTransfer_Sources.html#Buildings.HeatTransfer.Sources.PrescribedHeatFlow"
>Buildings.HeatTransfer.Sources.PrescribedHeatFlow</a> solHeaGaiConExt[nCon] <span style="color: #006400">
    &quot;Total solar heat gain of the surface&quot;</span>;

<span style="color: blue">protected </span>
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> AOpa[nCon]=conPar[:].A <span style="color: #006400">
    &quot;Area of opaque construction&quot;</span>;

  <a href="Buildings_HeatTransfer_Sources.html#Buildings.HeatTransfer.Sources.PrescribedTemperature"
>Buildings.HeatTransfer.Sources.PrescribedTemperature</a> TAirConExt[
    nCon] <span style="color: #006400">&quot;Outside air temperature for exterior constructions&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Routing.html#Modelica.Blocks.Routing.Replicator"
>Modelica.Blocks.Routing.Replicator</a> repConExt(nout=nCon) <span style="color: #006400">&quot;Signal replicator&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Routing.html#Modelica.Blocks.Routing.Replicator"
>Modelica.Blocks.Routing.Replicator</a> repConExt1(
                                               nout=nCon) <span style="color: #006400">&quot;Signal replicator&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Routing.html#Modelica.Blocks.Routing.Replicator"
>Modelica.Blocks.Routing.Replicator</a> repConExt2(
                                               nout=nCon) <span style="color: #006400">&quot;Signal replicator&quot;</span>;

<span style="color: blue">equation </span>
  <span style="color: red">connect</span>(conOpa.solid, opa_a);
  <span style="color: red">connect</span>(skyRadExc.port, opa_a);

  <span style="color: red">connect</span>(TAirConExt.port, conOpa.fluid);
  <span style="color: red">connect</span>(repConExt.y, TAirConExt.T);
  <span style="color: red">connect</span>(repConExt.u, weaBus.TDryBul);
  <span style="color: red">connect</span>(skyRadExc.TOut, weaBus.TDryBul);
  <span style="color: red">connect</span>(skyRadExc.TBlaSky, weaBus.TBlaSky);
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:nCon<span style="color: blue"> loop</span>
  <span style="color: red">connect</span>(weaBus, HDirTil[i].weaBus);
  <span style="color: red">connect</span>(HDifTil[i].weaBus, weaBus);
   <span style="color: blue">end for</span>;
  <span style="color: red">connect</span>(HTotConExt.y, solHeaGaiConExt.Q_flow);
  <span style="color: red">connect</span>(solHeaGaiConExt.port, opa_a);
  <span style="color: red">connect</span>(HDirTil.H, HTotConExt.u1);
  <span style="color: red">connect</span>(HDifTil.H, HTotConExt.u2);
  <span style="color: red">connect</span>(repConExt2.u, weaBus.winDir);
  <span style="color: red">connect</span>(repConExt1.u, weaBus.winSpe);
  <span style="color: red">connect</span>(repConExt1.y, conOpa.v);
  <span style="color: red">connect</span>(repConExt2.y, conOpa.dir);
<span style="color: blue">end </span>ExteriorBoundaryConditions;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE ExteriorBoundaryConditionsWithWindow<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Rooms.BaseClassc134fdd45fd20611indowI.png" alt="Buildings.Rooms.BaseClasses.ExteriorBoundaryConditionsWithWindow" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Rooms.BaseClasses.ExteriorBoundaryConditionsWithWindow"></a><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses"
>Buildings.Rooms.BaseClasses</a>.ExteriorBoundaryConditionsWithWindow</h2>
<p>
<b>Model for exterior boundary conditions for constructions with a window</b>
<br>
<br><img src="Buildings.Rooms.BaseClassc134fdd45fd20611indowD.png" alt="Buildings.Rooms.BaseClasses.ExteriorBoundaryConditionsWithWindow">
</p>
<h3>Information</h3>

This model computes the boundary conditions for the outside-facing surface of
opaque constructions and of windows.
<p>
The model computes the infrared, solar, and convective heat exchange
between these surfaces and the exterior temperature and the sky temperature.
Input into this model are weather data that may be obtained from
<a href="Buildings_BoundaryConditions_WeatherData.html#Buildings.BoundaryConditions.WeatherData"
>
Buildings.BoundaryConditions.WeatherData</a>.
</p>
<p>
This model extends
<a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ExteriorBoundaryConditions"
>
Buildings.Rooms.BaseClasses.ExteriorBoundaryConditions</a>,
which models the boundary conditions for the opaque constructions,
and then implements the boundary condition for windows by using
the model
<a href="Buildings_HeatTransfer_Windows.html#Buildings.HeatTransfer.Windows.ExteriorHeatTransfer"
>
Buildings.HeatTransfer.Windows.ExteriorHeatTransfer</a>.

<p>Extends from <a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ExteriorBoundaryConditions"
>Buildings.Rooms.BaseClasses.ExteriorBoundaryConditions</a> (Model for convection and radiation bounary condition of exterior constructions).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Angle</a></td><td>lat</td><td>&nbsp;</td><td>Latitude [rad]</td></tr>
<tr><td>Boolean</td><td>linearizeRadiation</td><td>&nbsp;</td><td>Set to true to linearize emissive power</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Exterior constructions</td></tr>
<tr><td>Integer</td><td>nCon</td><td>&nbsp;</td><td>Number of exterior constructions</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Convective heat transfer</td></tr>
<tr><td><a href="Buildings_HeatTransfer_Types.html#Buildings.HeatTransfer.Types.ExteriorConvection"
>ExteriorConvection</a></td><td>conMod</td><td>Buildings.HeatTransfer.Types...</td><td>Convective heat transfer model for opaque part of the constructions</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.CoefficientOfHeatTransfer"
>CoefficientOfHeatTransfer</a></td><td>hFixed</td><td>10.0</td><td>Constant convection coefficient for opaque part of the constructions [W/(m2.K)]</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>opa_a[nCon]</td><td>Heat port at surface a of opaque construction</td></tr>
<tr><td><a href="Buildings_BoundaryConditions_WeatherData.html#Buildings.BoundaryConditions.WeatherData.Bus"
>Bus</a></td><td>weaBus</td><td>&nbsp;</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>uSha[nCon]</td><td>Control signal for the shading device, 0: unshaded; 1: fully shaded</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>QAbsSolSha_flow[nCon]</td><td>Solar radiation absorbed by shade [W]</td></tr>
<tr><td>output <a href="Buildings_HeatTransfer_Interfaces.html#Buildings.HeatTransfer.Interfaces.RadiosityOutflow"
>RadiosityOutflow</a></td><td>JOutUns[nCon]</td><td>Outgoing radiosity that connects to unshaded part of glass at exterior side [W]</td></tr>
<tr><td>input <a href="Buildings_HeatTransfer_Interfaces.html#Buildings.HeatTransfer.Interfaces.RadiosityInflow"
>RadiosityInflow</a></td><td>JInUns[nCon]</td><td>Incoming radiosity that connects to unshaded part of glass at exterior side [W]</td></tr>
<tr><td>output <a href="Buildings_HeatTransfer_Interfaces.html#Buildings.HeatTransfer.Interfaces.RadiosityOutflow"
>RadiosityOutflow</a></td><td>JOutSha[nCon]</td><td>Outgoing radiosity that connects to shaded part of glass at exterior side [W]</td></tr>
<tr><td>input <a href="Buildings_HeatTransfer_Interfaces.html#Buildings.HeatTransfer.Interfaces.RadiosityInflow"
>RadiosityInflow</a></td><td>JInSha[nCon]</td><td>Incoming radiosity that connects to shaded part of glass at exterior side [W]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>glaUns[nCon]</td><td>Heat port at unshaded glass of exterior-facing surface</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>glaSha[nCon]</td><td>Heat port at shaded glass of exterior-facing surface</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>fra[nCon]</td><td>Heat port at frame of exterior-facing surface</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>HDir[nCon]</td><td>Direct solar irradition on tilted surface [W/m2]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>HDif[nCon]</td><td>Diffuse solar irradiation on tilted surface [W/m2]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>inc[nCon]</td><td>Incidence angle [rad]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">model</span> ExteriorBoundaryConditionsWithWindow <span style="color: #006400">
  &quot;Model for exterior boundary conditions for constructions with a window&quot;</span>
  <span style="color: blue">extends </span><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ExteriorBoundaryConditions"
>Buildings.Rooms.BaseClasses.ExteriorBoundaryConditions</a>(
   <span style="color: blue">final </span>AOpa=conPar[:].AOpa,
   <span style="color: blue">redeclare </span><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstructionWithWindow"
>Buildings.Rooms.BaseClasses.ParameterConstructionWithWindow</a> conPar);

  <span style="color: blue">final </span><span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> AWin[nCon] = conPar[:].hWin .* conPar[:].wWin <span style="color: #006400">
    &quot;Window area&quot;</span>;

  <span style="color: blue">final </span><span style="color: blue">parameter </span>Boolean haveExteriorShade[nCon] = conPar[:].glaSys.haveExteriorShade <span style="color: #006400">
    &quot;Set to true if window has exterior shade (at surface a)&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Boolean haveInteriorShade[nCon] = conPar[:].glaSys.haveInteriorShade <span style="color: #006400">
    &quot;Set to true if window has interior shade (at surface b)&quot;</span>;

  <span style="color: blue">final </span><span style="color: blue">parameter </span>Boolean haveShade=
    haveExteriorShade[1]<span style="color: blue"> or </span>haveInteriorShade[1] <span style="color: #006400">
    &quot;Set to true if window system has a shade&quot;</span>;

  <a href="Buildings_HeatTransfer_Windows.html#Buildings.HeatTransfer.Windows.FixedShade"
>Buildings.HeatTransfer.Windows.FixedShade</a> sha[nCon](<span style="color: blue">final </span>conPar=conPar,
    <span style="color: blue">each </span>lat=lat,
    azi=conPar.azi) <span style="color: #006400">&quot;Shade due to overhang or side fins&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> uSha[nCon](min=0, max=1) <span style="color: blue">if </span>
       haveShade <span style="color: #006400">
    &quot;Control signal for the shading device, 0: unshaded; 1: fully shaded&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> QAbsSolSha_flow[nCon](
    <span style="color: blue">final </span>unit=&quot;W&quot;, quantity=&quot;Power&quot;) <span style="color: #006400">&quot;Solar radiation absorbed by shade&quot;</span>;

  <a href="Buildings_HeatTransfer_Windows.html#Buildings.HeatTransfer.Windows.ExteriorHeatTransfer"
>HeatTransfer.Windows.ExteriorHeatTransfer</a> conExtWin[nCon](
    <span style="color: blue">final </span>A=conPar[:].AWin,
    <span style="color: blue">final </span>fFra=conPar[:].fFra,
    <span style="color: blue">each </span><span style="color: blue">final </span>linearizeRadiation = linearizeRadiation,
    <span style="color: blue">final </span>vieFacSky={(Modelica.Constants.pi - conPar[i].til) ./ Modelica.Constants.pi <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:nCon},
    <span style="color: blue">final </span>absIRSha_air=conPar[:].glaSys.shade.absIR_a,
    <span style="color: blue">final </span>absIRSha_glass=conPar[:].glaSys.shade.absIR_b,
    <span style="color: blue">final </span>tauIRSha_air=conPar[:].glaSys.shade.tauIR_a,
    <span style="color: blue">final </span>tauIRSha_glass=conPar[:].glaSys.shade.tauIR_b,
    <span style="color: blue">final </span>haveExteriorShade=haveExteriorShade,
    <span style="color: blue">final </span>haveInteriorShade=haveInteriorShade) <span style="color: #006400">
    &quot;Exterior convection of the window&quot;</span>;

  <a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.SkyRadiationExchange"
>SkyRadiationExchange</a> skyRadExcWin(
    <span style="color: blue">final </span>n=nCon,
    <span style="color: blue">each </span><span style="color: blue">final </span>absIR=conPar[:].glaSys.absIRFra,
    vieFacSky={(Modelica.Constants.pi - conPar[i].til) ./ Modelica.Constants.pi <span style="color: blue">for </span>i<span style="color: blue"> in </span>
            1:nCon},
    <span style="color: blue">each </span><span style="color: blue">final </span>A=conPar[:].AWin .* conPar[:].fFra) <span style="color: #006400">
    &quot;Infrared radiative heat exchange between window frame and sky&quot;</span>;
  <a href="Buildings_HeatTransfer_Interfaces.html#Buildings.HeatTransfer.Interfaces.RadiosityOutflow"
>HeatTransfer.Interfaces.RadiosityOutflow</a> JOutUns[nCon] <span style="color: #006400">
    &quot;Outgoing radiosity that connects to unshaded part of glass at exterior side&quot;</span>;
  <a href="Buildings_HeatTransfer_Interfaces.html#Buildings.HeatTransfer.Interfaces.RadiosityInflow"
>HeatTransfer.Interfaces.RadiosityInflow</a> JInUns[nCon] <span style="color: #006400">
    &quot;Incoming radiosity that connects to unshaded part of glass at exterior side&quot;</span>;
  <a href="Buildings_HeatTransfer_Interfaces.html#Buildings.HeatTransfer.Interfaces.RadiosityOutflow"
>HeatTransfer.Interfaces.RadiosityOutflow</a> JOutSha[nCon] <span style="color: blue">if </span>
       haveShade <span style="color: #006400">
    &quot;Outgoing radiosity that connects to shaded part of glass at exterior side&quot;</span>;
  <a href="Buildings_HeatTransfer_Interfaces.html#Buildings.HeatTransfer.Interfaces.RadiosityInflow"
>HeatTransfer.Interfaces.RadiosityInflow</a> JInSha[nCon] <span style="color: blue">if </span>
       haveShade <span style="color: #006400">
    &quot;Incoming radiosity that connects to shaded part of glass at exterior side&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a</a> glaUns[nCon] <span style="color: #006400">
    &quot;Heat port at unshaded glass of exterior-facing surface&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a</a> glaSha[nCon] <span style="color: blue">if </span>
       haveShade <span style="color: #006400">&quot;Heat port at shaded glass of exterior-facing surface&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a</a> fra[nCon](T(<span style="color: blue">each </span>nominal=
          300, <span style="color: blue">each </span>start=283.15)) <span style="color: #006400">
    &quot;Heat port at frame of exterior-facing surface&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Add"
>Modelica.Blocks.Math.Add</a> HTotConExtWinFra[nCon](
     <span style="color: blue">final </span>k1=conPar[:].fFra .* conPar[:].glaSys.absSolFra .* conPar[:].AWin,
     <span style="color: blue">final </span>k2=conPar[:].fFra .* conPar[:].glaSys.absSolFra .* conPar[:].AWin) <span style="color: #006400">
    &quot;Total solar irradiation on window frame&quot;</span>;
  <a href="Buildings_HeatTransfer_Sources.html#Buildings.HeatTransfer.Sources.PrescribedHeatFlow"
>Buildings.HeatTransfer.Sources.PrescribedHeatFlow</a> solHeaGaiConWin[nCon] <span style="color: #006400">
    &quot;Total solar heat gain of the window frame&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> HDir[nCon](
     <span style="color: blue">each </span><span style="color: blue">final </span>quantity=&quot;RadiantEnergyFluenceRate&quot;,
     <span style="color: blue">each </span><span style="color: blue">final </span>unit=&quot;W/m2&quot;) <span style="color: #006400">&quot;Direct solar irradition on tilted surface&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> HDif[nCon](
     <span style="color: blue">each </span><span style="color: blue">final </span>quantity=&quot;RadiantEnergyFluenceRate&quot;,
     <span style="color: blue">each </span><span style="color: blue">final </span>unit=&quot;W/m2&quot;) <span style="color: #006400">&quot;Diffuse solar irradiation on tilted surface&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> inc[nCon](
    <span style="color: blue">each </span><span style="color: blue">final </span>quantity=&quot;Angle&quot;,
    <span style="color: blue">each </span><span style="color: blue">final </span>unit=&quot;rad&quot;,
    <span style="color: blue">each </span>displayUnit=&quot;deg&quot;) <span style="color: #006400">&quot;Incidence angle&quot;</span>;

<span style="color: blue">protected </span>
  <a href="Buildings_HeatTransfer_Sources.html#Buildings.HeatTransfer.Sources.PrescribedTemperature"
>Buildings.HeatTransfer.Sources.PrescribedTemperature</a> TAirConExtWin[
    nCon] <span style="color: #006400">&quot;Outside air temperature for window constructions&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Routing.html#Modelica.Blocks.Routing.Replicator"
>Modelica.Blocks.Routing.Replicator</a> repConExtWin(<span style="color: blue">final </span>nout=nCon) <span style="color: #006400">
    &quot;Signal replicator&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Routing.html#Modelica.Blocks.Routing.Replicator"
>Modelica.Blocks.Routing.Replicator</a> repConExtWinVWin(<span style="color: blue">final </span>nout=nCon) <span style="color: #006400">
    &quot;Signal replicator&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Routing.html#Modelica.Blocks.Routing.Replicator"
>Modelica.Blocks.Routing.Replicator</a> repConExtWinTSkyBla(<span style="color: blue">final </span>nout=nCon) <span style="color: #006400">
    &quot;Signal replicator&quot;</span>;

<span style="color: blue">equation </span>
  <span style="color: red">connect</span>(uSha, conExtWin.uSha);
  <span style="color: red">connect</span>(JInUns,conExtWin. JInUns);
  <span style="color: red">connect</span>(conExtWin.JOutUns,JOutUns);
  <span style="color: red">connect</span>(conExtWin.glaUns,glaUns);
  <span style="color: red">connect</span>(conExtWin.glaSha,glaSha);
  <span style="color: red">connect</span>(conExtWin.JOutSha,JOutSha);
  <span style="color: red">connect</span>(conExtWin.JInSha,JInSha);
  <span style="color: red">connect</span>(conExtWin.frame,fra);
  <span style="color: red">connect</span>(TAirConExtWin.port,conExtWin. air);
  <span style="color: red">connect</span>(TAirConExtWin.T,repConExtWin. y);
  <span style="color: red">connect</span>(repConExtWin.u, weaBus.TDryBul);
  <span style="color: red">connect</span>(repConExtWinVWin.y,conExtWin. vWin);
  <span style="color: red">connect</span>(repConExtWinVWin.u, weaBus.winSpe);
  <span style="color: red">connect</span>(HTotConExtWinFra.y, solHeaGaiConWin.Q_flow);
  <span style="color: red">connect</span>(solHeaGaiConWin.port, fra);
  <span style="color: red">connect</span>(HDifTil.H, HDif);
  <span style="color: red">connect</span>(HDirTil.inc, inc);
  <span style="color: red">connect</span>(HTotConExtWinFra.u2, HDifTil.H);
  <span style="color: red">connect</span>(skyRadExcWin.TOut, weaBus.TDryBul);
  <span style="color: red">connect</span>(skyRadExcWin.TBlaSky, weaBus.TBlaSky);
  <span style="color: red">connect</span>(skyRadExcWin.port, fra);
  <span style="color: red">connect</span>(repConExtWin.y, conExtWin.TOut);
  <span style="color: red">connect</span>(repConExtWinTSkyBla.y, conExtWin.TBlaSky);
  <span style="color: red">connect</span>(repConExtWinTSkyBla.u, weaBus.TBlaSky);
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:nCon<span style="color: blue"> loop</span>
    <span style="color: red">connect</span>(sha[i].weaBus, weaBus);
  <span style="color: blue">end for</span>;
  <span style="color: red">connect</span>(sha.HDirTil, HTotConExtWinFra.u1);
  <span style="color: red">connect</span>(sha.HDirTil, HDir);
  <span style="color: red">connect</span>(sha.HDirTilUns, HDirTil.H);
  <span style="color: red">connect</span>(HDirTil.inc, sha.incAng);
  <span style="color: red">connect</span>(QAbsSolSha_flow, conExtWin.QSolAbs_flow);
<span style="color: blue">end </span>ExteriorBoundaryConditionsWithWindow;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE HeatGain<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Rooms.BaseClasses.HeatGainI.png" alt="Buildings.Rooms.BaseClasses.HeatGain" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Rooms.BaseClasses.HeatGain"></a><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses"
>Buildings.Rooms.BaseClasses</a>.HeatGain</h2>
<p>
<b>Model to convert internal heat gain signals</b>
<br>
<br><img src="Buildings.Rooms.BaseClasses.HeatGainD.png" alt="Buildings.Rooms.BaseClasses.HeatGain">
</p>
<h3>Information</h3>

This model computes the radiant, convective and latent heat flow.
Input into this model are these three components in units of [W/m2].
The inputs need to be positive quantities if heat or moisture is added
to the room.
The outputs are 
<ul>
<li>
the radiant heat flow in Watts,
</li>
<li>
the convective heat flow in Watts, and
</li>
<li>
the water vapor released into the air.
</li>
</ul>
If the medium model does not contain water vapor, then
the water vapor released into the air is zero, i.e., 
the mass flow rate at the fluid port is equal to zero.

<p>Extends from <a href="Buildings_BaseClasses.html#Buildings.BaseClasses.BaseIcon"
>Buildings.BaseClasses.BaseIcon</a> (Base icon).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Modelica.Media.Interfaces.Pa...</td><td>Medium in the component</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</a></td><td>AFlo</td><td>&nbsp;</td><td>Floor area [m2]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</a></td><td>TWat</td><td>273.15 + 34</td><td>Temperature at which water vapor is released [K]</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Medium in the component</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>QCon_flow</td><td>Convective heat gain</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>qGai_flow[3]</td><td>Radiant, convective and latent heat input into room (positive if heat gain)</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>QRad_flow</td><td>Radiative heat gain</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>QLat_flow</td><td>Latent heat gain</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">model</span> HeatGain <span style="color: #006400">&quot;Model to convert internal heat gain signals&quot;</span>
  <span style="color: blue">extends </span><a href="Buildings_BaseClasses.html#Buildings.BaseClasses.BaseIcon"
>Buildings.BaseClasses.BaseIcon</a>;

  <span style="color: blue">replaceable </span><span style="color: blue">package</span> Medium =
     <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>Modelica.Media.Interfaces.PartialMedium</a> <span style="color: #006400">&quot;Medium in the component&quot;</span>;

  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> AFlo <span style="color: #006400">&quot;Floor area&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> TWat=273.15+34 <span style="color: #006400">
    &quot;Temperature at which water vapor is released&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a</a> QCon_flow <span style="color: #006400">
    &quot;Convective heat gain&quot;</span>;

<span style="color: blue">public </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> qGai_flow[3] <span style="color: #006400">
    &quot;Radiant, convective and latent heat input into room (positive if heat gain)&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> QRad_flow <span style="color: #006400">&quot;Radiative heat gain&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>Modelica.Fluid.Interfaces.FluidPort_b</a> QLat_flow(<span style="color: blue">redeclare </span><span style="color: blue">final </span><span style="color: blue">package</span>
      Medium =
        Medium) <span style="color: #006400">&quot;Latent heat gain&quot;</span>;
<span style="color: blue">protected </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</a> mWat_flow <span style="color: #006400">
    &quot;Water vapor flow rate released by latent gain&quot;</span>;

  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnergy"
>Modelica.SIunits.SpecificEnergy</a> h_fg =<span style="color: red"> Medium.enthalpyOfCondensingGas</span>(TWat) <span style="color: #006400">
    &quot;Latent heat of water vapor&quot;</span>;
 <span style="color: #006400">// constant Medium.MassFraction Xi[Medium.nXi] = {1}</span>
 <span style="color: #006400">//   &quot;Species concentration (water vapor only)&quot;;</span>

<span style="color: blue">protected </span>
  <span style="color: blue">parameter </span>Real s[Medium.nX](fixed=false) <span style="color: #006400">
    &quot;Vector with zero everywhere except where water vapor is&quot;</span>;
<span style="color: blue">initial </span><span style="color: blue">algorithm </span>
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:Medium.nX<span style="color: blue"> loop</span>
    <span style="color: blue">if </span>(<span style="color: red"> Modelica.Utilities.Strings.isEqual</span>(string1=Medium.substanceNames[i],
                                            string2=&quot;water&quot;,
                                            caseSensitive=false))<span style="color: blue"> then</span>
      s[i] :=1;
    <span style="color: blue">else</span>
      s[i] :=0;
    <span style="color: blue">end if</span>;
   <span style="color: blue">end for</span>;
  <span style="color: red"> assert</span>(Medium.nX == 1<span style="color: blue"> or </span><span style="color: red">abs</span>(1-<span style="color: red">sum</span>(s)) &lt; 1E-4, &quot;Substance &#39;water&#39; is not present in medium &#39;&quot;
                  + Medium.mediumName + &quot;&#39;.\n&quot;
                  + &quot;Change medium model to one that has &#39;water&#39; as a substance.&quot;);
<span style="color: blue">equation </span>
  QRad_flow = qGai_flow[1]*AFlo;
  QCon_flow.Q_flow = -qGai_flow[2]*AFlo;

  <span style="color: #006400">// Interface to fluid port</span>
  <span style="color: #006400">// If a medium does not contain water vapor, then h_fg is equal to zero.</span>
  <span style="color: blue">if </span>Medium.nXi == 0<span style="color: blue"> or </span>(h_fg == 0)<span style="color: blue"> then</span>
    mWat_flow = 0;
  <span style="color: blue">else</span>
    mWat_flow = qGai_flow[3]*AFlo/h_fg;
  <span style="color: blue">end if</span>;

  QLat_flow.C_outflow  =<span style="color: red"> fill</span>(0, Medium.nC);
  QLat_flow.h_outflow  = h_fg;
  QLat_flow.Xi_outflow = s[1:Medium.nXi];
  QLat_flow.m_flow     = <span style="color: blue">if </span>(h_fg &gt; 0)<span style="color: blue"> then </span>
                           -qGai_flow[3]*AFlo/h_fg<span style="color: blue"> else </span>
                            0;

<span style="color: blue">end </span>HeatGain;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE InfraredRadiationExchange<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Rooms.BaseClass39076b6d16b239c0hangeI.png" alt="Buildings.Rooms.BaseClasses.InfraredRadiationExchange" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Rooms.BaseClasses.InfraredRadiationExchange"></a><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses"
>Buildings.Rooms.BaseClasses</a>.InfraredRadiationExchange</h2>
<p>
<b>Infrared radiation heat exchange between the room facing surfaces</b>
<br>
<br><img src="Buildings.Rooms.BaseClass39076b6d16b239c0hangeD.png" alt="Buildings.Rooms.BaseClasses.InfraredRadiationExchange">
</p>
<h3>Information</h3>

<p>
This model computes the infrared radiative heat transfer between the interior
surfaces of a room. Each opaque surface emits radiation according to
</p>
<p align="center" style="font-style:italic;">
  E<sup>i</sup> = &sigma; &nbsp; A<sup>i</sup> &nbsp; &epsilon;<sup>i</sup> &nbsp; 
(T<sup>i</sup>)<sup>4</sup>,
</p>
<p>
where
<i>&sigma;</i>
is the Stefan-Boltzmann constant,
<i>A<sup>i</sup> </i>
is the surface area,
<i>&epsilon;<sup>i</sup> </i>
is the absorptivity in the infrared spectrum, and
<i>T<sup>i</sup></i>
is the surface temperature.
If the parameter <code>linearizeRadidation</code> is set to <code>true</code>,
then the term <i>(T<sup>i</sup>)<sup>4</sup></i> is replaced with
<i>T<sub>0</sub><sup>3</sup> T<sup>i</sup></i>,
where <i>T<sub>0</sub> = 20&deg;C</i> is a parameter.
</p>
<p>
The incoming radiation at surface <i>i</i> is
</p>
<p align="center" style="font-style:italic;">
  G<sup>i</sup> = -&sum;<sub>j</sub> &nbsp; F<sup>j,i</sup> &nbsp; J<sup>j</sup>
</p>
<p>
where 
<i>F<sup>j,i</sup></i> 
is the view factor from surface
<i>j</i> to surface <i>i</i>, 
<i>J<sup>j</sup></i> 
is the radiosity leaving surface <i>j</i>
and the sum is over all surfaces.
For opaque surfaces, it follows from the first law
that the radiosity
<i>J<sup>i</sup></i> 
is
</p>
<p align="center" style="font-style:italic;">
 J<sup>i</sup> = -E<sup>i</sup>  - (1-&epsilon;<sup>i</sup>) &nbsp; G<sup>i</sup>.
</p>
<p>
For windows, the outgoing radiosity is an input into this model
because the window model computes this quantity directly.
</p>
<p>
For each surface <i>i</i>, the heat balance is
</p>
<p align="center" style="font-style:italic;">
  0 = Q<sup>i</sup> + J<sup>i</sup> + G<sup>i</sup>.
</p>
<p>
For opaque surfaces, the heat flow rate 
<i>Q<sup>i</sup></i> 
is set to be equal to the heat flow rate at the heat port.
For the glass of the windows, the radiosity outflow at the connector is
set to the radiosity
<i>G<sup>i</sup></i>
that is leaving the surface.
</p>
<p>
The view factor from surface <i>i</i> to <i>j</i> is approximated as
<p align="center" style="font-style:italic;">
  F<sup>i,j</sup> = A<sup>j</sup> &frasl; &sum;<sub>k </sub> A<sup>k</sup>.
</p>

<p>Extends from <a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.PartialSurfaceInterfaceRadiative"
>Buildings.Rooms.BaseClasses.PartialSurfaceInterfaceRadiative</a> (Partial model that is used for infrared radiation balance).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstruction"
>ParameterConstruction</a></td><td>datConExt[NConExt]</td><td>&nbsp;</td><td>Data for exterior construction</td></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstructionWithWindow"
>ParameterConstructionWithWindow</a></td><td>datConExtWin[NConExtWin]</td><td>&nbsp;</td><td>Data for exterior construction with window</td></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstruction"
>ParameterConstruction</a></td><td>datConPar[NConPar]</td><td>&nbsp;</td><td>Data for partition construction</td></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstruction"
>ParameterConstruction</a></td><td>datConBou[NConBou]</td><td>&nbsp;</td><td>Data for construction boundary</td></tr>
<tr><td><a href="Buildings_HeatTransfer_Data_OpaqueSurfaces.html#Buildings.HeatTransfer.Data.OpaqueSurfaces.Generic"
>Generic</a></td><td>surBou[NSurBou]</td><td>&nbsp;</td><td>Record for data of surfaces whose heat conduction is modeled outside of this room</td></tr>
<tr><td>Boolean</td><td>linearizeRadiation</td><td>&nbsp;</td><td>Set to true to linearize emissive power</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Exterior constructions</td></tr>
<tr><td>Integer</td><td>nConExt</td><td>&nbsp;</td><td>Number of exterior constructions</td></tr>
<tr><td>Integer</td><td>nConExtWin</td><td>&nbsp;</td><td>Number of window constructions</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Partition constructions</td></tr>
<tr><td>Integer</td><td>nConPar</td><td>&nbsp;</td><td>Number of partition constructions</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Boundary constructions</td></tr>
<tr><td>Integer</td><td>nConBou</td><td>&nbsp;</td><td>Number of constructions that have their outside surface exposed to the boundary of this room</td></tr>
<tr><td>Integer</td><td>nSurBou</td><td>&nbsp;</td><td>Number of surface heat transfer models that connect to constructions that are modeled outside of this room</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr><td>Boolean</td><td>homotopyInitialization</td><td>true</td><td>= true, use homotopy method</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conExt[NConExt]</td><td>Heat port that connects to room-side surface of exterior constructions</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conExtWin[NConExtWin]</td><td>Heat port that connects to room-side surface of exterior constructions that contain a window</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conExtWinFra[NConExtWin]</td><td>Heat port that connects to room-side surface of window frame</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conPar_a[NConPar]</td><td>Heat port that connects to room-side surface a of partition constructions</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conPar_b[NConPar]</td><td>Heat port that connects to room-side surface b of partition constructions</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conBou[NConBou]</td><td>Heat port that connects to room-side surface of constructions that expose their other surface to the outside</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conSurBou[NSurBou]</td><td>Heat port to surfaces of models that compute the heat conduction outside of this room</td></tr>
<tr><td>input <a href="Buildings_HeatTransfer_Interfaces.html#Buildings.HeatTransfer.Interfaces.RadiosityInflow"
>RadiosityInflow</a></td><td>JInConExtWin[NConExtWin]</td><td>Incoming radiosity that connects to non-frame part of the window [W]</td></tr>
<tr><td>output <a href="Buildings_HeatTransfer_Interfaces.html#Buildings.HeatTransfer.Interfaces.RadiosityOutflow"
>RadiosityOutflow</a></td><td>JOutConExtWin[NConExtWin]</td><td>Outgoing radiosity that connects to non-frame part of the window [W]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">model</span> InfraredRadiationExchange <span style="color: #006400">
  &quot;Infrared radiation heat exchange between the room facing surfaces&quot;</span>
  <span style="color: blue">extends </span><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.PartialSurfaceInterfaceRadiative"
>Buildings.Rooms.BaseClasses.PartialSurfaceInterfaceRadiative</a>;
  <span style="color: blue">parameter </span>Boolean linearizeRadiation <span style="color: #006400">
    &quot;Set to true to linearize emissive power&quot;</span>;
  <span style="color: blue">parameter </span>Boolean homotopyInitialization=true <span style="color: #006400">&quot;= true, use homotopy method&quot;</span>;
  <a href="Buildings_HeatTransfer_Interfaces.html#Buildings.HeatTransfer.Interfaces.RadiosityInflow"
>HeatTransfer.Interfaces.RadiosityInflow</a> JInConExtWin[NConExtWin] <span style="color: blue">if </span>
      haveConExtWin <span style="color: #006400">
    &quot;Incoming radiosity that connects to non-frame part of the window&quot;</span>;
  <a href="Buildings_HeatTransfer_Interfaces.html#Buildings.HeatTransfer.Interfaces.RadiosityOutflow"
>HeatTransfer.Interfaces.RadiosityOutflow</a> JOutConExtWin[NConExtWin] <span style="color: #006400">
    &quot;Outgoing radiosity that connects to non-frame part of the window&quot;</span>;
<span style="color: blue">protected </span>
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Integer NOpa=NConExt + 2*NConExtWin + 2*NConPar + NConBou +
      NSurBou <span style="color: #006400">&quot;Number of opaque surfaces, including the window frame&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Integer nOpa=nConExt + 2*nConExtWin + 2*nConPar + nConBou +
      nSurBou <span style="color: #006400">&quot;Number of opaque surfaces, including the window frame&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Integer NWin=NConExtWin <span style="color: #006400">&quot;Number of window surfaces&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Integer nWin=nConExtWin <span style="color: #006400">&quot;Number of window surfaces&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Integer NTot=NOpa + NWin <span style="color: #006400">&quot;Total number of surfaces&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Integer nTot=nOpa + nWin <span style="color: #006400">&quot;Total number of surfaces&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Real epsOpa[nOpa](
    min=0,
    max=1,
    fixed=false) <span style="color: #006400">&quot;Absorptivity of opaque surfaces&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Real rhoOpa[nOpa](
    min=0,
    max=1,
    fixed=false) <span style="color: #006400">&quot;Reflectivity of opaque surfaces&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> AOpa[nOpa](fixed=false) <span style="color: #006400">
    &quot;Surface area of opaque surfaces&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> A[nTot](fixed=false) <span style="color: #006400">&quot;Surface areas&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Real kOpa[nOpa](unit=&quot;W/K4&quot;, fixed=false) <span style="color: #006400">
    &quot;Product sigma*epsilon*A for opaque surfaces&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Real F[nTot, nTot](
    min=0,
    max=1,
    fixed=false) <span style="color: #006400">&quot;View factor from surface i to j&quot;</span>;

   <a href="Buildings_HeatTransfer_Interfaces.html#Buildings.HeatTransfer.Interfaces.RadiosityInflow"
>Buildings.HeatTransfer.Interfaces.RadiosityInflow</a> JInConExtWin_internal[NConExtWin] <span style="color: #006400">
    &quot;Incoming radiosity that connects to non-frame part of the window&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate"
>Modelica.SIunits.HeatFlowRate</a> J[nTot](
    max=0,
    start=A .* 0.8*Modelica.Constants.sigma*293.15^4,
    <span style="color: blue">each </span>nominal=10*0.8*Modelica.Constants.sigma*293.15^4) <span style="color: #006400">
    &quot;Radiosity leaving the surface&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate"
>Modelica.SIunits.HeatFlowRate</a> G[nTot](
    min=0,
    start=A .* 0.8*Modelica.Constants.sigma*293.15^4,
    <span style="color: blue">each </span>nominal=10*0.8*Modelica.Constants.sigma*293.15^4) <span style="color: #006400">
    &quot;Radiosity entering the surface&quot;</span>;
  <span style="color: blue">constant </span>Real T30(unit=&quot;K3&quot;) = 293.15^3 <span style="color: #006400">&quot;Nominal temperature&quot;</span>;
  <span style="color: blue">constant </span>Real T40(unit=&quot;K4&quot;) = 293.15^4 <span style="color: #006400">&quot;Nominal temperature&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> TOpa[nOpa](<span style="color: blue">each </span>start=293.15, <span style="color: blue">each </span>nominal=
        293.15) <span style="color: #006400">&quot;Temperature of opaque surfaces&quot;</span>;
  Real T4Opa[nOpa](
    <span style="color: blue">each </span>unit=&quot;K4&quot;,
    <span style="color: blue">each </span>start=T40,
    <span style="color: blue">each </span>nominal=293.15^4) <span style="color: #006400">&quot;Forth power of temperature of opaque surfaces&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate"
>Modelica.SIunits.HeatFlowRate</a> Q_flow[nTot] <span style="color: #006400">&quot;Heat flow rate at surfaces&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> T0=293.15 <span style="color: #006400">
    &quot;Temperature used to linearize radiative heat transfer&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Real T03(
    min=0,
    unit=&quot;K3&quot;) = T0^3 <span style="color: #006400">&quot;3rd power of temperature T0&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate"
>Modelica.SIunits.HeatFlowRate</a> sumEBal <span style="color: #006400">&quot;Sum of energy balance, should be zero&quot;</span>;
<span style="color: blue">initial </span><span style="color: blue">equation </span>
  <span style="color: #006400">// The next loops build the array epsOpa, AOpa and kOpa that simplify</span>
  <span style="color: #006400">// the model equations.</span>
  <span style="color: #006400">// These arrays store the values of the constructios in the following order</span>
  <span style="color: #006400">// [x[1:NConExt] x[1:NConPar] x[1: NConPar] x[1: NConBou] x[1: NSurBou] x[1: NConExtWin] x[1: NConExtWin]]</span>
  <span style="color: #006400">// where x is epsOpa, AOpa or kOpa.</span>
  <span style="color: #006400">// The last two entries are for the opaque wall that contains a window, and for the window frame.</span>
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:nConExt<span style="color: blue"> loop</span>
    epsOpa[i] = epsConExt[i];
    AOpa[i] = AConExt[i];
    kOpa[i] = Modelica.Constants.sigma*epsConExt[i]*AOpa[i];
  <span style="color: blue">end for</span>;
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:nConPar<span style="color: blue"> loop</span>
    epsOpa[i + nConExt] = epsConPar_a[i];
    AOpa[i + nConExt] = AConPar[i];
    kOpa[i + nConExt] = Modelica.Constants.sigma*epsConPar_a[i]*AOpa[i +
      nConExt];
    epsOpa[i + nConExt + nConPar] = epsConPar_b[i];
    AOpa[i + nConExt + nConPar] = AConPar[i];
    kOpa[i + nConExt + nConPar] = Modelica.Constants.sigma*epsConPar_b[i]*AOpa[
      i + nConExt + nConPar];
  <span style="color: blue">end for</span>;
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:nConBou<span style="color: blue"> loop</span>
    epsOpa[i + nConExt + 2*nConPar] = epsConBou[i];
    AOpa[i + nConExt + 2*nConPar] = AConBou[i];
    kOpa[i + nConExt + 2*nConPar] = Modelica.Constants.sigma*epsConBou[i]*AOpa[
      i + nConExt + 2*nConPar];
  <span style="color: blue">end for</span>;
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:nSurBou<span style="color: blue"> loop</span>
    epsOpa[i + nConExt + 2*nConPar + nConBou] = epsSurBou[i];
    AOpa[i + nConExt + 2*nConPar + nConBou] = ASurBou[i];
    kOpa[i + nConExt + 2*nConPar + nConBou] = Modelica.Constants.sigma*
      epsSurBou[i]*AOpa[i + nConExt + 2*nConPar + nConBou];
  <span style="color: blue">end for</span>;
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:nConExtWin<span style="color: blue"> loop</span>
    <span style="color: #006400">// Opaque part of construction that has a window embedded</span>
    epsOpa[i + nConExt + 2*nConPar + nConBou + nSurBou] = epsConExtWinOpa[i];
    AOpa[i + nConExt + 2*nConPar + nConBou + nSurBou] = AConExtWinOpa[i];
    kOpa[i + nConExt + 2*nConPar + nConBou + nSurBou] = Modelica.Constants.sigma
      *epsConExtWinOpa[i]*AOpa[i + nConExt + 2*nConPar + nConBou + nSurBou];
    <span style="color: #006400">// Window frame</span>
    epsOpa[i + nConExt + 2*nConPar + nConBou + nSurBou + nConExtWin] =
      epsConExtWinFra[i];
    AOpa[i + nConExt + 2*nConPar + nConBou + nSurBou + nConExtWin] =
      AConExtWinFra[i];
    kOpa[i + nConExt + 2*nConPar + nConBou + nSurBou + nConExtWin] = Modelica.Constants.sigma
      *epsConExtWinFra[i]*AOpa[i + nConExt + 2*nConPar + nConBou + nSurBou +
      nConExtWin];
  <span style="color: blue">end for</span>;
  <span style="color: #006400">// Vector with all surface areas.</span>
  <span style="color: #006400">// The next loops build the array A that simplifies</span>
  <span style="color: #006400">// the model equations.</span>
  <span style="color: #006400">// These array stores the values of the constructios in the following order</span>
  <span style="color: #006400">// [AOpa[1:nConExt] AOpa[1:nConPar] AOpa[1: nConPar] AOpa[1: nConBou] AOpa[1: nSurBou]</span>
  <span style="color: #006400">//  AOpa[1: nConExtWin] AOpa[1: nConExtWin] AGla[1: nConExtWin]]</span>
  <span style="color: #006400">// since nWin=nConExtWin.</span>
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:nOpa<span style="color: blue"> loop</span>
    A[i] = AOpa[i];
  <span style="color: blue">end for</span>;
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:nWin<span style="color: blue"> loop</span>
    A[i + nOpa] = AConExtWinGla[i];
  <span style="color: blue">end for</span>;
  <span style="color: #006400">// Reflectivity for opaque surfaces</span>
  rhoOpa = 1 .- epsOpa;
  <span style="color: #006400">// View factors from surface i to surface j</span>
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:nTot<span style="color: blue"> loop</span>
    <span style="color: blue">for </span>j<span style="color: blue"> in </span>1:nTot<span style="color: blue"> loop</span>
      F[i, j] = A[j]/<span style="color: red">sum</span>((A[k]) <span style="color: blue">for </span>k<span style="color: blue"> in </span>1:nTot);
    <span style="color: blue">end for</span>;
  <span style="color: blue">end for</span>;
  <span style="color: #006400">// Test whether the view factors add up to one, or the sum is zero in case there</span>
  <span style="color: #006400">// is only one construction</span>
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:nTot<span style="color: blue"> loop</span>
    <span style="color: red">assert</span>((<span style="color: red">abs</span>(1 -<span style="color: red"> sum</span>(F[i, j] <span style="color: blue">for </span>j<span style="color: blue"> in </span>1:nTot))) &lt; 1E-10,
      &quot;Program error: Sum 1 of view factors is &quot; +<span style="color: red"> String</span>(<span style="color: red">sum</span>(F[i, j] <span style="color: blue">for </span>j<span style="color: blue"> in </span>
      1:nTot)));
  <span style="color: blue">end for</span>;
  <span style="color: #006400">////////////////////////////////////////////////////////////////////</span>
<span style="color: blue">equation </span>
  <span style="color: #006400">// Conditional connector</span>
  <span style="color: red">connect</span>(JInConExtWin, JInConExtWin_internal);
  <span style="color: blue">if </span><span style="color: blue">not </span>haveConExtWin<span style="color: blue"> then</span>
    JInConExtWin_internal =<span style="color: red"> fill</span>(0, NConExtWin);
  <span style="color: blue">end if</span>;
  <span style="color: #006400">// Assign temperature of opaque surfaces</span>
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:nConExt<span style="color: blue"> loop</span>
    TOpa[i] = conExt[i].T;
  <span style="color: blue">end for</span>;
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:nConPar<span style="color: blue"> loop</span>
    TOpa[i + nConExt] = conPar_a[i].T;
    TOpa[i + nConExt + nConPar] = conPar_b[i].T;
  <span style="color: blue">end for</span>;
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:nConBou<span style="color: blue"> loop</span>
    TOpa[i + nConExt + 2*nConPar] = conBou[i].T;
  <span style="color: blue">end for</span>;
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:nSurBou<span style="color: blue"> loop</span>
    TOpa[i + nConExt + 2*nConPar + nConBou] = conSurBou[i].T;
  <span style="color: blue">end for</span>;
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:nConExtWin<span style="color: blue"> loop</span>
    TOpa[i + nConExt + 2*nConPar + nConBou + nSurBou] = conExtWin[i].T;
    TOpa[i + nConExt + 2*nConPar + nConBou + nConExtWin + nSurBou] =
      conExtWinFra[i].T;
  <span style="color: blue">end for</span>;
  <span style="color: #006400">// Incoming radiosity at each surface</span>
  <span style="color: #006400">// is equal to the negative of the outgoing radiosity of</span>
  <span style="color: #006400">// all other surfaces times the view factor</span>
  G = -<span style="color: red">transpose</span>(F)*J;
  <span style="color: #006400">// Outgoing radiosity</span>
  <span style="color: #006400">// Opaque surfaces.</span>
  <span style="color: #006400">// If kOpa[j]=absIR[j]*A[j] &lt; 1E-28, then A &lt; 1E-20 and the surface is</span>
  <span style="color: #006400">// from a dummy construction. In this situation, we set T40=293.15^4 to</span>
  <span style="color: #006400">// avoid a singularity.</span>
  <span style="color: blue">for </span>j<span style="color: blue"> in </span>1:nOpa<span style="color: blue"> loop</span>
    <span style="color: #006400">//   T4Opa[j] = if (kOpa[j] &gt; 1E-28) then (Q_flow[j]-epsOpa[j] * G[j])/kOpa[j] else T40;</span>
    T4Opa[j] = (-J[j] - rhoOpa[j]*G[j])/kOpa[j];
  <span style="color: blue">end for</span>;
  <span style="color: #006400">// 4th power of temperature</span>
  <span style="color: blue">if </span>linearizeRadiation<span style="color: blue"> then</span>
    TOpa = (T4Opa .+ 3*T40)/(4*T30);
    <span style="color: #006400">// Based on T4 = 4*T30*T-3*T40</span>
  <span style="color: blue">else</span>
    <span style="color: blue">if </span>homotopyInitialization<span style="color: blue"> then</span>
      TOpa =<span style="color: red"> homotopy</span>(actual=<span style="color: red">Buildings.Utilities.Math.Functions.powerLinearized</span>(
        x=T4Opa,
        x0=243.15^4,
        n=0.25), simplified=(T4Opa .+ 3*T40)/(4*T30));
    <span style="color: blue">else</span>
      TOpa =<span style="color: red"> Buildings.Utilities.Math.Functions.powerLinearized</span>(
        x=T4Opa,
        x0=243.15^4,
        n=0.25);
    <span style="color: blue">end if</span>;
  <span style="color: blue">end if</span>;
  <span style="color: #006400">// Assign radiosity that comes from window</span>
  <span style="color: #006400">// and that leaves window.</span>
  <span style="color: #006400">// J &lt; 0 because it leaves the surface</span>
  <span style="color: #006400">// G &gt; 0 because it strikes the surface</span>
  <span style="color: blue">for </span>j<span style="color: blue"> in </span>1:nWin<span style="color: blue"> loop</span>
    J[j + nOpa] = -JInConExtWin_internal[j];
    G[j + nOpa] = +JOutConExtWin[j];
  <span style="color: blue">end for</span>;
  <span style="color: #006400">// Net heat exchange</span>
  Q_flow = -J - G;
  <span style="color: #006400">// Assign heat exchange to connectors</span>
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:nConExt<span style="color: blue"> loop</span>
    Q_flow[i] = conExt[i].Q_flow;
  <span style="color: blue">end for</span>;
  <span style="color: blue">if </span>nConExt == 0<span style="color: blue"> then</span>
    conExt[1].T = T0;
  <span style="color: blue">end if</span>;
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:nConPar<span style="color: blue"> loop</span>
    Q_flow[i + nConExt] = conPar_a[i].Q_flow;
    Q_flow[i + nConExt + nConPar] = conPar_b[i].Q_flow;
  <span style="color: blue">end for</span>;
  <span style="color: blue">if </span>nConPar == 0<span style="color: blue"> then</span>
    conPar_a[1].T = T0;
    conPar_b[1].T = T0;
  <span style="color: blue">end if</span>;
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:nConBou<span style="color: blue"> loop</span>
    Q_flow[i + nConExt + 2*nConPar] = conBou[i].Q_flow;
  <span style="color: blue">end for</span>;
  <span style="color: blue">if </span>nConBou == 0<span style="color: blue"> then</span>
    conBou[1].T = T0;
  <span style="color: blue">end if</span>;
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:nSurBou<span style="color: blue"> loop</span>
    Q_flow[i + nConExt + 2*nConPar + nConBou] = conSurBou[i].Q_flow;
  <span style="color: blue">end for</span>;
  <span style="color: blue">if </span>nSurBou == 0<span style="color: blue"> then</span>
    conSurBou[1].T = T0;
  <span style="color: blue">end if</span>;
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:nConExtWin<span style="color: blue"> loop</span>
    Q_flow[i + nConExt + 2*nConPar + nConBou + nSurBou] = conExtWin[i].Q_flow;
    Q_flow[i + nConExt + 2*nConPar + nConBou + nSurBou + nConExtWin] =
      conExtWinFra[i].Q_flow;
  <span style="color: blue">end for</span>;
  <span style="color: blue">if </span>nConExtWin == 0<span style="color: blue"> then</span>
    conExtWin[1].T = T0;
    conExtWinFra[1].T = T0;
    JOutConExtWin[1] = 0;
  <span style="color: blue">end if</span>;
  <span style="color: #006400">// Sum of energy balance</span>
  <span style="color: #006400">// Remove sumEBal and assert statement for final release</span>
  sumEBal =<span style="color: red"> sum</span>(conExt.Q_flow) +<span style="color: red"> sum</span>(conPar_a.Q_flow) +<span style="color: red"> sum</span>(conPar_b.Q_flow) +
    <span style="color: red">sum</span>(conBou.Q_flow) +<span style="color: red"> sum</span>(conSurBou.Q_flow) +<span style="color: red"> sum</span>(conExtWin.Q_flow) +<span style="color: red"> sum</span>(
    conExtWinFra.Q_flow) + (<span style="color: red">sum</span>(JInConExtWin_internal) -<span style="color: red"> sum</span>(JOutConExtWin));
  <span style="color: red">assert</span>(<span style="color: red">abs</span>(sumEBal) &lt; 1E-1,
    &quot;Program error: Energy is not conserved in InfraredRadiationExchange.
               Sum of all energy is &quot; +<span style="color: red"> String</span>(sumEBal));
<span style="color: blue">end </span>InfraredRadiationExchange;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE InfraredRadiationGainDistribution<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Rooms.BaseClassef6fd50d43dced46utionI.png" alt="Buildings.Rooms.BaseClasses.InfraredRadiationGainDistribution" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Rooms.BaseClasses.InfraredRadiationGainDistribution"></a><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses"
>Buildings.Rooms.BaseClasses</a>.InfraredRadiationGainDistribution</h2>
<p>
<b>Infrared radiative heat gain distribution between the room facing surfaces</b>
<br>
<br><img src="Buildings.Rooms.BaseClassef6fd50d43dced46utionD.png" alt="Buildings.Rooms.BaseClasses.InfraredRadiationGainDistribution">
</p>
<h3>Information</h3>

This model computes the distribution of the infrared radiant heat gain
to the room surfaces. 
The infrared radiant heat gain <i>Q</i> is an input to this model.
It is distributed to the individual surfaces according to
<p align="center" style="font-style:italic;">
  Q<sup>i</sup> = Q &nbsp; A<sup>i</sup> &nbsp; &epsilon;<sup>i</sup> &frasl; 
 &sum;<sub>k</sub> A<sup>k</sup> &nbsp; &epsilon;<sup>k</sup>.
</p>
For opaque surfaces, the heat flow rate 
<i>Q<sup>i</sup></i> 
is set to be equal to the heat flow rate at the heat port.
For the glass of the windows, the heat flow rate 
<i>Q<sup>i</sup></i> is set to the radiosity
<i>J<sup>i</sup></i>
that will strike the glass or the window shade.

<p>Extends from <a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.PartialSurfaceInterfaceRadiative"
>Buildings.Rooms.BaseClasses.PartialSurfaceInterfaceRadiative</a> (Partial model that is used for infrared radiation balance).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstruction"
>ParameterConstruction</a></td><td>datConExt[NConExt]</td><td>&nbsp;</td><td>Data for exterior construction</td></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstructionWithWindow"
>ParameterConstructionWithWindow</a></td><td>datConExtWin[NConExtWin]</td><td>&nbsp;</td><td>Data for exterior construction with window</td></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstruction"
>ParameterConstruction</a></td><td>datConPar[NConPar]</td><td>&nbsp;</td><td>Data for partition construction</td></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstruction"
>ParameterConstruction</a></td><td>datConBou[NConBou]</td><td>&nbsp;</td><td>Data for construction boundary</td></tr>
<tr><td><a href="Buildings_HeatTransfer_Data_OpaqueSurfaces.html#Buildings.HeatTransfer.Data.OpaqueSurfaces.Generic"
>Generic</a></td><td>surBou[NSurBou]</td><td>&nbsp;</td><td>Record for data of surfaces whose heat conduction is modeled outside of this room</td></tr>
<tr><td>Boolean</td><td>haveShade</td><td>&nbsp;</td><td>Set to true if a shade is present</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Exterior constructions</td></tr>
<tr><td>Integer</td><td>nConExt</td><td>&nbsp;</td><td>Number of exterior constructions</td></tr>
<tr><td>Integer</td><td>nConExtWin</td><td>&nbsp;</td><td>Number of window constructions</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Partition constructions</td></tr>
<tr><td>Integer</td><td>nConPar</td><td>&nbsp;</td><td>Number of partition constructions</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Boundary constructions</td></tr>
<tr><td>Integer</td><td>nConBou</td><td>&nbsp;</td><td>Number of constructions that have their outside surface exposed to the boundary of this room</td></tr>
<tr><td>Integer</td><td>nSurBou</td><td>&nbsp;</td><td>Number of surface heat transfer models that connect to constructions that are modeled outside of this room</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conExt[NConExt]</td><td>Heat port that connects to room-side surface of exterior constructions</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conExtWin[NConExtWin]</td><td>Heat port that connects to room-side surface of exterior constructions that contain a window</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conExtWinFra[NConExtWin]</td><td>Heat port that connects to room-side surface of window frame</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conPar_a[NConPar]</td><td>Heat port that connects to room-side surface a of partition constructions</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conPar_b[NConPar]</td><td>Heat port that connects to room-side surface b of partition constructions</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conBou[NConBou]</td><td>Heat port that connects to room-side surface of constructions that expose their other surface to the outside</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conSurBou[NSurBou]</td><td>Heat port to surfaces of models that compute the heat conduction outside of this room</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>uSha[NConExtWin]</td><td>Control signal for the shading device (removed if no shade is present)</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>Q_flow</td><td>Radiative heat input into room (positive if heat gain)</td></tr>
<tr><td>output <a href="Buildings_HeatTransfer_Interfaces.html#Buildings.HeatTransfer.Interfaces.RadiosityOutflow"
>RadiosityOutflow</a></td><td>JOutConExtWin[NConExtWin]</td><td>Outgoing radiosity that connects to shaded and unshaded part of glass [W]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">model</span> InfraredRadiationGainDistribution <span style="color: #006400">
  &quot;Infrared radiative heat gain distribution between the room facing surfaces&quot;</span>
  <span style="color: blue">extends </span><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.PartialSurfaceInterfaceRadiative"
>Buildings.Rooms.BaseClasses.PartialSurfaceInterfaceRadiative</a>;
  <span style="color: blue">parameter </span>Boolean haveShade <span style="color: #006400">&quot;Set to true if a shade is present&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> uSha[NConExtWin](<span style="color: blue">each </span>min=0, <span style="color: blue">each </span>max=1) <span style="color: blue">if </span>
       haveShade <span style="color: #006400">
    &quot;Control signal for the shading device (removed if no shade is present)&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> Q_flow <span style="color: #006400">
    &quot;Radiative heat input into room (positive if heat gain)&quot;</span>;
  <a href="Buildings_HeatTransfer_Interfaces.html#Buildings.HeatTransfer.Interfaces.RadiosityOutflow"
>Buildings.HeatTransfer.Interfaces.RadiosityOutflow</a>[NConExtWin] JOutConExtWin <span style="color: #006400">
    &quot;Outgoing radiosity that connects to shaded and unshaded part of glass&quot;</span>;
<span style="color: blue">protected </span>
  Real fraConExt[NConExt] = AEpsConExt/sumAEps <span style="color: #006400">
    &quot;Fraction of infrared radiant heat gain absorbed by exterior constructions&quot;</span>;
  Real fraConExtWinOpa[NConExtWin] = AEpsConExtWinOpa/sumAEps <span style="color: #006400">
    &quot;Fraction of infrared radiant heat gain absorbed by opaque part of exterior constructions that have a window&quot;</span>;
  Real fraConExtWinGla[NConExtWin] = (AEpsConExtWinSha + AEpsConExtWinUns)/sumAEps <span style="color: #006400">
    &quot;Fraction of infrared radiant heat gain absorbed by opaque part of glass constructions that have a window&quot;</span>;
  Real fraConExtWinFra[NConExtWin] = AEpsConExtWinFra/sumAEps <span style="color: #006400">
    &quot;Fraction of infrared radiant heat gain absorbed by window frame of exterior constructions that have a window&quot;</span>;

  Real fraConPar_a[NConPar] = AEpsConPar_a/sumAEps <span style="color: #006400">
    &quot;Fraction of infrared radiant heat gain absorbed by partition constructions surface a&quot;</span>;
  Real fraConPar_b[NConPar] = AEpsConPar_b/sumAEps <span style="color: #006400">
    &quot;Fraction of infrared radiant heat gain absorbed by partition constructions surface b&quot;</span>;
  Real fraConBou[NConBou] = AEpsConBou/sumAEps <span style="color: #006400">
    &quot;Fraction of infrared radiant heat gain absorbed by constructions with exterior boundary conditions exposed to outside of room model&quot;</span>;
  Real fraSurBou[NSurBou] = AEpsSurBou/sumAEps <span style="color: #006400">
    &quot;Fraction of infrared radiant heat gain absorbed by surface models of constructions that are modeled outside of this room&quot;</span>;

 <span style="color: blue">parameter </span>Real AEpsConExt[NConExt] = {AConExt[i]*epsConExt[i] <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConExt} <span style="color: #006400">
    &quot;Absorptivity times area of exterior constructions&quot;</span>;
 <span style="color: blue">parameter </span>Real AEpsConExtWinOpa[NConExtWin] = {AConExtWinOpa[i]*epsConExtWinOpa[i] <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConExtWin} <span style="color: #006400">
    &quot;Absorptivity times area of opaque part of exterior constructions that contain a window&quot;</span>;
 Real AEpsConExtWinUns[NConExtWin] = {shaSig[i].yCom * AConExtWinGla[i]*epsConExtWinUns[i]
     <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConExtWin} <span style="color: #006400">
    &quot;Absorptivity times area of unshaded window constructions&quot;</span>;
 Real AEpsConExtWinSha[NConExtWin] = {shaSig[i].y    * AConExtWinGla[i]*epsConExtWinSha[i]
    <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConExtWin} <span style="color: #006400">
    &quot;Absorptivity times area of shaded window constructions&quot;</span>;
 <span style="color: blue">parameter </span>Real AEpsConExtWinFra[NConExtWin] = {AConExtWinFra[i]*epsConExtWinFra[i] <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConExtWin} <span style="color: #006400">
    &quot;Absorptivity times area of window frame&quot;</span>;
 <span style="color: blue">parameter </span>Real AEpsConPar_a[NConPar] = {AConPar[i]*epsConPar_a[i] <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConPar} <span style="color: #006400">
    &quot;Absorptivity times area of partition constructions surface a&quot;</span>;
 <span style="color: blue">parameter </span>Real AEpsConPar_b[NConPar] = {AConPar[i]*epsConPar_b[i] <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConPar} <span style="color: #006400">
    &quot;Absorptivity times area of partition constructions surface b&quot;</span>;
 <span style="color: blue">parameter </span>Real AEpsConBou[NConBou] = {AConBou[i]*epsConBou[i] <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConBou} <span style="color: #006400">
    &quot;Absorptivity times area of constructions with exterior boundary conditions exposed to outside of room model&quot;</span>;
 <span style="color: blue">parameter </span>Real AEpsSurBou[NSurBou] = {ASurBou[i]*epsSurBou[i] <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NSurBou} <span style="color: #006400">
    &quot;Absorptivity times area of surface models of constructions that are modeled outside of this room&quot;</span>;

 <span style="color: blue">parameter </span>Real sumAEpsNoWin(fixed=false) <span style="color: #006400">
    &quot;Sum of absorptivity times area of all constructions except for windows&quot;</span>;
 Real sumAEps <span style="color: #006400">
    &quot;Sum of absorptivity times area of all constructions including windows&quot;</span>;

 <a href="Buildings_HeatTransfer_Windows_BaseClasses.html#Buildings.HeatTransfer.Windows.BaseClasses.ShadingSignal"
>Buildings.HeatTransfer.Windows.BaseClasses.ShadingSignal</a> shaSig[NConExtWin](
      <span style="color: blue">each </span><span style="color: blue">final </span>haveShade=haveShade) <span style="color: #006400">
    &quot;Block to constrain the shading control signal to be strictly within (0, 1) if a shade is present&quot;</span>;
<span style="color: blue">initial </span><span style="color: blue">equation </span>
  sumAEpsNoWin =<span style="color: red"> sum</span>(AEpsConExt)+<span style="color: red">sum</span>(AEpsConExtWinOpa)+<span style="color: red">sum</span>(AEpsConExtWinFra)
                +<span style="color: red">sum</span>(AEpsConPar_a)+<span style="color: red">sum</span>(AEpsConPar_b)+<span style="color: red">sum</span>(AEpsConBou)+<span style="color: red">sum</span>(AEpsSurBou);
<span style="color: blue">equation </span>
  <span style="color: red">connect</span>(uSha, shaSig.u);

  sumAEps      = sumAEpsNoWin +<span style="color: red"> sum</span>(AEpsConExtWinUns) +<span style="color: red"> sum</span>(AEpsConExtWinSha);

  <span style="color: #006400">// Infrared radiative heat flow</span>
  <span style="color: #006400">// If a construction is not present, we assign the temperature of the connector to 20 degC.</span>
  <span style="color: blue">if </span>haveConExt<span style="color: blue"> then</span>
    conExt.Q_flow    = -fraConExt*Q_flow;
  <span style="color: blue">else</span>
    conExt[1].T = 293.15;
  <span style="color: blue">end if</span>;

  <span style="color: blue">if </span>haveConExtWin<span style="color: blue"> then</span>
    conExtWin.Q_flow = -fraConExtWinOpa*Q_flow;
  <span style="color: blue">else</span>
    conExtWin[1].T = 293.15;
  <span style="color: blue">end if</span>;

  <span style="color: blue">if </span>haveConPar<span style="color: blue"> then</span>
    conPar_a.Q_flow  = -fraConPar_a*Q_flow;
    conPar_b.Q_flow  = -fraConPar_b*Q_flow;
  <span style="color: blue">else</span>
    conPar_a[1].T = 293.15;
    conPar_b[1].T = 293.15;
  <span style="color: blue">end if</span>;

  <span style="color: blue">if </span>haveConBou<span style="color: blue"> then</span>
    conBou.Q_flow    = -fraConBou*Q_flow;
  <span style="color: blue">else</span>
    conBou[1].T = 293.15;
  <span style="color: blue">end if</span>;

  <span style="color: blue">if </span>haveSurBou<span style="color: blue"> then</span>
    conSurBou.Q_flow    = -fraSurBou*Q_flow;
  <span style="color: blue">else</span>
    conSurBou[1].T = 293.15;
  <span style="color: blue">end if</span>;

  <span style="color: #006400">// This model makes the simplification that the shade, the glass and the frame have</span>
  <span style="color: #006400">// the same absorptivity in the infrared region</span>
  JOutConExtWin        = +fraConExtWinGla*Q_flow;
  <span style="color: blue">if </span>haveConExtWin<span style="color: blue"> then</span>
     conExtWinFra.Q_flow  = -fraConExtWinFra*Q_flow;
  <span style="color: blue">else</span>
     conExtWinFra[1].T = 293.15;
  <span style="color: blue">end if</span>;

  <span style="color: #006400">// Check for conservation of energy</span>
  <span style="color: red">assert</span>(<span style="color: red">abs</span>(1 -<span style="color: red"> sum</span>(fraConExt) -<span style="color: red"> sum</span>(fraConExtWinOpa)-<span style="color: red"> sum</span>(fraConExtWinGla) -<span style="color: red"> sum</span>(fraConExtWinFra)
           -<span style="color: red"> sum</span>(fraConPar_a) -<span style="color: red"> sum</span>(fraConPar_b)
           -<span style="color: red"> sum</span>(fraConBou) -<span style="color: red"> sum</span>(fraSurBou))  &lt; 1E-5,
           &quot;Programming error: Radiation balance is wrong. Check equations.&quot;);
<span style="color: blue">end </span>InfraredRadiationGainDistribution;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE RadiationAdapter<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Rooms.BaseClass396027b42b0f60aaapterI.png" alt="Buildings.Rooms.BaseClasses.RadiationAdapter" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Rooms.BaseClasses.RadiationAdapter"></a><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses"
>Buildings.Rooms.BaseClasses</a>.RadiationAdapter</h2>
<p>
<b>Model to connect between signals and heat port for radiative gains of the room</b>
<br>
<br><img src="Buildings.Rooms.BaseClass396027b42b0f60aaapterD.png" alt="Buildings.Rooms.BaseClasses.RadiationAdapter">
</p>
<h3>Information</h3>

This model can be used as a thermal adapter in situations where the temperature
and the heat flow rate are computed in separate models. 
For example, this thermal adapter is used in the room model, which computes
the distribution of radiative heat gains (such as due to a radiator) in
<a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.InfraredRadiationGainDistribution"
>
Buildings.Rooms.BaseClasses.InfraredRadiationGainDistribution</a>
and computes the the radiative temperature in
<a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.RadiationTemperature"
>
Buildings.Rooms.BaseClasses.RadiationTemperature</a>.
This adapter combines the heat flow rate and the temperatures that are computed in these
separate models, and exposes these two quantities at its heat port.


<p>Extends from <a href="Buildings_BaseClasses.html#Buildings.BaseClasses.BaseIcon"
>Buildings.BaseClasses.BaseIcon</a> (Base icon).</p>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>rad</td><td>Port for radiative heat gain and radiation temperature</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>TRad</td><td>Radiation temperature of room</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>QRad_flow</td><td>Radiative heat gain</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">model</span> RadiationAdapter <span style="color: #006400">
  &quot;Model to connect between signals and heat port for radiative gains of the room&quot;</span>
  <span style="color: blue">extends </span><a href="Buildings_BaseClasses.html#Buildings.BaseClasses.BaseIcon"
>Buildings.BaseClasses.BaseIcon</a>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a</a> rad <span style="color: #006400">
    &quot;Port for radiative heat gain and radiation temperature&quot;</span>;
<span style="color: blue">public </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> TRad <span style="color: #006400">&quot;Radiation temperature of room&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> QRad_flow <span style="color: #006400">&quot;Radiative heat gain&quot;</span>;
<span style="color: blue">equation </span>
  QRad_flow = rad.Q_flow;
  rad.T = TRad;
<span style="color: blue">end </span>RadiationAdapter;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE RadiationTemperature<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Rooms.BaseClass0cb9284165e146d7atureI.png" alt="Buildings.Rooms.BaseClasses.RadiationTemperature" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Rooms.BaseClasses.RadiationTemperature"></a><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses"
>Buildings.Rooms.BaseClasses</a>.RadiationTemperature</h2>
<p>
<b>Radiative temperature of the room</b>
<br>
<br><img src="Buildings.Rooms.BaseClass0cb9284165e146d7atureD.png" alt="Buildings.Rooms.BaseClasses.RadiationTemperature">
</p>
<h3>Information</h3>

<p>
This model computes the radiative temperature in the room.
For a room with windows but no shade, the radiative temperature is
computed as
</p>
<p align="center" style="font-style:italic;">
  T<sub>rad</sub> = &sum;<sub>i</sub> &nbsp; (A<sup>i</sup> &nbsp; &epsilon;<sup>i</sup> &nbsp; T<sup>i</sup>)
  &frasl;
  &sum;<sub>i</sub> &nbsp; (A<sup>i</sup> &nbsp; &epsilon;<sup>i</sup>)
</p>
<p>
where 
<i>T<sub>rad</sub></i> is the radiative temperature of the room,
<i>A<sup>i</sup></i> are the surface areas of the room,
<i>&epsilon;<sup>i</sup></i> are the infrared emissivities of the surfaces, and
<i>T<sup>i</sup></i> are the surface temperatures.
</p>
<p>
If a the windows have a shade, then the equation is modified to take the actual shaded and non-shaded
surface area into account. In this situation, the shaded part of a window has a infrared radiative power
of</p>
<p align="center" style="font-style:italic;">
 E = A &nbsp; ( u &nbsp; &epsilon;<sub>s</sub> &nbsp; T<sub>s</sub> + 
   (1-u) &nbsp; &epsilon;<sub>g</sub> &tau;<sub>s</sub> &nbsp; T<sub>gs</sub>)
</p>
<p>
where
<i>A</i> is the surface area of the glass,
<i>u</i> is the control signal of the shade,
<i>&epsilon;<sub>s</sub></i> is the infrared absorptivity of the shade,
<i>T<sub>s</sub></i> is the temperature of the shade,
<i>&epsilon;<sub>g</sub></i> is the infrared absorptivity of the glass,
<i>&tau;<sub>s</sub></i> is the infrared transmittance of the shade, and
<i>T<sub>gs</sub></i> is the glass temperature behind the shade.
</p>
<p>
For the unshaded part of the window, the radiative power is
</p>
<p align="center" style="font-style:italic;">
 E = A &nbsp; (1-u) &nbsp; &epsilon;<sub>g</sub> &nbsp; T<sub>gn</sub>
</p>
<p>where
<i>T<sub>gn</sub></i> is the glass temperature of the non-shaded part of the window.
</p>

<p>Extends from <a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.PartialSurfaceInterfaceRadiative"
>Buildings.Rooms.BaseClasses.PartialSurfaceInterfaceRadiative</a> (Partial model that is used for infrared radiation balance).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstruction"
>ParameterConstruction</a></td><td>datConExt[NConExt]</td><td>&nbsp;</td><td>Data for exterior construction</td></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstructionWithWindow"
>ParameterConstructionWithWindow</a></td><td>datConExtWin[NConExtWin]</td><td>&nbsp;</td><td>Data for exterior construction with window</td></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstruction"
>ParameterConstruction</a></td><td>datConPar[NConPar]</td><td>&nbsp;</td><td>Data for partition construction</td></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstruction"
>ParameterConstruction</a></td><td>datConBou[NConBou]</td><td>&nbsp;</td><td>Data for construction boundary</td></tr>
<tr><td><a href="Buildings_HeatTransfer_Data_OpaqueSurfaces.html#Buildings.HeatTransfer.Data.OpaqueSurfaces.Generic"
>Generic</a></td><td>surBou[NSurBou]</td><td>&nbsp;</td><td>Record for data of surfaces whose heat conduction is modeled outside of this room</td></tr>
<tr><td>Boolean</td><td>haveShade</td><td>&nbsp;</td><td>Set to true if the windows have a shade</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Exterior constructions</td></tr>
<tr><td>Integer</td><td>nConExt</td><td>&nbsp;</td><td>Number of exterior constructions</td></tr>
<tr><td>Integer</td><td>nConExtWin</td><td>&nbsp;</td><td>Number of window constructions</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Partition constructions</td></tr>
<tr><td>Integer</td><td>nConPar</td><td>&nbsp;</td><td>Number of partition constructions</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Boundary constructions</td></tr>
<tr><td>Integer</td><td>nConBou</td><td>&nbsp;</td><td>Number of constructions that have their outside surface exposed to the boundary of this room</td></tr>
<tr><td>Integer</td><td>nSurBou</td><td>&nbsp;</td><td>Number of surface heat transfer models that connect to constructions that are modeled outside of this room</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conExt[NConExt]</td><td>Heat port that connects to room-side surface of exterior constructions</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conExtWin[NConExtWin]</td><td>Heat port that connects to room-side surface of exterior constructions that contain a window</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conExtWinFra[NConExtWin]</td><td>Heat port that connects to room-side surface of window frame</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conPar_a[NConPar]</td><td>Heat port that connects to room-side surface a of partition constructions</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conPar_b[NConPar]</td><td>Heat port that connects to room-side surface b of partition constructions</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conBou[NConBou]</td><td>Heat port that connects to room-side surface of constructions that expose their other surface to the outside</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conSurBou[NSurBou]</td><td>Heat port to surfaces of models that compute the heat conduction outside of this room</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>glaUns[NConExtWin]</td><td>Heat port that connects to room-side surface of unshaded glass</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>glaSha[NConExtWin]</td><td>Heat port that connects to room-side surface of shaded glass</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>sha[NConExtWin]</td><td>Heat port that connects to shade</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>uSha[NConExtWin]</td><td>Control signal for the shading device (removed if no shade is present)</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>TRad</td><td>Radiative temperature [K]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">model</span> RadiationTemperature <span style="color: #006400">&quot;Radiative temperature of the room&quot;</span>
  <span style="color: blue">extends </span><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.PartialSurfaceInterfaceRadiative"
>Buildings.Rooms.BaseClasses.PartialSurfaceInterfaceRadiative</a>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a</a> glaUns[NConExtWin] <span style="color: blue">if </span>
     haveConExtWin <span style="color: #006400">
    &quot;Heat port that connects to room-side surface of unshaded glass&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a</a> glaSha[NConExtWin] <span style="color: blue">if </span>
    haveShade <span style="color: #006400">&quot;Heat port that connects to room-side surface of shaded glass&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a</a> sha[NConExtWin] <span style="color: blue">if </span>
    haveShade <span style="color: #006400">&quot;Heat port that connects to shade&quot;</span>;
  <span style="color: blue">parameter </span>Boolean haveShade <span style="color: #006400">&quot;Set to true if the windows have a shade&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> uSha[NConExtWin](<span style="color: blue">each </span>min=0, <span style="color: blue">each </span>max=1) <span style="color: blue">if </span>
       haveShade <span style="color: #006400">
    &quot;Control signal for the shading device (removed if no shade is present)&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> TRad(min=0, unit=&quot;K&quot;, displayUnit=&quot;degC&quot;) <span style="color: #006400">
    &quot;Radiative temperature&quot;</span>;

<span style="color: blue">protected </span>
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Integer NOpa = NConExt+2*NConExtWin+2*NConPar+NConBou+NSurBou <span style="color: #006400">
    &quot;Number of opaque surfaces, including the window frame&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Integer NWin = NConExtWin <span style="color: #006400">&quot;Number of window surfaces&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Integer NTot = NOpa + NWin <span style="color: #006400">&quot;Total number of surfaces&quot;</span>;

  <span style="color: blue">final </span><span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> AGla[NWin] = datConExtWin.AGla <span style="color: #006400">
    &quot;Surface area of opaque surfaces&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Real epsGla[NWin](min=0, max=1)=
    {datConExtWin[i].glaSys.glass[datConExtWin[i].glaSys.nLay].absIR_b <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NWin} <span style="color: #006400">
    &quot;Absorptivity of glass&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Real epsSha[NWin](min=0, max=1)=
    {datConExtWin[i].glaSys.shade.absIR_a <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NWin} <span style="color: #006400">
    &quot;Absorptivity of shade&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Real tauSha[NWin](min=0, max=1)=
    {(<span style="color: blue">if </span>datConExtWin[i].glaSys.haveInteriorShade<span style="color: blue"> then </span>
      datConExtWin[i].glaSys.shade.tauIR_a<span style="color: blue"> else </span>1) <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NWin} <span style="color: #006400">
    &quot;Transmissivity of shade&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> epsAOpa[NOpa](fixed=false) <span style="color: #006400">
    &quot;Product of area times absorptivity of opaque surfaces&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> epsAGla[NWin](fixed=false) <span style="color: #006400">
    &quot;Product of area times absorptivity of window surfaces&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> epsASha[NWin](fixed=false) <span style="color: #006400">
    &quot;Product of area times absorptivity of window shade&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> epsTauASha[NWin](fixed=false) <span style="color: #006400">
    &quot;Product of area times glass absorptivity times shade transmittance&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> TOpa[NOpa](<span style="color: blue">each </span>start=293.15, <span style="color: blue">each </span>nominal=293.15) <span style="color: #006400">
    &quot;Temperature of opaque surfaces&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> TGlaUns[NWin](<span style="color: blue">each </span>start=293.15, <span style="color: blue">each </span>nominal=293.15) <span style="color: #006400">
    &quot;Temperature of unshaded part of glass&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> TGlaSha[NWin](<span style="color: blue">each </span>start=293.15, <span style="color: blue">each </span>nominal=293.15) <span style="color: #006400">
    &quot;Temperature of shaded part of glass&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> TSha[NWin](<span style="color: blue">each </span>start=293.15, <span style="color: blue">each </span>nominal=293.15) <span style="color: #006400">
    &quot;Temperature of shade&quot;</span>;
  <span style="color: #006400">// Internal connectors, used because of the conditionally removed connectors</span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a</a> glaUns_internal[NConExtWin] <span style="color: #006400">
    &quot;Heat port that connects to room-side surface of unshaded glass&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a</a> glaSha_internal[NConExtWin] <span style="color: #006400">
    &quot;Heat port that connects to room-side surface of shaded glass&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a</a> sha_internal[NConExtWin] <span style="color: #006400">
    &quot;Heat port that connects to shade&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> uSha_internal[NConExtWin](<span style="color: blue">each </span>min=0, <span style="color: blue">each </span>max=1) <span style="color: #006400">
    &quot;Control signal for the shading device&quot;</span>;

<span style="color: blue">initial </span><span style="color: blue">equation </span>
  <span style="color: #006400">// The next loops build the array epsAOpa that simplifies</span>
  <span style="color: #006400">// the model equations.</span>
  <span style="color: #006400">// The arrays stores the values of the constructios in the following order</span>
  <span style="color: #006400">// [x[1:NConExt] x[1:NConPar] x[1: NConPar] x[1: NConBou] x[1: NSurBou] x[1: NConExtWin] x[1: NConExtWin]]</span>
  <span style="color: #006400">// where x is epsOpa, AOpa or kOpa.</span>
  <span style="color: #006400">// The last two entries are for the opaque wall that contains a window, and for the window frame.</span>
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConExt<span style="color: blue"> loop</span>
    epsAOpa[i] = epsConExt[i] * AConExt[i];
  <span style="color: blue">end for</span>;
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConPar<span style="color: blue"> loop</span>
    epsAOpa[i+NConExt]         = epsConPar_a[i] * AConPar[i];
    epsAOpa[i+NConExt+NConPar] = epsConPar_b[i] * AConPar[i];
  <span style="color: blue">end for</span>;
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConBou<span style="color: blue"> loop</span>
    epsAOpa[i+NConExt+2*NConPar] = epsConBou[i] * AConBou[i];
  <span style="color: blue">end for</span>;
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NSurBou<span style="color: blue"> loop</span>
    epsAOpa[i+NConExt+2*NConPar+NConBou] = epsSurBou[i] * ASurBou[i];
  <span style="color: blue">end for</span>;
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConExtWin<span style="color: blue"> loop</span>
    <span style="color: #006400">// Opaque part of construction that has a window embedded</span>
    epsAOpa[i+NConExt+2*NConPar+NConBou+NSurBou] = epsConExtWinOpa[i] * AConExtWinOpa[i];
    <span style="color: #006400">// Window frame</span>
    epsAOpa[i+NConExt+2*NConPar+NConBou+NSurBou+NConExtWin] = epsConExtWinFra[i] * AConExtWinFra[i];
  <span style="color: blue">end for</span>;
  <span style="color: #006400">// Window glass</span>
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConExtWin<span style="color: blue"> loop</span>
    <span style="color: #006400">// Window glass</span>
    epsAGla[i] = AGla[i] * epsGla[i];
    <span style="color: #006400">// Window shade</span>
    epsASha[i]    = AGla[i] * epsSha[i];
    <span style="color: #006400">// Emitted from glas and transmitted through window shade</span>
    epsTauASha[i] = AGla[i] * epsGla[i] * tauSha[i];
  <span style="color: blue">end for</span>;
<span style="color: #006400">////////////////////////////////////////////////////////////////////</span>
<span style="color: blue">equation </span>
  <span style="color: #006400">// Conditional connnector</span>
  <span style="color: red">connect</span>(glaUns, glaUns_internal);
  <span style="color: red">connect</span>(glaSha, glaSha_internal);
  <span style="color: red">connect</span>(sha, sha_internal);
  <span style="color: red">connect</span>(uSha, uSha_internal);
  <span style="color: blue">if </span><span style="color: blue">not </span>haveConExtWin<span style="color: blue"> then</span>
    glaUns_internal.T =<span style="color: red"> fill</span>(293.15, NConExtWin);
  <span style="color: blue">end if</span>;
  <span style="color: blue">if </span><span style="color: blue">not </span>haveShade<span style="color: blue"> then</span>
    glaSha_internal.T =<span style="color: red"> fill</span>(293.15, NConExtWin);
    sha_internal.T =<span style="color: red"> fill</span>(293.15, NConExtWin);
    uSha_internal =<span style="color: red"> fill</span>(0, NConExtWin);
  <span style="color: blue">end if</span>;

  <span style="color: #006400">// Assign temperature of opaque surfaces</span>
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConExt<span style="color: blue"> loop</span>
    TOpa[i] = conExt[i].T;
  <span style="color: blue">end for</span>;
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConPar<span style="color: blue"> loop</span>
    TOpa[i+NConExt]         = conPar_a[i].T;
    TOpa[i+NConExt+NConPar] = conPar_b[i].T;
  <span style="color: blue">end for</span>;
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConBou<span style="color: blue"> loop</span>
    TOpa[i+NConExt+2*NConPar] = conBou[i].T;
  <span style="color: blue">end for</span>;
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NSurBou<span style="color: blue"> loop</span>
    TOpa[i+NConExt+2*NConPar+NConBou] = conSurBou[i].T;
  <span style="color: blue">end for</span>;
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConExtWin<span style="color: blue"> loop</span>
    TOpa[i+NConExt+2*NConPar+NConBou+NSurBou]            = conExtWin[i].T;
    TOpa[i+NConExt+2*NConPar+NConBou+NConExtWin+NSurBou] = conExtWinFra[i].T;
  <span style="color: blue">end for</span>;
  <span style="color: #006400">// Assign temperature of glass and shade</span>
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConExtWin<span style="color: blue"> loop</span>
    TGlaUns[i] = glaUns_internal[i].T;
    TGlaSha[i] = glaSha_internal[i].T;
    TSha[i]    = sha_internal[i].T;
  <span style="color: blue">end for</span>;
  <span style="color: #006400">// Compute radiative temperature</span>
  <span style="color: blue">if </span>haveShade<span style="color: blue"> then</span>
    TRad = (<span style="color: red">sum</span>(epsAOpa[i] * TOpa[i] <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NOpa)
        +<span style="color: red"> sum</span>(
      ( uSha_internal[i] * (epsASha[i] * TSha[i] + epsTauASha[i] * TGlaSha[i]) +
      (1-uSha_internal[i]) * epsAGla[i] * TGlaUns[i])
        <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConExtWin))  /
        (<span style="color: red">sum</span>(epsAOpa) +<span style="color: red"> sum</span>(
      ( uSha_internal[i] * (epsASha[i] + epsTauASha[i]) + (1-uSha_internal[i]) * epsAGla[i])
        <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConExtWin));
      <span style="color: blue">else</span>
    TRad = (<span style="color: red">sum</span>(epsAOpa[i] * TOpa[i] <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NOpa) +<span style="color: red"> sum</span>(epsAGla .* TGlaUns)) / (<span style="color: red">sum</span>(epsAOpa) +<span style="color: red"> sum</span>(epsAGla));
  <span style="color: blue">end if</span>;

  <span style="color: #006400">// Assign heat exchange to connectors</span>
  <span style="color: blue">if </span>haveConExt<span style="color: blue"> then</span>
    <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConExt<span style="color: blue"> loop</span>
      0 = conExt[i].Q_flow;
    <span style="color: blue">end for</span>;
  <span style="color: blue">else</span>
      conExt[1].T = 293.15;
  <span style="color: blue">end if</span>;

  <span style="color: blue">if </span>haveConPar<span style="color: blue"> then</span>
    <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConPar<span style="color: blue"> loop</span>
      0 = conPar_a[i].Q_flow;
      0 = conPar_b[i].Q_flow;
    <span style="color: blue">end for</span>;
  <span style="color: blue">else</span>
      conPar_a[1].T = 293.15;
      conPar_b[1].T = 293.15;
  <span style="color: blue">end if</span>;

  <span style="color: blue">if </span>haveConBou<span style="color: blue"> then</span>
    <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConBou<span style="color: blue"> loop</span>
      0 = conBou[i].Q_flow;
    <span style="color: blue">end for</span>;
  <span style="color: blue">else</span>
     conBou[1].T = 293.15;
  <span style="color: blue">end if</span>;

  <span style="color: blue">if </span>haveSurBou<span style="color: blue"> then</span>
    <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NSurBou<span style="color: blue"> loop</span>
      0 = conSurBou[i].Q_flow;
    <span style="color: blue">end for</span>;
  <span style="color: blue">else</span>
      conSurBou[1].T = 293.15;
  <span style="color: blue">end if</span>;

  <span style="color: blue">if </span>haveConExtWin<span style="color: blue"> then</span>
    <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConExtWin<span style="color: blue"> loop</span>
      0 = conExtWin[i].Q_flow;
      0 = conExtWinFra[i].Q_flow;
    <span style="color: blue">end for</span>;
  <span style="color: blue">else</span>
      conExtWin[1].T    = 293.15;
      conExtWinFra[1].T = 293.15;
  <span style="color: blue">end if</span>;

<span style="color: blue">end </span>RadiationTemperature;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE SolarRadiationExchange<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Rooms.BaseClass124701a598175785hangeI.png" alt="Buildings.Rooms.BaseClasses.SolarRadiationExchange" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Rooms.BaseClasses.SolarRadiationExchange"></a><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses"
>Buildings.Rooms.BaseClasses</a>.SolarRadiationExchange</h2>
<p>
<b>Solar radiation heat exchange between the room facing surfaces</b>
<br>
<br><img src="Buildings.Rooms.BaseClass124701a598175785hangeD.png" alt="Buildings.Rooms.BaseClasses.SolarRadiationExchange">
</p>
<h3>Information</h3>

<p>
This model computes the distribution of the solar radiation gain
to the room surfaces.
Let 
<i>N<sup>w</sup></i> 
denote the number of windows,
<i>N<sup>f</sup></i> 
the number of floor elements and
<i>N<sup>n</sup></i> 
the number of non-floor elements such as ceiling, wall and window elements.
Input to the model are the solar radiosities 
<i>J<sup>i</sup>, i &isin; {1, &hellip; , N<sup>w</sup>}</i>,
that were transmitted through the window.
The total incoming solar radiation is therefore
</p>
<p align="center" style="font-style:italic;">
H = &sum;<sub>i=1</sub><sup>N<sup>w</sup></sup> J<sub>in</sub><sup>i</sup>
</p>
<p>
It is assumed that <i>H</i> first hits the floor where some of it is absorbed,
and some of it is diffusely reflected to all other surfaces. Only the first 
reflection is taken into account and the location of the floor patch
relative to the window is neglected.
</p>
<p>Hence, the radiation that is 
absorbed by each floor patch <i>i &isin; {1, &hellip;, N<sup>f</sup>}</i>,
and may be partially transmitted in
the unusual case that the floor contains a window, is
</p>
<p align="center" style="font-style:italic;">
 Q<sup>i</sup> = H &nbsp; (&epsilon;<sup>i</sup>+&tau;<sup>i</sup>) &nbsp; A<sup>i</sup> 
&frasl; &sum;<sub>j=1</sub><sup>N<sup>f</sup></sup> &nbsp; A<sup>j</sup>.
</p>
The sum of the radiation that is reflected by the floor is therefore
<p align="center" style="font-style:italic;">
 J<sup>f</sup> = H &nbsp; 
&sum;<sub>i=1</sub><sup>N<sup>f</sup></sup>
(1-&epsilon;<sup>i</sup>-&tau;<sup>i</sup>) &nbsp; A<sup>i</sup> 
&frasl; &sum;<sub>j=1</sub><sup>N<sup>f</sup></sup> &nbsp; A<sup>j</sup>.
</p>
<p>
This reflected radiosity is then distributed to all non-floor areas
<i>i &isin; {1, &hellip;, N<sup>n</sup>}</i>
using</p>
<p align="center" style="font-style:italic;">
  Q<sup>i</sup> = J<sup>f</sup> &nbsp;
A<sup>i</sup> &nbsp; (&epsilon;<sup>i</sup>+&tau;<sup>i</sup>)
&frasl;
&sum;<sub>k=1</sub><sup>N<sup>n</sup></sup>
A<sup>k</sup> &nbsp; (&epsilon;<sup>k</sup>+&tau;<sup>k</sup>)
</p>
<p>
For opaque surfaces, the heat flow rate 
<i>Q<sup>i</sup></i> 
is set to be equal to the heat flow rate at the heat port.
For the glass of the windows, the heat flow rate 
<i>Q<sup>i</sup></i> is set to the radiosity
<i>J<sub>out</sub><sup>i</sup></i>
that will strike the glass or the window shade as diffuse solar
radiation.

<p>Extends from <a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.PartialSurfaceInterfaceRadiative"
>Buildings.Rooms.BaseClasses.PartialSurfaceInterfaceRadiative</a> (Partial model that is used for infrared radiation balance).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstruction"
>ParameterConstruction</a></td><td>datConExt[NConExt]</td><td>&nbsp;</td><td>Data for exterior construction</td></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstructionWithWindow"
>ParameterConstructionWithWindow</a></td><td>datConExtWin[NConExtWin]</td><td>&nbsp;</td><td>Data for exterior construction with window</td></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstruction"
>ParameterConstruction</a></td><td>datConPar[NConPar]</td><td>&nbsp;</td><td>Data for partition construction</td></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstruction"
>ParameterConstruction</a></td><td>datConBou[NConBou]</td><td>&nbsp;</td><td>Data for construction boundary</td></tr>
<tr><td><a href="Buildings_HeatTransfer_Data_OpaqueSurfaces.html#Buildings.HeatTransfer.Data.OpaqueSurfaces.Generic"
>Generic</a></td><td>surBou[NSurBou]</td><td>&nbsp;</td><td>Record for data of surfaces whose heat conduction is modeled outside of this room</td></tr>
<tr><td>Boolean</td><td>isFloorConExt[NConExt]</td><td>&nbsp;</td><td>Flag to indicate if floor for exterior constructions</td></tr>
<tr><td>Boolean</td><td>isFloorConExtWin[NConExtWin]</td><td>&nbsp;</td><td>Flag to indicate if floor for constructions</td></tr>
<tr><td>Boolean</td><td>isFloorConPar_a[NConPar]</td><td>&nbsp;</td><td>Flag to indicate if floor for constructions</td></tr>
<tr><td>Boolean</td><td>isFloorConPar_b[NConPar]</td><td>&nbsp;</td><td>Flag to indicate if floor for constructions</td></tr>
<tr><td>Boolean</td><td>isFloorConBou[NConBou]</td><td>&nbsp;</td><td>Flag to indicate if floor for constructions with exterior boundary conditions exposed to outside of room model</td></tr>
<tr><td>Boolean</td><td>isFloorSurBou[NSurBou]</td><td>&nbsp;</td><td>Flag to indicate if floor for constructions that are modeled outside of this room</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Emissivity"
>Emissivity</a></td><td>tauGla[NConExtWin]</td><td>&nbsp;</td><td>Transmissivity of window [1]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Exterior constructions</td></tr>
<tr><td>Integer</td><td>nConExt</td><td>&nbsp;</td><td>Number of exterior constructions</td></tr>
<tr><td>Integer</td><td>nConExtWin</td><td>&nbsp;</td><td>Number of window constructions</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Partition constructions</td></tr>
<tr><td>Integer</td><td>nConPar</td><td>&nbsp;</td><td>Number of partition constructions</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Boundary constructions</td></tr>
<tr><td>Integer</td><td>nConBou</td><td>&nbsp;</td><td>Number of constructions that have their outside surface exposed to the boundary of this room</td></tr>
<tr><td>Integer</td><td>nSurBou</td><td>&nbsp;</td><td>Number of surface heat transfer models that connect to constructions that are modeled outside of this room</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conExt[NConExt]</td><td>Heat port that connects to room-side surface of exterior constructions</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conExtWin[NConExtWin]</td><td>Heat port that connects to room-side surface of exterior constructions that contain a window</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conExtWinFra[NConExtWin]</td><td>Heat port that connects to room-side surface of window frame</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conPar_a[NConPar]</td><td>Heat port that connects to room-side surface a of partition constructions</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conPar_b[NConPar]</td><td>Heat port that connects to room-side surface b of partition constructions</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conBou[NConBou]</td><td>Heat port that connects to room-side surface of constructions that expose their other surface to the outside</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conSurBou[NSurBou]</td><td>Heat port to surfaces of models that compute the heat conduction outside of this room</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>HOutConExtWin[NConExtWin]</td><td>Outgoing solar radiation that strikes window per unit area [W/m2]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>JInConExtWin[NConExtWin]</td><td>Solar radiation transmitted by window per unit area [W]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">model</span> SolarRadiationExchange <span style="color: #006400">
  &quot;Solar radiation heat exchange between the room facing surfaces&quot;</span>
  <span style="color: blue">extends </span><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.PartialSurfaceInterfaceRadiative"
>Buildings.Rooms.BaseClasses.PartialSurfaceInterfaceRadiative</a>(
  <span style="color: blue">final </span>epsConExt = datConExt.layers.absSol_b,
  <span style="color: blue">final </span>epsConExtWinOpa = datConExtWin.layers.absSol_b,
  <span style="color: blue">final </span>epsConExtWinUns={(1-datConExtWin[i].glaSys.glass[datConExtWin[i].glaSys.nLay].tauSol
                     -datConExtWin[i].glaSys.glass[datConExtWin[i].glaSys.nLay].rhoSol_b) <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConExtWin},
  <span style="color: blue">final </span>epsConExtWinSha = {(1-datConExtWin[i].glaSys.glass[datConExtWin[i].glaSys.nLay].tauSol
                       -datConExtWin[i].glaSys.glass[datConExtWin[i].glaSys.nLay].rhoSol_b) <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConExtWin},
  <span style="color: blue">final </span>epsConExtWinFra = datConExtWin.glaSys.absSolFra,
  <span style="color: blue">final </span>epsConPar_a = datConPar.layers.absSol_a,
  <span style="color: blue">final </span>epsConPar_b = datConPar.layers.absSol_b,
  <span style="color: blue">final </span>epsConBou = datConBou.layers.absSol_b,
  <span style="color: blue">final </span>epsSurBou = surBou.absSol);
  <span style="color: #006400">// In the above declaration, we simplified the assignment of epsConExtWinSha.</span>
  <span style="color: #006400">// An exact formulation would need to take into account the transmission and reflection</span>
  <span style="color: #006400">// of the shade for the solar radiation that strikes the window from the room-side.</span>
  <span style="color: #006400">// The simplification leads to too low a value of epsConExtWinSha. Since epsConExtWinSha</span>
  <span style="color: #006400">// is used as a weight for how much solar radiation hits the window from the room-side,</span>
  <span style="color: #006400">// underestimating epsConExtWinSha does not seem to cause concerns. The reason is that</span>
  <span style="color: #006400">// the model assumes diffuse reflection, whereas in reality, reflection of the solar</span>
  <span style="color: #006400">// radiation at the floor is likely specular, and therefore less radiation would hit</span>
  <span style="color: #006400">// the window from the room-side.</span>
  <span style="color: blue">parameter </span>Boolean isFloorConExt[NConExt] <span style="color: #006400">
    &quot;Flag to indicate if floor for exterior constructions&quot;</span>;
  <span style="color: blue">parameter </span>Boolean isFloorConExtWin[NConExtWin] <span style="color: #006400">
    &quot;Flag to indicate if floor for constructions&quot;</span>;
  <span style="color: blue">parameter </span>Boolean isFloorConPar_a[NConPar] <span style="color: #006400">
    &quot;Flag to indicate if floor for constructions&quot;</span>;
  <span style="color: blue">parameter </span>Boolean isFloorConPar_b[NConPar] <span style="color: #006400">
    &quot;Flag to indicate if floor for constructions&quot;</span>;
  <span style="color: blue">parameter </span>Boolean isFloorConBou[NConBou] <span style="color: #006400">
    &quot;Flag to indicate if floor for constructions with exterior boundary conditions exposed to outside of room model&quot;</span>;
  <span style="color: blue">parameter </span>Boolean isFloorSurBou[NSurBou] <span style="color: #006400">
    &quot;Flag to indicate if floor for constructions that are modeled outside of this room&quot;</span>;

  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Emissivity"
>Modelica.SIunits.Emissivity</a> tauGla[NConExtWin] <span style="color: #006400">
    &quot;Transmissivity of window&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> HOutConExtWin[NConExtWin](unit=&quot;W/m2&quot;) <span style="color: #006400">
    &quot;Outgoing solar radiation that strikes window per unit area&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> JInConExtWin[NConExtWin](unit=&quot;W&quot;) <span style="color: #006400">
    &quot;Solar radiation transmitted by window per unit area&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate"
>Modelica.SIunits.HeatFlowRate</a> JOutConExtWin[NConExtWin] <span style="color: #006400">
    &quot;Outgoing solar radiation that strikes the window&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate"
>Modelica.SIunits.HeatFlowRate</a> HTot <span style="color: #006400">
    &quot;Total solar radiation that enters the room&quot;</span>;

<span style="color: blue">protected </span>
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Real k1(unit=&quot;1&quot;, fixed=false) <span style="color: #006400">
    &quot;Intermediate variable for gain for solar radiation distribution&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Real k2(fixed=false) <span style="color: #006400">
    &quot;Intermediate variable for gain for solar radiation distribution&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate"
>Modelica.SIunits.HeatFlowRate</a> Q_flow[NTot] <span style="color: #006400">
    &quot;Total solar radiation that is absorbed by the surfaces (or transmitted back through the glass)&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Integer NOpa = NConExt+2*NConExtWin+2*NConPar+NConBou+NSurBou <span style="color: #006400">
    &quot;Number of opaque surfaces, including the window frame&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Integer NWin = NConExtWin <span style="color: #006400">&quot;Number of window surfaces&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Integer NTot = NOpa + NWin <span style="color: #006400">&quot;Total number of surfaces&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Boolean isFlo[NTot](fixed=false) <span style="color: #006400">
    &quot;Flag, true if a surface is a floor&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Real eps[NTot](min=0, max=1, fixed=false) <span style="color: #006400">
    &quot;Solar absorptivity&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Real tau[NTot](min=0, max=1, fixed=false) <span style="color: #006400">
    &quot;Solar transmissivity&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> AFlo(fixed=false) <span style="color: #006400">&quot;Total floor area&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> A[NTot](fixed=false) <span style="color: #006400">&quot;Surface areas&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Real k[NTot](unit=&quot;1&quot;, fixed=false) <span style="color: #006400">
    &quot;Gain for solar radiation distribution&quot;</span>;

<span style="color: blue">initial </span><span style="color: blue">equation </span>
  <span style="color: #006400">// The next loops builds arrays that simplify</span>
  <span style="color: #006400">// the model equations.</span>
  <span style="color: #006400">// These arrays store the values of the constructios in the following order</span>
  <span style="color: #006400">// [x[1:NConExt] x[1:NConPar] x[1: NConPar] x[1: NConBou] x[1: NSurBou] x[1: NConExtWin] x[1: NConExtWin]]</span>
  <span style="color: #006400">// where x is epsOpa, AOpa or kOpa.</span>
  <span style="color: #006400">// The last two entries are for the opaque wall that contains a window, and for the window frame.</span>
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConExt<span style="color: blue"> loop</span>
    eps[i] = epsConExt[i];
    A[i]      = AConExt[i];
    isFlo[i]  = isFloorConExt[i];
  <span style="color: blue">end for</span>;
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConPar<span style="color: blue"> loop</span>
    eps[i+NConExt]           = epsConPar_a[i];
    A[i+NConExt]             = AConPar[i];
    isFlo[i+NConExt]         = isFloorConPar_a[i];
    eps[i+NConExt+NConPar]   = epsConPar_b[i];
    A[i+NConExt+NConPar]     = AConPar[i];
    isFlo[i+NConExt+NConPar] = isFloorConPar_b[i];
  <span style="color: blue">end for</span>;
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConBou<span style="color: blue"> loop</span>
    eps[i+NConExt+2*NConPar]   = epsConBou[i];
    A[i+NConExt+2*NConPar]     = AConBou[i];
    isFlo[i+NConExt+2*NConPar] = isFloorConBou[i];
  <span style="color: blue">end for</span>;
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NSurBou<span style="color: blue"> loop</span>
    eps[i+NConExt+2*NConPar+NConBou]   = epsSurBou[i];
    A[i+NConExt+2*NConPar+NConBou]     = ASurBou[i];
    isFlo[i+NConExt+2*NConPar+NConBou] = isFloorSurBou[i];
  <span style="color: blue">end for</span>;

  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConExtWin<span style="color: blue"> loop</span>
    <span style="color: #006400">// Opaque part of construction that has a window embedded</span>
    eps[i+NConExt+2*NConPar+NConBou+NSurBou]   = epsConExtWinOpa[i];
    A[i+NConExt+2*NConPar+NConBou+NSurBou]     = AConExtWinOpa[i];
    isFlo[i+NConExt+2*NConPar+NConBou+NSurBou] = isFloorConExtWin[i];
    <span style="color: #006400">// Window frame</span>
    eps[i+NConExt+2*NConPar+NConBou+NSurBou+NConExtWin]   = epsConExtWinFra[i];
    A[i+NConExt+2*NConPar+NConBou+NSurBou+NConExtWin]     = AConExtWinFra[i];
    isFlo[i+NConExt+2*NConPar+NConBou+NSurBou+NConExtWin] = isFloorConExtWin[i];
  <span style="color: blue">end for</span>;
  <span style="color: #006400">// Window glass</span>
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConExtWin<span style="color: blue"> loop</span>
    <span style="color: #006400">// We simplify and assume that the shaded and unshaded part of the window</span>
    <span style="color: #006400">// have the same solar absorbtance.</span>
    <span style="color: #006400">// This simplification allows lumping the solar distribution into</span>
    <span style="color: #006400">// a parameter.</span>
    eps[i+NConExt+2*NConPar+NConBou+NSurBou+2*NConExtWin] = epsConExtWinUns[i];
    isFlo[i+NConExt+2*NConPar+NConBou+NSurBou+2*NConExtWin] = isFloorConExtWin[i];
    A[i+NConExt+2*NConPar+NConBou+NSurBou+2*NConExtWin] = AConExtWinGla[i];
  <span style="color: blue">end for</span>;
  <span style="color: #006400">// Vector with all surface areas.</span>
  <span style="color: #006400">// The next loops build the array A that simplifies</span>
  <span style="color: #006400">// the model equations.</span>
  <span style="color: #006400">// These array stores the values of the constructios in the following order</span>
  <span style="color: #006400">// [AOpa[1:NConExt] AOpa[1:NConPar] AOpa[1: NConPar] AOpa[1: NConBou] AOpa[1: NSurBou]</span>
  <span style="color: #006400">//  AOpa[1: NConExtWin] AOpa[1: NConExtWin] AGla[1: NConExtWin]]</span>
  <span style="color: #006400">// since NWin=NConExtWin.</span>

  <span style="color: #006400">// Solar transmissivity</span>
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NOpa<span style="color: blue"> loop</span>
    tau[i] = 0;
  <span style="color: blue">end for</span>;
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NWin<span style="color: blue"> loop</span>
    tau[NOpa+i] = tauGla[i];
  <span style="color: blue">end for</span>;

  <span style="color: #006400">// Sum of surface areas</span>
  AFlo =<span style="color: red"> sum</span>( (<span style="color: blue">if </span>isFlo[i]<span style="color: blue"> then </span>A[i]<span style="color: blue"> else </span>0) <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NTot);

  <span style="color: #006400">// Coefficient that is used for non-floor areas.</span>
  <span style="color: #006400">// The expression  max(1E-20, AFlo) is used to prevent a division by zero in case AFlo=0.</span>
  <span style="color: #006400">// The situation for AFlo=0 is caught by the assert statement.</span>
  k1 =<span style="color: red"> sum</span>( ( <span style="color: blue">if </span>isFlo[i]<span style="color: blue"> then </span>(A[i] * (1-eps[i]-tau[i]))<span style="color: blue"> else </span>0)  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NTot) /<span style="color: red"> max</span>(1E-20, AFlo);

  k2 =<span style="color: red"> sum</span>( ( <span style="color: blue">if </span>isFlo[i]<span style="color: blue"> then </span>0<span style="color: blue"> else </span>(A[i] * (eps[i]+tau[i])))  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NTot);

  <span style="color: blue">if </span>( k2 &gt; 1E-10)<span style="color: blue"> then</span>
    <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NTot<span style="color: blue"> loop</span>
      <span style="color: blue">if </span>isFlo[i]<span style="color: blue"> then</span>
         k[i] = (eps[i]+tau[i]) * A[i] / AFlo;
      <span style="color: blue">else</span>
         k[i] = k1/k2*(eps[i]+tau[i]) * A[i];
      <span style="color: blue">end if</span>;
     <span style="color: blue">end for</span>;
  <span style="color: blue">else</span>
    <span style="color: #006400">    // This branch only happens if k2=0, i.e., there is no surface other than floors</span>
    <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NTot<span style="color: blue"> loop</span>
      <span style="color: blue">if </span>isFlo[i]<span style="color: blue"> then</span>
        k[i] = A[i] / AFlo;
      <span style="color: blue">else</span>
        k[i] = 0;
      <span style="color: blue">end if</span>;
    <span style="color: blue">end for</span>;
  <span style="color: blue">end if</span>;

  <span style="color: #006400">// Test whether there is a floor inside this room</span>
  <span style="color: red">assert</span>( AFlo &gt; 1E-10,
     &quot;Error in parameters of the room model: The geometry is incorrect:\n&quot; +
     &quot;    The room model must have a construction that is a floor,\n&quot; +
     &quot;    and this construction must not have a window.\n&quot; +
     &quot;    The parameters for the room model are such that there is no such construction.\n&quot; +
     &quot;    Revise the model parameters.&quot;);
  <span style="color: #006400">// Test whether the distribution factors add up to one</span>
  <span style="color: red">assert</span>(<span style="color: red">abs</span>(1-<span style="color: red">sum</span>(k)) &lt; 1E-5,
     &quot;Program error: Sum of solar distribution factors in room is not equal to one. k=&quot; +<span style="color: red"> String</span>(<span style="color: red">sum</span>(k)));

<span style="color: #006400">////////////////////////////////////////////////////////////////////</span>
<span style="color: blue">equation </span>
  <span style="color: #006400">// Incoming radiation</span>
  HTot =<span style="color: red"> sum</span>(JInConExtWin);
  <span style="color: #006400">// Radiation that is absorbed by the surfaces</span>
  Q_flow = -k .* HTot;
  <span style="color: #006400">// Assign heat exchange to connectors</span>
  <span style="color: blue">if </span>haveConExt<span style="color: blue"> then</span>
    <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConExt<span style="color: blue"> loop</span>
      Q_flow[i] = conExt[i].Q_flow;
    <span style="color: blue">end for</span>;
  <span style="color: blue">else</span>
    conExt[1].T = 293.15;
  <span style="color: blue">end if</span>;

  <span style="color: blue">if </span>haveConPar<span style="color: blue"> then</span>
    <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConPar<span style="color: blue"> loop</span>
      Q_flow[i+NConExt]         = conPar_a[i].Q_flow;
      Q_flow[i+NConExt+NConPar] = conPar_b[i].Q_flow;
    <span style="color: blue">end for</span>;
  <span style="color: blue">else</span>
      conPar_a[1].T = 293.15;
      conPar_b[1].T = 293.15;
  <span style="color: blue">end if</span>;

  <span style="color: blue">if </span>haveConBou<span style="color: blue"> then</span>
    <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConBou<span style="color: blue"> loop</span>
      Q_flow[i+NConExt+2*NConPar] = conBou[i].Q_flow;
    <span style="color: blue">end for</span>;
  <span style="color: blue">else</span>
    conBou[1].T = 293.15;
  <span style="color: blue">end if</span>;

  <span style="color: blue">if </span>haveSurBou<span style="color: blue"> then</span>
    <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NSurBou<span style="color: blue"> loop</span>
      Q_flow[i+NConExt+2*NConPar+NConBou] = conSurBou[i].Q_flow;
     <span style="color: blue">end for</span>;
  <span style="color: blue">else</span>
      conSurBou[1].T = 293.15;
  <span style="color: blue">end if</span>;

  <span style="color: blue">if </span>haveConExtWin<span style="color: blue"> then</span>
    <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConExtWin<span style="color: blue"> loop</span>
      Q_flow[i+NConExt+2*NConPar+NConBou+NSurBou]            = conExtWin[i].Q_flow;
      Q_flow[i+NConExt+2*NConPar+NConBou+NSurBou+NConExtWin] = conExtWinFra[i].Q_flow;
    <span style="color: blue">end for</span>;
  <span style="color: blue">else</span>
    conExtWin[1].T    = 293.15;
    conExtWinFra[1].T = 293.15;
  <span style="color: blue">end if</span>;
  <span style="color: #006400">// Windows</span>
  <span style="color: blue">for </span>j<span style="color: blue"> in </span>1:NWin<span style="color: blue"> loop</span>
    Q_flow[j+NOpa] = JOutConExtWin[j];
    HOutConExtWin[j] = <span style="color: blue">if </span>(AConExtWinGla[j] &gt; 1E-10)<span style="color: blue"> then </span>JOutConExtWin[j] / AConExtWinGla[j]<span style="color: blue"> else </span>0;
  <span style="color: blue">end for</span>;

<span style="color: blue">end </span>SolarRadiationExchange;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE PartialSurfaceInterface<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Rooms.BaseClassfed177a79783e66erfaceI.png" alt="Buildings.Rooms.BaseClasses.PartialSurfaceInterface" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Rooms.BaseClasses.PartialSurfaceInterface"></a><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses"
>Buildings.Rooms.BaseClasses</a>.PartialSurfaceInterface</h2>
<p>
<b>Partial model that is used for infrared radiation balance</b>
<br>
<br><img src="Buildings.Rooms.BaseClassfed177a79783e66erfaceD.png" alt="Buildings.Rooms.BaseClasses.PartialSurfaceInterface">
</p>
<h3>Information</h3>

<p>
This partial model is used as a base class for models that need to exchange
heat with room-facing surfaces. It defines parameters for the surface areas.
The model is used as a base class to implement the convective model, and the various
radiation models.
</p>

<p>Extends from <a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ConstructionRecords"
>Buildings.Rooms.BaseClasses.ConstructionRecords</a> (Data records for construction data).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstruction"
>ParameterConstruction</a></td><td>datConExt[NConExt]</td><td>&nbsp;</td><td>Data for exterior construction</td></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstructionWithWindow"
>ParameterConstructionWithWindow</a></td><td>datConExtWin[NConExtWin]</td><td>&nbsp;</td><td>Data for exterior construction with window</td></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstruction"
>ParameterConstruction</a></td><td>datConPar[NConPar]</td><td>&nbsp;</td><td>Data for partition construction</td></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstruction"
>ParameterConstruction</a></td><td>datConBou[NConBou]</td><td>&nbsp;</td><td>Data for construction boundary</td></tr>
<tr><td><a href="Buildings_HeatTransfer_Data_OpaqueSurfaces.html#Buildings.HeatTransfer.Data.OpaqueSurfaces.Generic"
>Generic</a></td><td>surBou[NSurBou]</td><td>&nbsp;</td><td>Record for data of surfaces whose heat conduction is modeled outside of this room</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Exterior constructions</td></tr>
<tr><td>Integer</td><td>nConExt</td><td>&nbsp;</td><td>Number of exterior constructions</td></tr>
<tr><td>Integer</td><td>nConExtWin</td><td>&nbsp;</td><td>Number of window constructions</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Partition constructions</td></tr>
<tr><td>Integer</td><td>nConPar</td><td>&nbsp;</td><td>Number of partition constructions</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Boundary constructions</td></tr>
<tr><td>Integer</td><td>nConBou</td><td>&nbsp;</td><td>Number of constructions that have their outside surface exposed to the boundary of this room</td></tr>
<tr><td>Integer</td><td>nSurBou</td><td>&nbsp;</td><td>Number of surface heat transfer models that connect to constructions that are modeled outside of this room</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conExt[NConExt]</td><td>Heat port that connects to room-side surface of exterior constructions</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conExtWin[NConExtWin]</td><td>Heat port that connects to room-side surface of exterior constructions that contain a window</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conExtWinFra[NConExtWin]</td><td>Heat port that connects to room-side surface of window frame</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conPar_a[NConPar]</td><td>Heat port that connects to room-side surface a of partition constructions</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conPar_b[NConPar]</td><td>Heat port that connects to room-side surface b of partition constructions</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conBou[NConBou]</td><td>Heat port that connects to room-side surface of constructions that expose their other surface to the outside</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conSurBou[NSurBou]</td><td>Heat port to surfaces of models that compute the heat conduction outside of this room</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">partial </span><span style="color: blue">model</span> PartialSurfaceInterface <span style="color: #006400">
  &quot;Partial model that is used for infrared radiation balance&quot;</span>
  <span style="color: blue">extends </span><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ConstructionRecords"
>Buildings.Rooms.BaseClasses.ConstructionRecords</a>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a</a> conExt[NConExt] <span style="color: #006400">
    &quot;Heat port that connects to room-side surface of exterior constructions&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a</a> conExtWin[NConExtWin] <span style="color: #006400">
    &quot;Heat port that connects to room-side surface of exterior constructions that contain a window&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a</a> conExtWinFra[NConExtWin] <span style="color: #006400">
    &quot;Heat port that connects to room-side surface of window frame&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a</a> conPar_a[NConPar] <span style="color: #006400">
    &quot;Heat port that connects to room-side surface a of partition constructions&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a</a> conPar_b[NConPar] <span style="color: #006400">
    &quot;Heat port that connects to room-side surface b of partition constructions&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a</a> conBou[NConBou] <span style="color: #006400">
    &quot;Heat port that connects to room-side surface of constructions that expose their other surface to the outside&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a</a> conSurBou[NSurBou] <span style="color: #006400">
    &quot;Heat port to surfaces of models that compute the heat conduction outside of this room&quot;</span>;
<span style="color: blue">protected </span>
  <span style="color: blue">final </span><span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> AConExt[NConExt] = datConExt.A <span style="color: #006400">
    &quot;Areas of exterior constructions&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> AConExtWinOpa[NConExtWin] = datConExtWin.AOpa <span style="color: #006400">
    &quot;Opaque areas of exterior construction that have a window&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> AConExtWinGla[NConExtWin] = (1 .- datConExtWin.fFra) .* datConExtWin.AWin <span style="color: #006400">
    &quot;Glass areas of exterior construction that have a window&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> AConExtWinFra[NConExtWin] = datConExtWin.fFra .* datConExtWin.AWin <span style="color: #006400">
    &quot;Frame areas of exterior construction that have a window&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> AConPar[NConPar] = datConPar.A <span style="color: #006400">
    &quot;Areas of partition constructions&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> AConBou[NConBou] = datConBou.A <span style="color: #006400">
    &quot;Areas of constructions with exterior boundary conditions exposed to outside of room model&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> ASurBou[NSurBou] = surBou.A <span style="color: #006400">
    &quot;Area of surface models of constructions that are modeled outside of this room&quot;</span>;

<span style="color: blue">protected </span>
  <span style="color: blue">function</span> checkSurfaceAreas
    <span style="color: blue">input </span>Integer n <span style="color: #006400">&quot;Number of surfaces&quot;</span>;
    <span style="color: blue">input </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> A[:] <span style="color: #006400">&quot;Surface areas&quot;</span>;
    <span style="color: blue">input </span>String name <span style="color: #006400">&quot;Name of the surface data record, used in error message&quot;</span>;
  <span style="color: blue">algorithm </span>
    <span style="color: blue">if </span>n == 0<span style="color: blue"> then</span>
      <span style="color: red">assert</span>(<span style="color: red">Modelica.Math.Vectors.norm</span>(v=A, p=1) &lt; 1E-10,
      &quot;Error in declaration of room model: Construction record &#39;&quot; +
      name +
      &quot;&#39; has the following areas: &quot; +
      <span style="color: red">Modelica.Math.Vectors.toString</span>(A) +
      &quot;However, the room model is declared as having zero surfaces.
Check the parameters of the room model.&quot;);
    <span style="color: blue">else</span>
      <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:n<span style="color: blue"> loop</span>
        <span style="color: red">assert</span>(A[i] &gt; 0, &quot;Error in declaration of room model: Construction record &#39;&quot; + name + &quot;&#39; has the following areas: &quot; +
      <span style="color: red">Modelica.Math.Vectors.toString</span>(A) +
      &quot;However, the surface areas must be bigger than zero.
Check the parameters of the room model.&quot;);
      <span style="color: blue">end for</span>;
    <span style="color: blue">end if</span>;
  <span style="color: blue">end </span>checkSurfaceAreas;
<span style="color: blue">initial </span><span style="color: blue">algorithm </span>
  <span style="color: red">checkSurfaceAreas</span>(nConExt,    datConExt.A,       &quot;datConExt&quot;);
  <span style="color: red">checkSurfaceAreas</span>(nConExtWin, datConExtWin.AWin, &quot;datConExtWin&quot;);
  <span style="color: red">checkSurfaceAreas</span>(nConPar,    datConPar.A,       &quot;datConPar&quot;);
  <span style="color: red">checkSurfaceAreas</span>(nConBou,    datConBou.A,       &quot;datConBou&quot;);
  <span style="color: red">checkSurfaceAreas</span>(nSurBou,    surBou.A,          &quot;surBou&quot;);
<span style="color: blue">end </span>PartialSurfaceInterface;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE PartialSurfaceInterfaceRadiative<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Rooms.BaseClassfed177a79783e66erfaceI.png" alt="Buildings.Rooms.BaseClasses.PartialSurfaceInterfaceRadiative" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Rooms.BaseClasses.PartialSurfaceInterfaceRadiative"></a><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses"
>Buildings.Rooms.BaseClasses</a>.PartialSurfaceInterfaceRadiative</h2>
<p>
<b>Partial model that is used for infrared radiation balance</b>
<br>
<br><img src="Buildings.Rooms.BaseClassfed177a79783e66erfaceD.png" alt="Buildings.Rooms.BaseClasses.PartialSurfaceInterfaceRadiative">
</p>
<h3>Information</h3>

<p>
This partial model is used as a base class for models that need to exchange
heat with room-facing surfaces by radiation. It declares parameters that are
needed for the radiative balance.
</p>

<p>Extends from <a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.PartialSurfaceInterface"
>Buildings.Rooms.BaseClasses.PartialSurfaceInterface</a> (Partial model that is used for infrared radiation balance).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstruction"
>ParameterConstruction</a></td><td>datConExt[NConExt]</td><td>&nbsp;</td><td>Data for exterior construction</td></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstructionWithWindow"
>ParameterConstructionWithWindow</a></td><td>datConExtWin[NConExtWin]</td><td>&nbsp;</td><td>Data for exterior construction with window</td></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstruction"
>ParameterConstruction</a></td><td>datConPar[NConPar]</td><td>&nbsp;</td><td>Data for partition construction</td></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstruction"
>ParameterConstruction</a></td><td>datConBou[NConBou]</td><td>&nbsp;</td><td>Data for construction boundary</td></tr>
<tr><td><a href="Buildings_HeatTransfer_Data_OpaqueSurfaces.html#Buildings.HeatTransfer.Data.OpaqueSurfaces.Generic"
>Generic</a></td><td>surBou[NSurBou]</td><td>&nbsp;</td><td>Record for data of surfaces whose heat conduction is modeled outside of this room</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Exterior constructions</td></tr>
<tr><td>Integer</td><td>nConExt</td><td>&nbsp;</td><td>Number of exterior constructions</td></tr>
<tr><td>Integer</td><td>nConExtWin</td><td>&nbsp;</td><td>Number of window constructions</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Partition constructions</td></tr>
<tr><td>Integer</td><td>nConPar</td><td>&nbsp;</td><td>Number of partition constructions</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Boundary constructions</td></tr>
<tr><td>Integer</td><td>nConBou</td><td>&nbsp;</td><td>Number of constructions that have their outside surface exposed to the boundary of this room</td></tr>
<tr><td>Integer</td><td>nSurBou</td><td>&nbsp;</td><td>Number of surface heat transfer models that connect to constructions that are modeled outside of this room</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conExt[NConExt]</td><td>Heat port that connects to room-side surface of exterior constructions</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conExtWin[NConExtWin]</td><td>Heat port that connects to room-side surface of exterior constructions that contain a window</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conExtWinFra[NConExtWin]</td><td>Heat port that connects to room-side surface of window frame</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conPar_a[NConPar]</td><td>Heat port that connects to room-side surface a of partition constructions</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conPar_b[NConPar]</td><td>Heat port that connects to room-side surface b of partition constructions</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conBou[NConBou]</td><td>Heat port that connects to room-side surface of constructions that expose their other surface to the outside</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>conSurBou[NSurBou]</td><td>Heat port to surfaces of models that compute the heat conduction outside of this room</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">partial </span><span style="color: blue">model</span> PartialSurfaceInterfaceRadiative <span style="color: #006400">
  &quot;Partial model that is used for infrared radiation balance&quot;</span>
  <span style="color: blue">extends </span><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.PartialSurfaceInterface"
>Buildings.Rooms.BaseClasses.PartialSurfaceInterface</a>;

<span style="color: blue">protected </span>
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Emissivity"
>Modelica.SIunits.Emissivity</a> epsConExt[NConExt] = datConExt.layers.absIR_b <span style="color: #006400">
    &quot;Absorptivity of exterior constructions&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Emissivity"
>Modelica.SIunits.Emissivity</a> epsConExtWinOpa[NConExtWin] = datConExtWin.layers.absIR_b <span style="color: #006400">
    &quot;Absorptivity of opaque part of exterior constructions that contain a window&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Emissivity"
>Modelica.SIunits.Emissivity</a> epsConExtWinUns[NConExtWin]=
    {(datConExtWin[i].glaSys.glass[datConExtWin[i].glaSys.nLay].absIR_b) <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:NConExtWin} <span style="color: #006400">
    &quot;Absorptivity of unshaded part of window constructions&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Emissivity"
>Modelica.SIunits.Emissivity</a> epsConExtWinSha[NConExtWin] = datConExtWin.glaSys.shade.absIR_a <span style="color: #006400">
    &quot;Absorptivity of shaded part of window constructions&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Emissivity"
>Modelica.SIunits.Emissivity</a> epsConExtWinFra[NConExtWin] = datConExtWin.glaSys.absIRFra <span style="color: #006400">
    &quot;Absorptivity of window frame&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Emissivity"
>Modelica.SIunits.Emissivity</a> epsConPar_a[NConPar] = datConPar.layers.absIR_a <span style="color: #006400">
    &quot;Absorptivity of partition constructions surface a&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Emissivity"
>Modelica.SIunits.Emissivity</a> epsConPar_b[NConPar] = datConPar.layers.absIR_b <span style="color: #006400">
    &quot;Absorptivity of partition constructions surface b&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Emissivity"
>Modelica.SIunits.Emissivity</a> epsConBou[NConBou] = datConBou.layers.absIR_b <span style="color: #006400">
    &quot;Absorptivity of constructions with exterior boundary conditions exposed to outside of room model&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Emissivity"
>Modelica.SIunits.Emissivity</a> epsSurBou[NSurBou] = surBou.absIR <span style="color: #006400">
    &quot;Absorptivity of surface models of constructions that are modeled outside of this room&quot;</span>;

<span style="color: blue">end </span>PartialSurfaceInterfaceRadiative;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE SkyRadiationExchange<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Rooms.BaseClassfb194bf94115eed8hangeI.png" alt="Buildings.Rooms.BaseClasses.SkyRadiationExchange" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Rooms.BaseClasses.SkyRadiationExchange"></a><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses"
>Buildings.Rooms.BaseClasses</a>.SkyRadiationExchange</h2>
<p>
<b>Radiative heat exchange with the sky and the ambient</b>
<br>
<br><img src="Buildings.Rooms.BaseClassfb194bf94115eed8hangeD.png" alt="Buildings.Rooms.BaseClasses.SkyRadiationExchange">
</p>
<h3>Information</h3>

This model computes the infrared radiative heat flow 
between exterior building surfaces and the ambient. The ambient consists
of the sky black-body radiation and the outdoor temperature 
(which is used as an approximation to the surface temperature of
the ground and neighboring buildings).

<p>Extends from <a href="Buildings_BaseClasses.html#Buildings.BaseClasses.BaseIcon"
>Buildings.BaseClasses.BaseIcon</a> (Base icon).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>Integer</td><td>n</td><td>&nbsp;</td><td>Number of constructions</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</a></td><td>A[n]</td><td>&nbsp;</td><td>Area of exterior constructions [m2]</td></tr>
<tr><td>Real</td><td>vieFacSky[n]</td><td>&nbsp;</td><td>View factor to sky (=1 for roofs)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Emissivity"
>Emissivity</a></td><td>absIR[n]</td><td>&nbsp;</td><td>Infrared absorptivity of building surface [1]</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>HeatPort_a</a></td><td>port[n]</td><td>Heat port</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>TOut</td><td>Outside air temperature [K]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>TBlaSky</td><td>Black body sky temperature [K]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">model</span> SkyRadiationExchange <span style="color: #006400">
  &quot;Radiative heat exchange with the sky and the ambient&quot;</span>
  <span style="color: blue">extends </span><a href="Buildings_BaseClasses.html#Buildings.BaseClasses.BaseIcon"
>Buildings.BaseClasses.BaseIcon</a>;
  <span style="color: blue">parameter </span>Integer n(min=1) <span style="color: #006400">&quot;Number of constructions&quot;</span>;
   <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> A[n] <span style="color: #006400">&quot;Area of exterior constructions&quot;</span>;
  <span style="color: blue">parameter </span>Real vieFacSky[n](min=0, max=1) <span style="color: #006400">&quot;View factor to sky (=1 for roofs)&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Emissivity"
>Modelica.SIunits.Emissivity</a> absIR[n] <span style="color: #006400">
    &quot;Infrared absorptivity of building surface&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Interfaces.html#Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"
>Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a</a> port[n] <span style="color: #006400">&quot;Heat port&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> TOut(<span style="color: blue">final </span>quantity=&quot;ThermodynamicTemperature&quot;,
                                            <span style="color: blue">final </span>unit = &quot;K&quot;, min=0) <span style="color: #006400">
    &quot;Outside air temperature&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> TBlaSky(
    <span style="color: blue">final </span>quantity=&quot;ThermodynamicTemperature&quot;,
    <span style="color: blue">final </span>unit=&quot;K&quot;,
    min=0) <span style="color: #006400">&quot;Black body sky temperature&quot;</span>;
<span style="color: blue">protected </span>
  <span style="color: blue">parameter </span>Real k[n](unit=&quot;W/K4&quot;) = {4*A[i]*Modelica.Constants.sigma*absIR[i] <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:n} <span style="color: #006400">
    &quot;Constant for radiative heat exchange&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> TEnv[n] <span style="color: #006400">&quot;Environment temperature&quot;</span>;
  Real TBlaSky4(unit=&quot;K4&quot;) <span style="color: #006400">&quot;Auxiliary variable for radiative heat exchange&quot;</span>;
  Real TOut4(unit=&quot;K4&quot;) <span style="color: #006400">&quot;Auxiliary variable for radiative heat exchange&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.CoefficientOfHeatTransfer"
>Modelica.SIunits.CoefficientOfHeatTransfer</a> h[n] <span style="color: #006400">
    &quot;Radiative heat transfer coefficient&quot;</span>;

<span style="color: blue">equation </span>
  TBlaSky4 = TBlaSky^4;
  TOut4 = TOut^4;
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:n<span style="color: blue"> loop</span>
    TEnv[i] = (vieFacSky[i] * TBlaSky4 + (1-vieFacSky[i]) * TOut4)^(0.25);
    <span style="color: #006400">// h[i] uses TEnv[i] instead of (port[i].T+TEnv[i])/2 to avoid</span>
    <span style="color: #006400">// a nonlinear equation system</span>
    h[i]  = k[i] * TEnv[i]^3;
    port[i].Q_flow = h[i] * (port[i].T-TEnv[i]);
  <span style="color: blue">end for</span>;
<span style="color: blue">end </span>SkyRadiationExchange;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE ConstructionNumbers<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><a name="Buildings.Rooms.BaseClasses.ConstructionNumbers"></a><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses"
>Buildings.Rooms.BaseClasses</a>.ConstructionNumbers</h2>
<p>
<b>Data records for construction data</b>
</p>
<h3>Information</h3>

<p>
Record that defines the number of constructions that are 
used in the room model.
</p>
<p>
This record also declares parameters that contain the number of constructions,
such as the number of exterior constructions <code>nConExt</code>. 
This parameter may take on the value <code>0</code>. 
If this parameter were to be used to declare the size of vectors of
component models, then there may be vectors with zero components.
This can cause problems in Dymola 7.4. 
Therefore, a parameter is declared in the form
</p>
<pre>
  NConExt = max(1, nConExt)
</pre>
<p>This parameter is the used by models that extend this model
to set the size of the vector of component models.</p>
<p>
There are also parameters that can be used to conditionally remove components,
such as <code>haveConExt</code>, which is set to
</p>
<pre>
  haveConExt = nConExt > 0;
</pre>

<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Exterior constructions</td></tr>
<tr><td>Integer</td><td>nConExt</td><td>&nbsp;</td><td>Number of exterior constructions</td></tr>
<tr><td>Integer</td><td>nConExtWin</td><td>&nbsp;</td><td>Number of window constructions</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Partition constructions</td></tr>
<tr><td>Integer</td><td>nConPar</td><td>&nbsp;</td><td>Number of partition constructions</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Boundary constructions</td></tr>
<tr><td>Integer</td><td>nConBou</td><td>&nbsp;</td><td>Number of constructions that have their outside surface exposed to the boundary of this room</td></tr>
<tr><td>Integer</td><td>nSurBou</td><td>&nbsp;</td><td>Number of surface heat transfer models that connect to constructions that are modeled outside of this room</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">record</span> ConstructionNumbers <span style="color: #006400">&quot;Data records for construction data&quot;</span>

  <span style="color: #006400">////////////////////////////////////////////////////////////////////////</span>
  <span style="color: #006400">// Number of constructions and surface areas</span>
  <span style="color: blue">parameter </span>Integer nConExt(min=0) <span style="color: #006400">&quot;Number of exterior constructions&quot;</span>;
  <span style="color: blue">parameter </span>Integer nConExtWin(min=0) <span style="color: #006400">&quot;Number of window constructions&quot;</span>;

  <span style="color: blue">parameter </span>Integer nConPar(min=0) <span style="color: #006400">&quot;Number of partition constructions&quot;</span>;

  <span style="color: blue">parameter </span>Integer nConBou(min=0) <span style="color: #006400">
    &quot;Number of constructions that have their outside surface exposed to the boundary of this room&quot;</span>;

  <span style="color: blue">parameter </span>Integer nSurBou(min=0) <span style="color: #006400">
    &quot;Number of surface heat transfer models that connect to constructions that are modeled outside of this room&quot;</span>;

  <span style="color: #006400">// Dimensions of components and connectors</span>
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Integer NConExt(min=1) =<span style="color: red"> max</span>(1, nConExt) <span style="color: #006400">
    &quot;Number of elements for exterior constructions&quot;</span>;

  <span style="color: blue">final </span><span style="color: blue">parameter </span>Integer NConExtWin(min=1)=<span style="color: red">max</span>(1, nConExtWin) <span style="color: #006400">
    &quot;Number of elements for exterior constructions with windows&quot;</span>;

  <span style="color: blue">final </span><span style="color: blue">parameter </span>Integer NConPar(min=1)=<span style="color: red">max</span>(1, nConPar) <span style="color: #006400">
    &quot;Number of elements for partition constructions&quot;</span>;

  <span style="color: blue">final </span><span style="color: blue">parameter </span>Integer NConBou(min=1)=<span style="color: red">max</span>(1, nConBou) <span style="color: #006400">
    &quot;Number of elements for constructions that have their outside surface exposed to the boundary of this room&quot;</span>;

  <span style="color: blue">final </span><span style="color: blue">parameter </span>Integer NSurBou(min=1)=<span style="color: red">max</span>(1, nSurBou) <span style="color: #006400">
    &quot;Number of elements for surface heat transfer models that connect to constructions that are modeled outside of this room&quot;</span>;

  <span style="color: #006400">// Flags to conditionally remove components</span>
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Boolean haveConExt = nConExt &gt; 0 <span style="color: #006400">
    &quot;Flag to conditionally remove components&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Boolean haveConExtWin = nConExtWin &gt; 0 <span style="color: #006400">
    &quot;Flag to conditionally remove components&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Boolean haveConPar = nConPar &gt; 0 <span style="color: #006400">
    &quot;Flag to conditionally remove components&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Boolean haveConBou = nConBou &gt; 0 <span style="color: #006400">
    &quot;Flag to conditionally remove components&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Boolean haveSurBou = nSurBou &gt; 0 <span style="color: #006400">
    &quot;Flag to conditionally remove components&quot;</span>;

<span style="color: blue">end </span>ConstructionNumbers;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE ConstructionRecords<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><a name="Buildings.Rooms.BaseClasses.ConstructionRecords"></a><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses"
>Buildings.Rooms.BaseClasses</a>.ConstructionRecords</h2>
<p>
<b>Data records for construction data</b>
<br>
<br><img src="Buildings.Rooms.BaseClass7a7debdf919d9749cordsD.png" alt="Buildings.Rooms.BaseClasses.ConstructionRecords">
</p>
<h3>Information</h3>

<p>
Record that defines the number of constructions that are
used in the room model.
</p>

<p>Extends from <a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ConstructionNumbers"
>Buildings.Rooms.BaseClasses.ConstructionNumbers</a> (Data records for construction data).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstruction"
>ParameterConstruction</a></td><td>datConExt[NConExt]</td><td>&nbsp;</td><td>Data for exterior construction</td></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstructionWithWindow"
>ParameterConstructionWithWindow</a></td><td>datConExtWin[NConExtWin]</td><td>&nbsp;</td><td>Data for exterior construction with window</td></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstruction"
>ParameterConstruction</a></td><td>datConPar[NConPar]</td><td>&nbsp;</td><td>Data for partition construction</td></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstruction"
>ParameterConstruction</a></td><td>datConBou[NConBou]</td><td>&nbsp;</td><td>Data for construction boundary</td></tr>
<tr><td><a href="Buildings_HeatTransfer_Data_OpaqueSurfaces.html#Buildings.HeatTransfer.Data.OpaqueSurfaces.Generic"
>Generic</a></td><td>surBou[NSurBou]</td><td>&nbsp;</td><td>Record for data of surfaces whose heat conduction is modeled outside of this room</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Exterior constructions</td></tr>
<tr><td>Integer</td><td>nConExt</td><td>&nbsp;</td><td>Number of exterior constructions</td></tr>
<tr><td>Integer</td><td>nConExtWin</td><td>&nbsp;</td><td>Number of window constructions</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Partition constructions</td></tr>
<tr><td>Integer</td><td>nConPar</td><td>&nbsp;</td><td>Number of partition constructions</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Boundary constructions</td></tr>
<tr><td>Integer</td><td>nConBou</td><td>&nbsp;</td><td>Number of constructions that have their outside surface exposed to the boundary of this room</td></tr>
<tr><td>Integer</td><td>nSurBou</td><td>&nbsp;</td><td>Number of surface heat transfer models that connect to constructions that are modeled outside of this room</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">record</span> ConstructionRecords <span style="color: #006400">&quot;Data records for construction data&quot;</span>
  <span style="color: blue">extends </span><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ConstructionNumbers"
>Buildings.Rooms.BaseClasses.ConstructionNumbers</a>;

  <span style="color: blue">parameter </span><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstruction"
>ParameterConstruction</a> datConExt[NConExt](
    <span style="color: blue">each </span>A=0,
    <span style="color: blue">redeclare </span><a href="Buildings_HeatTransfer_Data_OpaqueConstructions.html#Buildings.HeatTransfer.Data.OpaqueConstructions.Brick120"
>Buildings.HeatTransfer.Data.OpaqueConstructions.Brick120</a> layers,
    <span style="color: blue">each </span>til=0,
    <span style="color: blue">each </span>azi=0) <span style="color: #006400">&quot;Data for exterior construction&quot;</span>;
  <span style="color: blue">parameter </span><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstructionWithWindow"
>Buildings.Rooms.BaseClasses.ParameterConstructionWithWindow</a>
    datConExtWin[NConExtWin](
    <span style="color: blue">each </span>A=0,
    <span style="color: blue">redeclare </span><a href="Buildings_HeatTransfer_Data_OpaqueConstructions.html#Buildings.HeatTransfer.Data.OpaqueConstructions.Brick120"
>Buildings.HeatTransfer.Data.OpaqueConstructions.Brick120</a> layers,
    <span style="color: blue">each </span>til=0,
    <span style="color: blue">each </span>azi=0,
    <span style="color: blue">each </span>hWin=0,
    <span style="color: blue">each </span>wWin=0,
    <span style="color: blue">redeclare </span><a href="Buildings_HeatTransfer_Data_GlazingSystems.html#Buildings.HeatTransfer.Data.GlazingSystems.SingleClear3"
>Buildings.HeatTransfer.Data.GlazingSystems.SingleClear3</a> glaSys) <span style="color: #006400">
    &quot;Data for exterior construction with window&quot;</span>;
  <span style="color: blue">parameter </span><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstruction"
>Buildings.Rooms.BaseClasses.ParameterConstruction</a> datConPar[
              NConPar](
    <span style="color: blue">each </span>A=0,
    <span style="color: blue">redeclare </span><a href="Buildings_HeatTransfer_Data_OpaqueConstructions.html#Buildings.HeatTransfer.Data.OpaqueConstructions.Brick120"
>Buildings.HeatTransfer.Data.OpaqueConstructions.Brick120</a> layers,
    <span style="color: blue">each </span>til=0,
    <span style="color: blue">each </span>azi=0) <span style="color: #006400">&quot;Data for partition construction&quot;</span>;
  <span style="color: blue">parameter </span><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.ParameterConstruction"
>Buildings.Rooms.BaseClasses.ParameterConstruction</a> datConBou[NConBou](
    <span style="color: blue">each </span>A=0,
    <span style="color: blue">redeclare </span><a href="Buildings_HeatTransfer_Data_OpaqueConstructions.html#Buildings.HeatTransfer.Data.OpaqueConstructions.Brick120"
>Buildings.HeatTransfer.Data.OpaqueConstructions.Brick120</a> layers,
    <span style="color: blue">each </span>til=0,
    <span style="color: blue">each </span>azi=0) <span style="color: #006400">&quot;Data for construction boundary&quot;</span>;
  <span style="color: blue">parameter </span><a href="Buildings_HeatTransfer_Data_OpaqueSurfaces.html#Buildings.HeatTransfer.Data.OpaqueSurfaces.Generic"
>Buildings.HeatTransfer.Data.OpaqueSurfaces.Generic</a> surBou[
                                    NSurBou](<span style="color: blue">each </span>A=0, <span style="color: blue">each </span>til=0) <span style="color: #006400">
    &quot;Record for data of surfaces whose heat conduction is modeled outside of this room&quot;</span>;


<span style="color: blue">end </span>ConstructionRecords;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE Overhang<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><a name="Buildings.Rooms.BaseClasses.Overhang"></a><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses"
>Buildings.Rooms.BaseClasses</a>.Overhang</h2>
<p>
<b>Record for window overhang</b>
</p>
<h3>Information</h3>

<p>
This record declares parameters for window overhangs.
</p>
<p>
See 
<a href="Buildings_HeatTransfer_Windows.html#Buildings.HeatTransfer.Windows.Overhang"
>
Buildings.HeatTransfer.Windows.Overhang</a>
for an explanation of the parameters, and
for the assumptions and limitations
of the overhang model.
</p>

<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Overhang</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>wL</td><td>&nbsp;</td><td>Overhang width left to the window, measured from the window corner [m]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>wR</td><td>&nbsp;</td><td>Overhang width right to the window, measured from the window corner [m]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>dep</td><td>&nbsp;</td><td>Overhang depth (measured perpendicular to the wall plane) [m]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>gap</td><td>&nbsp;</td><td>Distance between window upper edge and overhang lower edge [m]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">record</span> Overhang <span style="color: #006400">&quot;Record for window overhang&quot;</span>

  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</a> wL(min=0) <span style="color: #006400">
    &quot;Overhang width left to the window, measured from the window corner&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</a> wR(min=0) <span style="color: #006400">
    &quot;Overhang width right to the window, measured from the window corner&quot;</span>;

  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</a> dep(min=0) <span style="color: #006400">
    &quot;Overhang depth (measured perpendicular to the wall plane)&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</a> gap(min=0) <span style="color: #006400">
    &quot;Distance between window upper edge and overhang lower edge&quot;</span>;

  <span style="color: blue">final </span><span style="color: blue">parameter </span>Boolean haveOverhang= dep &gt; Modelica.Constants.eps <span style="color: #006400">
    &quot;Flag, true if the window has an overhang&quot;</span>;


<span style="color: blue">end </span>Overhang;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE ParameterConstructionWithWindow<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Rooms.BaseClass9e633c7ec4500d5eindowI.png" alt="Buildings.Rooms.BaseClasses.ParameterConstructionWithWindow" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Rooms.BaseClasses.ParameterConstructionWithWindow"></a><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses"
>Buildings.Rooms.BaseClasses</a>.ParameterConstructionWithWindow</h2>
<p>
<b>Record for exterior constructions that have a window</b>
<br>
<br><img src="Buildings.Rooms.BaseClass9e633c7ec4500d5eindowD.png" alt="Buildings.Rooms.BaseClasses.ParameterConstructionWithWindow">
</p>
<h3>Information</h3>

<p>
This data record is used to set the parameters of constructions that do have a window.
</p>
<p>
The surface azimuth is defined in 
<a href="Buildings_HeatTransfer_Types_Azimuth.html#Buildings.HeatTransfer.Types.Azimuth"
>
Buildings.HeatTransfer.Types.Azimuth</a>
and the surface tilt is defined in <a href="Buildings_HeatTransfer_Types_Tilt.html#Buildings.HeatTransfer.Types.Tilt"
>
Buildings.HeatTransfer.Types.Tilt</a>
</p>

<p>Extends from <a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.PartialParameterConstruction"
>Buildings.Rooms.BaseClasses.PartialParameterConstruction</a> (Partial record for constructions).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Angle</a></td><td>til</td><td>&nbsp;</td><td>Surface tilt [rad]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Angle</a></td><td>azi</td><td>&nbsp;</td><td>Surface azimuth [rad]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</a></td><td>A</td><td>&nbsp;</td><td>Heat transfer area of opaque construction and window combined [m2]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Opaque construction</td></tr>
<tr><td><a href="Buildings_HeatTransfer_Data_OpaqueConstructions.html#Buildings.HeatTransfer.Data.OpaqueConstructions.Generic"
>Generic</a></td><td>layers</td><td>redeclare parameter Building...</td><td>Material properties of opaque construction</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td>Boolean</td><td>steadyStateInitial</td><td>false</td><td>=true initializes dT(0)/dt=0, false initializes T(0) at fixed temperature using T_a_start and T_b_start</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</a></td><td>T_a_start</td><td>293.15</td><td>Initial temperature at port_a, used if steadyStateInitial = false [K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</a></td><td>T_b_start</td><td>293.15</td><td>Initial temperature at port_b, used if steadyStateInitial = false [K]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Glazing system</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>hWin</td><td>&nbsp;</td><td>Window height [m]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>wWin</td><td>&nbsp;</td><td>Window width [m]</td></tr>
<tr><td>Real</td><td>fFra</td><td>0.1</td><td>Fraction of window frame divided by total window area</td></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.Overhang"
>Overhang</a></td><td>ove</td><td>redeclare parameter Building...</td><td>Geometry of overhang</td></tr>
<tr><td><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.SideFins"
>SideFins</a></td><td>sidFin</td><td>redeclare parameter Building...</td><td>Geometry of side fins</td></tr>
<tr><td><a href="Buildings_HeatTransfer_Data_GlazingSystems.html#Buildings.HeatTransfer.Data.GlazingSystems.Generic"
>Generic</a></td><td>glaSys</td><td>redeclare parameter HeatTran...</td><td>Material properties of glazing system</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">record</span> ParameterConstructionWithWindow <span style="color: #006400">
  &quot;Record for exterior constructions that have a window&quot;</span>
  <span style="color: blue">extends </span><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.PartialParameterConstruction"
>Buildings.Rooms.BaseClasses.PartialParameterConstruction</a>;

  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> A <span style="color: #006400">
    &quot;Heat transfer area of opaque construction and window combined&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</a> hWin <span style="color: #006400">&quot;Window height&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</a> wWin <span style="color: #006400">&quot;Window width&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> AWin=hWin*wWin <span style="color: #006400">
    &quot;Heat transfer area of window&quot;</span>;

  <span style="color: blue">final </span><span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> AOpa = A-AWin <span style="color: #006400">
    &quot;Heat transfer area of opaque construction&quot;</span>;

  <span style="color: blue">parameter </span>Real fFra(
    <span style="color: blue">final </span>min=0,
    <span style="color: blue">final </span>max=1) = 0.1 <span style="color: #006400">&quot;Fraction of window frame divided by total window area&quot;</span>;

 <span style="color: blue">replaceable </span><span style="color: blue">parameter </span><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.Overhang"
>Buildings.Rooms.BaseClasses.Overhang</a> ove(
    wR=0,
    wL=0,
    dep=0,
    gap=0) <span style="color: #006400">&quot;Geometry of overhang&quot;</span>;
 <span style="color: blue">replaceable </span><span style="color: blue">parameter </span><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.SideFins"
>Buildings.Rooms.BaseClasses.SideFins</a> sidFin(h=0, dep=0, gap=0) <span style="color: #006400">
    &quot;Geometry of side fins&quot;</span>;

  <span style="color: blue">final </span><span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> AFra = fFra*AWin <span style="color: #006400">&quot;Frame area&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> AGla=AWin - AFra <span style="color: #006400">&quot;Glass area&quot;</span>;

 <span style="color: blue">replaceable </span><span style="color: blue">parameter </span><a href="Buildings_HeatTransfer_Data_GlazingSystems.html#Buildings.HeatTransfer.Data.GlazingSystems.Generic"
>HeatTransfer.Data.GlazingSystems.Generic</a> glaSys <span style="color: #006400">
    &quot;Material properties of glazing system&quot;</span>;

<span style="color: blue">end </span>ParameterConstructionWithWindow;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE ParameterConstruction<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Rooms.BaseClass9e633c7ec4500d5eindowI.png" alt="Buildings.Rooms.BaseClasses.ParameterConstruction" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Rooms.BaseClasses.ParameterConstruction"></a><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses"
>Buildings.Rooms.BaseClasses</a>.ParameterConstruction</h2>
<p>
<b>Record for exterior constructions that have no window</b>
</p>
<h3>Information</h3>

<p>
This data record is used to set the parameters of constructions that do not have a window.
</p>
<p>
The surface azimuth is defined in 
<a href="Buildings_HeatTransfer_Types_Azimuth.html#Buildings.HeatTransfer.Types.Azimuth"
>
Buildings.HeatTransfer.Types.Azimuth</a>
and the surface tilt is defined in <a href="Buildings_HeatTransfer_Types_Tilt.html#Buildings.HeatTransfer.Types.Tilt"
>
Buildings.HeatTransfer.Types.Tilt</a>
</p>

<p>Extends from <a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.PartialParameterConstruction"
>Buildings.Rooms.BaseClasses.PartialParameterConstruction</a> (Partial record for constructions).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Angle</a></td><td>til</td><td>&nbsp;</td><td>Surface tilt [rad]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Angle</a></td><td>azi</td><td>&nbsp;</td><td>Surface azimuth [rad]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</a></td><td>A</td><td>&nbsp;</td><td>Heat transfer area [m2]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Opaque construction</td></tr>
<tr><td><a href="Buildings_HeatTransfer_Data_OpaqueConstructions.html#Buildings.HeatTransfer.Data.OpaqueConstructions.Generic"
>Generic</a></td><td>layers</td><td>redeclare parameter Building...</td><td>Material properties of opaque construction</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td>Boolean</td><td>steadyStateInitial</td><td>false</td><td>=true initializes dT(0)/dt=0, false initializes T(0) at fixed temperature using T_a_start and T_b_start</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</a></td><td>T_a_start</td><td>293.15</td><td>Initial temperature at port_a, used if steadyStateInitial = false [K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</a></td><td>T_b_start</td><td>293.15</td><td>Initial temperature at port_b, used if steadyStateInitial = false [K]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">record</span> ParameterConstruction <span style="color: #006400">
  &quot;Record for exterior constructions that have no window&quot;</span>
  <span style="color: blue">extends </span><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses.PartialParameterConstruction"
>Buildings.Rooms.BaseClasses.PartialParameterConstruction</a>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> A <span style="color: #006400">&quot;Heat transfer area&quot;</span>;


<span style="color: blue">end </span>ParameterConstruction;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE PartialParameterConstruction<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Rooms.BaseClass9e633c7ec4500d5eindowI.png" alt="Buildings.Rooms.BaseClasses.PartialParameterConstruction" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Rooms.BaseClasses.PartialParameterConstruction"></a><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses"
>Buildings.Rooms.BaseClasses</a>.PartialParameterConstruction</h2>
<p>
<b>Partial record for constructions</b>
</p>
<h3>Information</h3>

<p>
This data record is used to set the parameters of constructions that do not have a window.
</p>
<p>
The surface azimuth is defined in 
<a href="Buildings_HeatTransfer_Types_Azimuth.html#Buildings.HeatTransfer.Types.Azimuth"
>
Buildings.HeatTransfer.Types.Azimuth</a>
and the surface tilt is defined in <a href="Buildings_HeatTransfer_Types_Tilt.html#Buildings.HeatTransfer.Types.Tilt"
>
Buildings.HeatTransfer.Types.Tilt</a>
</p>

<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.Record"
>Modelica.Icons.Record</a> (Icon for records).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Angle</a></td><td>til</td><td>&nbsp;</td><td>Surface tilt [rad]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Angle</a></td><td>azi</td><td>&nbsp;</td><td>Surface azimuth [rad]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Opaque construction</td></tr>
<tr><td><a href="Buildings_HeatTransfer_Data_OpaqueConstructions.html#Buildings.HeatTransfer.Data.OpaqueConstructions.Generic"
>Generic</a></td><td>layers</td><td>redeclare parameter Building...</td><td>Material properties of opaque construction</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td>Boolean</td><td>steadyStateInitial</td><td>false</td><td>=true initializes dT(0)/dt=0, false initializes T(0) at fixed temperature using T_a_start and T_b_start</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</a></td><td>T_a_start</td><td>293.15</td><td>Initial temperature at port_a, used if steadyStateInitial = false [K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</a></td><td>T_b_start</td><td>293.15</td><td>Initial temperature at port_b, used if steadyStateInitial = false [K]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">record</span> PartialParameterConstruction <span style="color: #006400">
  &quot;Partial record for constructions&quot;</span>
  <span style="color: blue">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Icons.html#Modelica.Icons.Record"
>Modelica.Icons.Record</a>;
  <span style="color: blue">replaceable </span><span style="color: blue">parameter </span><a href="Buildings_HeatTransfer_Data_OpaqueConstructions.html#Buildings.HeatTransfer.Data.OpaqueConstructions.Generic"
>Buildings.HeatTransfer.Data.OpaqueConstructions.Generic</a>
    layers <span style="color: #006400">&quot;Material properties of opaque construction&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Modelica.SIunits.Angle</a> til <span style="color: #006400">&quot;Surface tilt&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Modelica.SIunits.Angle</a> azi <span style="color: #006400">&quot;Surface azimuth&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Boolean isFloor=til &gt; 2.74889125<span style="color: blue"> and </span>til &lt; 3.53428875 <span style="color: #006400">
    &quot;Flag, true if construction is a floor&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Boolean isCeiling=til &gt; -0.392699<span style="color: blue"> and </span>til &lt; 0.392699 <span style="color: #006400">
    &quot;Flag, true if construction is a floor&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Integer nLay(min=1, fixed=true) = layers.nLay <span style="color: #006400">
    &quot;Number of layers&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Integer nSta[nLay](<span style="color: blue">each </span>min=1)={layers.material[i].nSta <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:nLay} <span style="color: #006400">
    &quot;Number of states&quot;</span>;
  <span style="color: blue">parameter </span>Boolean steadyStateInitial=false <span style="color: #006400">
    &quot;=true initializes dT(0)/dt=0, false initializes T(0) at fixed temperature using T_a_start and T_b_start&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> T_a_start=293.15 <span style="color: #006400">
    &quot;Initial temperature at port_a, used if steadyStateInitial = false&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> T_b_start=293.15 <span style="color: #006400">
    &quot;Initial temperature at port_b, used if steadyStateInitial = false&quot;</span>;


<span style="color: blue">end </span>PartialParameterConstruction;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE SideFins<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><a name="Buildings.Rooms.BaseClasses.SideFins"></a><a href="Buildings_Rooms_BaseClasses.html#Buildings.Rooms.BaseClasses"
>Buildings.Rooms.BaseClasses</a>.SideFins</h2>
<p>
<b>Record for window side fins</b>
</p>
<h3>Information</h3>

<p>
This record declares parameters for window side fins.
</p>
<p>
See 
<a href="Buildings_HeatTransfer_Windows.html#Buildings.HeatTransfer.Windows.SideFins"
>
Buildings.HeatTransfer.Windows.SideFins</a>
for an explanation of the parameters, and
for the assumptions and limitations
of the model for side fins.
</p>

<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Side fin</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>h</td><td>&nbsp;</td><td>Height of side fin that extends above window, measured from top of window [m]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>dep</td><td>&nbsp;</td><td>Side fin depth (measured perpendicular to the wall plane) [m]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>gap</td><td>&nbsp;</td><td>Distance between side fin and window edge [m]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">record</span> SideFins <span style="color: #006400">&quot;Record for window side fins&quot;</span>

  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</a> h(min=0) <span style="color: #006400">
    &quot;Height of side fin that extends above window, measured from top of window&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</a> dep(min=0) <span style="color: #006400">
    &quot;Side fin depth (measured perpendicular to the wall plane)&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</a> gap(min=0) <span style="color: #006400">
    &quot;Distance between side fin and window edge&quot;</span>;

  <span style="color: blue">final </span><span style="color: blue">parameter </span>Boolean haveSideFins= dep &gt; Modelica.Constants.eps <span style="color: #006400">
    &quot;Flag, true if the window has side fins&quot;</span>;


<span style="color: blue">end </span>SideFins;
</div>
<hr>
<address>
<a href="http://www.3ds.com/">Automatically generated</a> Thu Jun 19 11:01:01 2014.
</address>
</body>
</html>
